"use strict";(self.webpackChunkpleroma_fe=self.webpackChunkpleroma_fe||[]).push([[5292],{28455:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ku});var l=n(66252),o=["label"],a=["label"],i=["label"],s=["label"],r=["label"],u=["label"],c=["label"],d=["label"],p=["label"],m=["label"],f=n(79354),h=n(3577),g=["label"],b={class:"setting-item"},w={class:"setting-item"},_={class:"setting-item"},v={class:"setting-item"},k={class:"setting-item"},y={class:"setting-item"},$={class:"setting-item"},C=(0,l._)("th",null,null,-1),V={class:"actions"},U=["href"],T={key:1},x={key:2},z={key:3},O={key:0,class:"alert error"},L=["title"],W={key:1},P={key:2},S=n(4942),D={class:"importer"},j={key:2},I={key:3},A=n(9382),B=n(84131);A.vI.add(B.IJ7,B.NBC);const E={props:{submitHandler:{type:Function,required:!0},submitButtonLabel:{type:String},successMessage:{type:String},errorMessage:{type:String}},data:function(){return{file:null,error:!1,success:!1,submitting:!1}},methods:{change:function(){this.file=this.$refs.input.files[0]},submit:function(){var e=this;this.dismiss(),this.submitting=!0,this.submitHandler(this.file).then((function(){e.success=!0})).catch((function(){e.error=!0})).finally((function(){e.submitting=!1}))},dismiss:function(){this.success=!1,this.error=!1}}};var F=n(83744);const q=(0,F.Z)(E,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("FAIcon");return(0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("form",null,[(0,l._)("input",{ref:"input",class:"input",type:"file",onChange:t[0]||(t[0]=function(){return e.change&&e.change.apply(e,arguments)})},null,544)]),e.submitting?((0,l.wg)(),(0,l.j4)(s,{key:0,class:"importer-uploading",spin:"",icon:"circle-notch"})):((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn button-default",onClick:t[1]||(t[1]=function(){return e.submit&&e.submit.apply(e,arguments)})},(0,h.zw)(e.submitButtonLabel||e.$t("importer.submit")),1)),e.success?((0,l.wg)(),(0,l.iD)("div",j,[(0,l._)("button",{class:"button-unstyled",onClick:t[2]||(t[2]=function(){return e.dismiss&&e.dismiss.apply(e,arguments)})},[(0,l.Wm)(s,{icon:"times"})]),(0,l.Uk)(" "+(0,h.zw)(" ")+" "),(0,l._)("span",null,(0,h.zw)(e.successMessage||e.$t("importer.success")),1)])):e.error?((0,l.wg)(),(0,l.iD)("div",I,[(0,l._)("button",{class:"button-unstyled",onClick:t[3]||(t[3]=function(){return e.dismiss&&e.dismiss.apply(e,arguments)})},[(0,l.Wm)(s,{icon:"times"})]),(0,l.Uk)(" "+(0,h.zw)(" ")+" "),(0,l._)("span",null,(0,h.zw)(e.errorMessage||e.$t("importer.error")),1)])):(0,l.kq)("",!0)])}]]);var Z={class:"exporter"},M={key:0};A.vI.add(B.IJ7);const R={props:{getContent:{type:Function,required:!0},filename:{type:String,default:"export.csv"},exportButtonLabel:{type:String},processingMessage:{type:String}},data:function(){return{processing:!1}},methods:{process:function(){var e=this;this.processing=!0,this.getContent().then((function(t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e.filename),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout((function(){e.processing=!1}),2e3)}))}}},N=(0,F.Z)(R,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("FAIcon");return(0,l.wg)(),(0,l.iD)("div",Z,[e.processing?((0,l.wg)(),(0,l.iD)("div",M,[(0,l.Wm)(s,{icon:"circle-notch",size:"lg",spin:""}),(0,l._)("span",null,(0,h.zw)(e.processingMessage||e.$t("exporter.processing")),1)])):((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn button-default",onClick:t[0]||(t[0]=function(){return e.process&&e.process.apply(e,arguments)})},(0,h.zw)(e.exportButtonLabel||e.$t("exporter.export")),1))])}]]);var H=n(65365),Y=n(989);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}const G={data:function(){return{activeTab:"profile",newDomainToMute:"",listBackupsError:!1,addBackupError:!1,addedBackup:!1,backups:[]}},created:function(){this.$store.dispatch("fetchTokens"),this.fetchBackups()},components:{Importer:q,Exporter:N,Checkbox:H.Z},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,Y.rn)({backendInteractor:function(e){return e.api.backendInteractor},user:function(e){return e.users.currentUser}})),methods:{getFollowsContent:function(){return this.backendInteractor.exportFriends({id:this.user.id}).then(this.generateExportableUsersContent)},getBlocksContent:function(){return this.backendInteractor.fetchBlocks().then(this.generateExportableUsersContent)},getMutesContent:function(){return this.backendInteractor.fetchMutes().then(this.generateExportableUsersContent)},importFollows:function(e){return this.backendInteractor.importFollows({file:e}).then((function(e){if(!e)throw new Error("failed")}))},importBlocks:function(e){return this.backendInteractor.importBlocks({file:e}).then((function(e){if(!e)throw new Error("failed")}))},importMutes:function(e){return this.backendInteractor.importMutes({file:e}).then((function(e){if(!e)throw new Error("failed")}))},generateExportableUsersContent:function(e){return e.map((function(e){return e&&e.is_local?e.screen_name+"@"+location.hostname:e.screen_name})).join("\n")},addBackup:function(){var e=this;this.$store.state.api.backendInteractor.addBackup().then((function(t){e.addedBackup=!0,e.addBackupError=!1})).catch((function(t){e.addedBackup=!1,e.addBackupError=t})).then((function(){return e.fetchBackups()}))},fetchBackups:function(){var e=this;this.$store.state.api.backendInteractor.listBackups().then((function(t){e.backups=t,e.listBackupsError=!1})).catch((function(t){e.listBackupsError=t.error}))}}},Q=(0,F.Z)(G,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("Importer"),r=(0,l.up)("Exporter"),u=(0,l.up)("FAIcon");return(0,l.wg)(),(0,l.iD)("div",{label:e.$t("settings.data_import_export_tab")},[(0,l._)("div",b,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.follow_import")),1),(0,l._)("p",null,(0,h.zw)(e.$t("settings.import_followers_from_a_csv_file")),1),(0,l.Wm)(s,{"submit-handler":e.importFollows,"success-message":e.$t("settings.follows_imported"),"error-message":e.$t("settings.follow_import_error")},null,8,["submit-handler","success-message","error-message"])]),(0,l._)("div",w,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.follow_export")),1),(0,l.Wm)(r,{"get-content":e.getFollowsContent,filename:"friends.csv","export-button-label":e.$t("settings.follow_export_button")},null,8,["get-content","export-button-label"])]),(0,l._)("div",_,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.block_import")),1),(0,l._)("p",null,(0,h.zw)(e.$t("settings.import_blocks_from_a_csv_file")),1),(0,l.Wm)(s,{"submit-handler":e.importBlocks,"success-message":e.$t("settings.blocks_imported"),"error-message":e.$t("settings.block_import_error")},null,8,["submit-handler","success-message","error-message"])]),(0,l._)("div",v,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.block_export")),1),(0,l.Wm)(r,{"get-content":e.getBlocksContent,filename:"blocks.csv","export-button-label":e.$t("settings.block_export_button")},null,8,["get-content","export-button-label"])]),(0,l._)("div",k,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.mute_import")),1),(0,l._)("p",null,(0,h.zw)(e.$t("settings.import_mutes_from_a_csv_file")),1),(0,l.Wm)(s,{"submit-handler":e.importMutes,"success-message":e.$t("settings.mutes_imported"),"error-message":e.$t("settings.mute_import_error")},null,8,["submit-handler","success-message","error-message"])]),(0,l._)("div",y,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.mute_export")),1),(0,l.Wm)(r,{"get-content":e.getMutesContent,filename:"mutes.csv","export-button-label":e.$t("settings.mute_export_button")},null,8,["get-content","export-button-label"])]),(0,l._)("div",$,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.account_backup")),1),(0,l._)("p",null,(0,h.zw)(e.$t("settings.account_backup_description")),1),(0,l._)("table",null,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,(0,h.zw)(e.$t("settings.account_backup_table_head")),1),C])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.backups,(function(t){return(0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,(0,h.zw)(t.inserted_at),1),(0,l._)("td",V,[t.processed?((0,l.wg)(),(0,l.iD)("a",{key:0,target:"_blank",href:t.url},(0,h.zw)(e.$t("settings.download_backup")),9,U)):"running"===t.state?((0,l.wg)(),(0,l.iD)("span",T,(0,h.zw)(e.$tc("settings.backup_running",t.processed_number,{number:t.processed_number})),1)):"failed"===t.state?((0,l.wg)(),(0,l.iD)("span",x,(0,h.zw)(e.$t("settings.backup_failed")),1)):((0,l.wg)(),(0,l.iD)("span",z,(0,h.zw)(e.$t("settings.backup_not_ready")),1))])])})),128))])]),e.listBackupsError?((0,l.wg)(),(0,l.iD)("div",O,[(0,l.Uk)((0,h.zw)(e.$t("settings.list_backups_error",{error:e.error}))+" ",1),(0,l._)("button",{title:e.$t("settings.hide_list_backups_error_action"),onClick:t[0]||(t[0]=function(t){return e.listBackupsError=!1})},[(0,l.Wm)(u,{class:"fa-scale-110 fa-old-padding",icon:"times"})],8,L)])):(0,l.kq)("",!0),(0,l._)("button",{class:"btn button-default",onClick:t[1]||(t[1]=function(){return e.addBackup&&e.addBackup.apply(e,arguments)})},(0,h.zw)(e.$t("settings.add_backup")),1),e.addedBackup?((0,l.wg)(),(0,l.iD)("p",W,(0,h.zw)(e.$t("settings.added_backup")),1)):(0,l.kq)("",!0),!1!==e.addBackupError?((0,l.wg)(),(0,l.iD)("p",P,(0,h.zw)(e.$t("settings.add_backup_error",{error:e.addBackupError})),1)):(0,l.kq)("",!0)])],8,g)}]]);var J=["label"],X={class:"usersearch-wrapper"},ee={class:"bulk-actions"},te=["label"],ne=["label"],le={class:"usersearch-wrapper"},oe={class:"bulk-actions"},ae=["label"],ie={class:"domain-mute-form"},se={class:"bulk-actions"},re=n(27361),ue=n.n(re),ce=n(35161),de=n.n(ce),pe=n(43063),me=n.n(pe),fe=n(49963),he={class:"autosuggest"},ge=["placeholder"],be={key:0,class:"panel autosuggest-results"};const we={props:{query:{type:Function,required:!0},filter:{type:Function},placeholder:{type:String,default:"Search..."}},data:function(){return{term:"",timeout:null,results:[],resultsVisible:!1}},computed:{filtered:function(){return this.filter?this.filter(this.results):this.results}},watch:{term:function(e){this.fetchResults(e)}},methods:{fetchResults:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.results=[],e&&t.query(e).then((function(e){t.results=e}))}),500)},onInputClick:function(){this.resultsVisible=!0},onClickOutside:function(){this.resultsVisible=!1}}},_e=(0,F.Z)(we,[["render",function(e,t,n,o,a,i){var s=(0,l.Q2)("click-outside");return(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",he,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.term=t}),placeholder:e.placeholder,class:"input autosuggest-input",onClick:t[1]||(t[1]=function(){return e.onInputClick&&e.onInputClick.apply(e,arguments)})},null,8,ge),[[fe.nr,e.term]]),e.resultsVisible&&e.filtered.length>0?((0,l.wg)(),(0,l.iD)("div",be,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.filtered,(function(t){return(0,l.WI)(e.$slots,"default",{item:t})})),256))])):(0,l.kq)("",!0)])),[[s,e.onClickOutside]])}]]);var ve={class:"block-card-content-container"},ke=["disabled"],ye=["disabled"],$e=n(32609);const Ce={props:["userId"],data:function(){return{progress:!1}},computed:{user:function(){return this.$store.getters.findUser(this.userId)},relationship:function(){return this.$store.getters.relationship(this.userId)},blocked:function(){return this.relationship.blocking}},components:{BasicUserCard:$e.Z},methods:{unblockUser:function(){var e=this;this.progress=!0,this.$store.dispatch("unblockUser",this.user.id).then((function(){e.progress=!1}))},blockUser:function(){var e=this;this.progress=!0,this.$store.dispatch("blockUser",this.user.id).then((function(){e.progress=!1}))}}},Ve=(0,F.Z)(Ce,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("basic-user-card");return(0,l.wg)(),(0,l.j4)(s,{user:e.user},{default:(0,l.w5)((function(){return[(0,l._)("div",ve,[e.blocked?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn button-default",disabled:e.progress,onClick:t[0]||(t[0]=function(){return e.unblockUser&&e.unblockUser.apply(e,arguments)})},[e.progress?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,h.zw)(e.$t("user_card.unblock_progress")),1)],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,h.zw)(e.$t("user_card.unblock")),1)],64))],8,ke)):((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn button-default",disabled:e.progress,onClick:t[1]||(t[1]=function(){return e.blockUser&&e.blockUser.apply(e,arguments)})},[e.progress?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,h.zw)(e.$t("user_card.block_progress")),1)],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,h.zw)(e.$t("user_card.block")),1)],64))],8,ye))])]})),_:1},8,["user"])}]]);var Ue={class:"mute-card-content-container"},Te=["disabled"],xe=["disabled"];const ze={props:["userId"],data:function(){return{progress:!1}},computed:{user:function(){return this.$store.getters.findUser(this.userId)},relationship:function(){return this.$store.getters.relationship(this.userId)},muted:function(){return this.relationship.muting}},components:{BasicUserCard:$e.Z},methods:{unmuteUser:function(){var e=this;this.progress=!0,this.$store.dispatch("unmuteUser",this.userId).then((function(){e.progress=!1}))},muteUser:function(){var e=this;this.progress=!0,this.$store.dispatch("muteUser",this.userId).then((function(){e.progress=!1}))}}},Oe=(0,F.Z)(ze,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("basic-user-card");return(0,l.wg)(),(0,l.j4)(s,{user:e.user},{default:(0,l.w5)((function(){return[(0,l._)("div",Ue,[e.muted?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn button-default",disabled:e.progress,onClick:t[0]||(t[0]=function(){return e.unmuteUser&&e.unmuteUser.apply(e,arguments)})},[e.progress?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,h.zw)(e.$t("user_card.unmute_progress")),1)],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,h.zw)(e.$t("user_card.unmute")),1)],64))],8,Te)):((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn button-default",disabled:e.progress,onClick:t[1]||(t[1]=function(){return e.muteUser&&e.muteUser.apply(e,arguments)})},[e.progress?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,h.zw)(e.$t("user_card.mute_progress")),1)],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,h.zw)(e.$t("user_card.mute")),1)],64))],8,xe))])]})),_:1},8,["user"])}]]);var Le={class:"domain-mute-card"},We={class:"domain-mute-card-domain"},Pe=n(99507);const Se={props:["domain"],components:{ProgressButton:Pe.Z},computed:{user:function(){return this.$store.state.users.currentUser},muted:function(){return this.user.domainMutes.includes(this.domain)}},methods:{unmuteDomain:function(){return this.$store.dispatch("unmuteDomain",this.domain)},muteDomain:function(){return this.$store.dispatch("muteDomain",this.domain)}}},De=(0,F.Z)(Se,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("ProgressButton");return(0,l.wg)(),(0,l.iD)("div",Le,[(0,l._)("div",We,(0,h.zw)(e.domain),1),e.muted?((0,l.wg)(),(0,l.j4)(s,{key:0,click:e.unmuteDomain,class:"btn button-default"},{progress:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("domain_mute_card.unmute_progress")),1)]})),default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("domain_mute_card.unmute"))+" ",1)]})),_:1},8,["click"])):((0,l.wg)(),(0,l.j4)(s,{key:1,click:e.muteDomain,class:"btn button-default"},{progress:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("domain_mute_card.mute_progress")),1)]})),default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("domain_mute_card.mute"))+" ",1)]})),_:1},8,["click"]))])}]]);var je={class:"selectable-list"},Ie={key:0,class:"selectable-list-header"},Ae={class:"selectable-list-checkbox-wrapper"},Be={class:"selectable-list-header-actions"},Ee=["onClick"],Fe={class:"selectable-list-checkbox-wrapper"};const qe={components:{List:n(41550).Z,Checkbox:H.Z},props:{items:{type:Array,default:function(){return[]}},getKey:{type:Function,default:function(e){return e.id}}},data:function(){return{selected:[]}},computed:{allKeys:function(){return this.items.map(this.getKey)},filteredSelected:function(){var e=this;return this.allKeys.filter((function(t){return-1!==e.selected.indexOf(t)}))},allSelected:function(){return this.filteredSelected.length===this.items.length},noneSelected:function(){return 0===this.filteredSelected.length},someSelected:function(){return!this.allSelected&&!this.noneSelected}},methods:{isSelected:function(e){return-1!==this.filteredSelected.indexOf(this.getKey(e))},toggle:function(e,t){var n=this.getKey(t);e!==this.isSelected(n)&&(e?this.selected.push(n):this.selected.splice(this.selected.indexOf(n),1))},toggleAll:function(e){this.selected=e?this.allKeys.slice(0):[]}}},Ze=(0,F.Z)(qe,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("Checkbox"),r=(0,l.up)("List");return(0,l.wg)(),(0,l.iD)("div",je,[e.items.length>0?((0,l.wg)(),(0,l.iD)("div",Ie,[(0,l._)("div",Ae,[(0,l.Wm)(s,{"model-value":e.allSelected,indeterminate:e.someSelected,"onUpdate:modelValue":e.toggleAll},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("selectable_list.select_all")),1)]})),_:1},8,["model-value","indeterminate","onUpdate:modelValue"])]),(0,l._)("div",Be,[(0,l.WI)(e.$slots,"header",{selected:e.filteredSelected})])])):(0,l.kq)("",!0),(0,l.Wm)(r,{items:e.items,"get-key":e.getKey,"get-class":function(t){return e.isSelected(t)?"-active":""}},{item:(0,l.w5)((function(n){var o=n.item;return[(0,l._)("div",{class:(0,h.C_)(["selectable-list-item-inner",{"selectable-list-item-selected-inner":e.isSelected(o)}]),onClick:(0,fe.iM)((function(t){return e.toggle(!e.isSelected(o),o)}),["stop"])},[(0,l._)("div",Fe,[(0,l.Wm)(s,{"model-value":e.isSelected(o),"onUpdate:modelValue":function(t){return e.toggle(t,o)},onClick:t[0]||(t[0]=(0,fe.iM)((function(){}),["stop"]))},null,8,["model-value","onUpdate:modelValue"])]),(0,l.WI)(e.$slots,"item",{item:o})],10,Ee)]})),empty:(0,l.w5)((function(){return[(0,l.WI)(e.$slots,"empty")]})),_:3},8,["items","get-key","get-class"])])}]]);var Me=n(93433),Re=n(41609),Ne=n.n(Re),He=n(13562),Ye=n(57810);function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}A.vI.add(B.IJ7);var Qe,Je,Xe,et,tt,nt,lt,ot=n(98027),at=(0,ot.Z)({fetch:function(e,t){return t.dispatch("fetchBlocks")},select:function(e,t){return ue()(t.state.users.currentUser,"blockIds",[])},destroy:function(){},childPropName:"items"})(Ze),it=(0,ot.Z)({fetch:function(e,t){return t.dispatch("fetchMutes")},select:function(e,t){return ue()(t.state.users.currentUser,"muteIds",[])},destroy:function(){},childPropName:"items"})(Ze),st=(Je=(Qe={fetch:function(e,t){return t.dispatch("fetchDomainMutes")},select:function(e,t){return ue()(t.state.users.currentUser,"domainMutes",[])},childPropName:"items"}).fetch,Xe=Qe.select,et=Qe.childPropName,tt=void 0===et?"content":et,nt=Qe.additionalPropNames,lt=void 0===nt?[]:nt,function(e){var t=Object.keys((0,He.g)(e)).filter((function(e){return e!==tt})).concat(lt);return{props:[].concat((0,Me.Z)(t),["refresh"]),data:function(){return{loading:!1,error:!1}},computed:{fetchedData:function(){return Xe(this.$props,this.$store)}},created:function(){(this.refresh||Ne()(this.fetchedData))&&this.fetchData()},methods:{fetchData:function(){var e=this;this.loading||(this.loading=!0,this.error=!1,Je(this.$props,this.$store).then((function(){e.loading=!1})).catch((function(){e.error=!0,e.loading=!1})))}},render:function(){if(this.error||this.loading)return(0,l.Wm)("div",{class:"with-subscription-loading"},[this.error?(0,l.Wm)("a",{onClick:this.fetchData,class:"alert error"},[this.$t("general.generic_error")]):(0,l.Wm)(Ye.GN,{spin:!0,icon:"circle-notch"},null)]);var t,n=Ge(Ge({},this.$props),{},(0,S.Z)({},tt,this.fetchedData)),o=this.$slots;return(0,l.Wm)("div",{class:"with-subscription"},[(0,l.Wm)(e,n,(t=o,"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!(0,l.lA)(t)?o:{default:function(){return[o]}}))])}}})(Ze);const rt={data:function(){return{activeTab:"profile"}},created:function(){this.$store.dispatch("fetchTokens"),this.$store.dispatch("getKnownDomains")},components:{TabSwitcher:f.Z,BlockList:at,MuteList:it,DomainMuteList:st,BlockCard:Ve,MuteCard:Oe,DomainMuteCard:De,ProgressButton:Pe.Z,Autosuggest:_e,Checkbox:H.Z},computed:{knownDomains:function(){return this.$store.state.instance.knownDomains},user:function(){return this.$store.state.users.currentUser}},methods:{importFollows:function(e){return this.$store.state.api.backendInteractor.importFollows({file:e}).then((function(e){if(!e)throw new Error("failed")}))},importBlocks:function(e){return this.$store.state.api.backendInteractor.importBlocks({file:e}).then((function(e){if(!e)throw new Error("failed")}))},generateExportableUsersContent:function(e){return e.map((function(e){return e&&e.is_local?e.screen_name+"@"+location.hostname:e.screen_name})).join("\n")},activateTab:function(e){this.activeTab=e},filterUnblockedUsers:function(e){var t=this;return me()(e,(function(e){return t.$store.getters.relationship(t.userId).blocking||e===t.user.id}))},filterUnMutedUsers:function(e){var t=this;return me()(e,(function(e){return t.$store.getters.relationship(t.userId).muting||e===t.user.id}))},queryUserIds:function(e){return this.$store.dispatch("searchUsers",{query:e}).then((function(e){return de()(e,"id")}))},blockUsers:function(e){return this.$store.dispatch("blockUsers",e)},unblockUsers:function(e){return this.$store.dispatch("unblockUsers",e)},muteUsers:function(e){return this.$store.dispatch("muteUsers",e)},unmuteUsers:function(e){return this.$store.dispatch("unmuteUsers",e)},filterUnMutedDomains:function(e){var t=this;return e.filter((function(e){return!t.user.domainMutes.includes(e)}))},queryKnownDomains:function(e){var t=this;return new Promise((function(n,l){n(t.knownDomains.filter((function(t){return t.toLowerCase().includes(e)})))}))},unmuteDomains:function(e){return this.$store.dispatch("unmuteDomains",e)}}},ut=(0,F.Z)(rt,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("BlockCard"),r=(0,l.up)("Autosuggest"),u=(0,l.up)("ProgressButton"),c=(0,l.up)("BlockList"),d=(0,l.up)("MuteCard"),p=(0,l.up)("MuteList"),m=(0,l.up)("DomainMuteCard"),f=(0,l.up)("DomainMuteList"),g=(0,l.up)("tab-switcher");return(0,l.wg)(),(0,l.j4)(g,{"scrollable-tabs":!0,class:"mutes-and-blocks-tab"},{default:(0,l.w5)((function(){return[(0,l._)("div",{label:e.$t("settings.blocks_tab")},[(0,l._)("div",X,[(0,l.Wm)(r,{filter:e.filterUnblockedUsers,query:e.queryUserIds,placeholder:e.$t("settings.search_user_to_block")},{default:(0,l.w5)((function(e){return[(0,l.Wm)(s,{"user-id":e.item},null,8,["user-id"])]})),_:1},8,["filter","query","placeholder"])]),(0,l.Wm)(c,{refresh:!0,"get-key":function(e){return e}},{header:(0,l.w5)((function(t){var n=t.selected;return[(0,l._)("div",ee,[n.length>0?((0,l.wg)(),(0,l.j4)(u,{key:0,class:"btn button-default bulk-action-button",click:function(){return e.blockUsers(n)}},{progress:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("user_card.block_progress")),1)]})),default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("user_card.block"))+" ",1)]})),_:2},1032,["click"])):(0,l.kq)("",!0),n.length>0?((0,l.wg)(),(0,l.j4)(u,{key:1,class:"btn button-default",click:function(){return e.unblockUsers(n)}},{progress:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("user_card.unblock_progress")),1)]})),default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("user_card.unblock"))+" ",1)]})),_:2},1032,["click"])):(0,l.kq)("",!0)])]})),item:(0,l.w5)((function(e){var t=e.item;return[(0,l.Wm)(s,{"user-id":t},null,8,["user-id"])]})),empty:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.no_blocks")),1)]})),_:1},8,["get-key"])],8,J),(0,l._)("div",{label:e.$t("settings.mutes_tab")},[(0,l.Wm)(g,null,{default:(0,l.w5)((function(){return[(0,l._)("div",{label:e.$t("settings.user_mutes")},[(0,l._)("div",le,[(0,l.Wm)(r,{filter:e.filterUnMutedUsers,query:e.queryUserIds,placeholder:e.$t("settings.search_user_to_mute")},{default:(0,l.w5)((function(e){return[(0,l.Wm)(d,{"user-id":e.item},null,8,["user-id"])]})),_:1},8,["filter","query","placeholder"])]),(0,l.Wm)(p,{refresh:!0,"get-key":function(e){return e}},{header:(0,l.w5)((function(t){var n=t.selected;return[(0,l._)("div",oe,[n.length>0?((0,l.wg)(),(0,l.j4)(u,{key:0,class:"btn button-default",click:function(){return e.muteUsers(n)}},{progress:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("user_card.mute_progress")),1)]})),default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("user_card.mute"))+" ",1)]})),_:2},1032,["click"])):(0,l.kq)("",!0),n.length>0?((0,l.wg)(),(0,l.j4)(u,{key:1,class:"btn button-default",click:function(){return e.unmuteUsers(n)}},{progress:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("user_card.unmute_progress")),1)]})),default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("user_card.unmute"))+" ",1)]})),_:2},1032,["click"])):(0,l.kq)("",!0)])]})),item:(0,l.w5)((function(e){var t=e.item;return[(0,l.Wm)(d,{"user-id":t},null,8,["user-id"])]})),empty:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.no_mutes")),1)]})),_:1},8,["get-key"])],8,ne),(0,l._)("div",{label:e.$t("settings.domain_mutes")},[(0,l._)("div",ie,[(0,l.Wm)(r,{filter:e.filterUnMutedDomains,query:e.queryKnownDomains,placeholder:e.$t("settings.type_domains_to_mute")},{default:(0,l.w5)((function(e){return[(0,l.Wm)(m,{domain:e.item},null,8,["domain"])]})),_:1},8,["filter","query","placeholder"])]),(0,l.Wm)(f,{refresh:!0,"get-key":function(e){return e}},{header:(0,l.w5)((function(t){var n=t.selected;return[(0,l._)("div",se,[n.length>0?((0,l.wg)(),(0,l.j4)(u,{key:0,class:"btn button-default",click:function(){return e.unmuteDomains(n)}},{progress:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("domain_mute_card.unmute_progress")),1)]})),default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("domain_mute_card.unmute"))+" ",1)]})),_:2},1032,["click"])):(0,l.kq)("",!0)])]})),item:(0,l.w5)((function(e){var t=e.item;return[(0,l.Wm)(m,{domain:t},null,8,["domain"])]})),empty:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.no_mutes")),1)]})),_:1},8,["get-key"])],8,ae)]})),_:1})],8,te)]})),_:1})}]]);var ct=["label"],dt={class:"setting-item"},pt={class:"setting-list"},mt={class:"setting-item"},ft={class:"setting-list"},ht={key:0},gt={class:"setting-list two-column"},bt={class:"setting-list"},wt={class:"setting-list"},_t={class:"setting-list"},vt={class:"setting-list"},kt={class:"setting-list"},yt={class:"setting-list"},$t={class:"setting-list"},Ct={class:"setting-list"},Vt={class:"setting-list"},Ut={key:0},Tt={class:"setting-list"},xt={class:"setting-list suboptions"},zt={key:0,class:"setting-item"},Ot={class:"setting-list"},Lt={class:"setting-list suboptions"},Wt={class:"setting-item"},Pt=n(59236),St=n(76875);function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}const jt={data:function(){return{activeTab:"profile",notificationSettings:this.$store.state.users.currentUser.notification_settings,newDomainToMute:""}},components:{BooleanSetting:Pt.Z},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({user:function(){return this.$store.state.users.currentUser},canReceiveReports:function(){return!!this.user&&this.user.privileges.includes("reports_manage_reports")}},(0,St.Z)()),methods:{updateNotificationSettings:function(){this.$store.state.api.backendInteractor.updateNotificationSettings({settings:this.notificationSettings})}}},It=(0,F.Z)(jt,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("BooleanSetting");return(0,l.wg)(),(0,l.iD)("div",{label:e.$t("settings.notifications")},[(0,l._)("div",dt,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.notification_setting_annoyance")),1),(0,l._)("ul",pt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"closingDrawerMarksAsSeen"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_setting_drawer_marks_as_seen")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"ignoreInactionableSeen"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_setting_ignore_inactionable_seen")),1)]})),_:1}),(0,l._)("div",null,[(0,l._)("small",null,(0,h.zw)(e.$t("settings.notification_setting_ignore_inactionable_seen_tip")),1)])]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"unseenAtTop",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_setting_unseen_at_top")),1)]})),_:1})])])]),(0,l._)("div",mt,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.notification_setting_filters")),1),(0,l._)("ul",ft,[(0,l._)("li",null,[(0,l.Wm)(s,{source:"profile",path:"blockNotificationsFromStrangers"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_setting_block_from_strangers")),1)]})),_:1})]),(0,l._)("li",null,[(0,l._)("h3",null,(0,h.zw)(e.$t("settings.notification_visibility")),1),e.expertLevel>0?((0,l.wg)(),(0,l.iD)("p",ht,(0,h.zw)(e.$t("settings.notification_setting_filters_chrome_push")),1)):(0,l.kq)("",!0),(0,l._)("ul",gt,[(0,l._)("li",null,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.notification_visibility_mentions")),1),(0,l._)("ul",bt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationVisibility.mentions"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_in_column")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationNative.mentions"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_native_notifications")),1)]})),_:1})])])]),(0,l._)("li",null,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.notification_visibility_statuses")),1),(0,l._)("ul",wt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationVisibility.statuses"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_in_column")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationNative.statuses"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_native_notifications")),1)]})),_:1})])])]),(0,l._)("li",null,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.notification_visibility_likes")),1),(0,l._)("ul",_t,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationVisibility.likes"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_in_column")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationNative.likes"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_native_notifications")),1)]})),_:1})])])]),(0,l._)("li",null,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.notification_visibility_repeats")),1),(0,l._)("ul",vt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationVisibility.repeats"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_in_column")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationNative.repeats"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_native_notifications")),1)]})),_:1})])])]),(0,l._)("li",null,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.notification_visibility_emoji_reactions")),1),(0,l._)("ul",kt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationVisibility.emojiReactions"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_in_column")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationNative.emojiReactions"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_native_notifications")),1)]})),_:1})])])]),(0,l._)("li",null,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.notification_visibility_follows")),1),(0,l._)("ul",yt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationVisibility.follows"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_in_column")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationNative.follows"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_native_notifications")),1)]})),_:1})])])]),(0,l._)("li",null,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.notification_visibility_follow_requests")),1),(0,l._)("ul",$t,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationVisibility.followRequest"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_in_column")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationNative.followRequest"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_native_notifications")),1)]})),_:1})])])]),(0,l._)("li",null,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.notification_visibility_moves")),1),(0,l._)("ul",Ct,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationVisibility.moves"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_in_column")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationNative.moves"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_native_notifications")),1)]})),_:1})])])]),(0,l._)("li",null,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.notification_visibility_polls")),1),(0,l._)("ul",Vt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationVisibility.polls"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_in_column")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationNative.polls"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_native_notifications")),1)]})),_:1})])])]),e.canReceiveReports?((0,l.wg)(),(0,l.iD)("li",Ut,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.notification_visibility_reports")),1),(0,l._)("ul",Tt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationVisibility.reports"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_in_column")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"notificationNative.reports"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_visibility_native_notifications")),1)]})),_:1})])])])):(0,l.kq)("",!0)])]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"showExtraNotifications"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_show_extra")),1)]})),_:1})]),(0,l._)("li",null,[(0,l._)("ul",xt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"showChatsInExtraNotifications",disabled:!e.mergedConfig.showExtraNotifications},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_extra_chats")),1)]})),_:1},8,["disabled"])]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"showAnnouncementsInExtraNotifications",disabled:!e.mergedConfig.showExtraNotifications},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_extra_announcements")),1)]})),_:1},8,["disabled"])]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"showFollowRequestsInExtraNotifications",disabled:!e.mergedConfig.showExtraNotifications},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_extra_follow_requests")),1)]})),_:1},8,["disabled"])]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"showExtraNotificationsTip",disabled:!e.mergedConfig.showExtraNotifications},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_extra_tip")),1)]})),_:1},8,["disabled"])])])])])]),e.expertLevel>0?((0,l.wg)(),(0,l.iD)("div",zt,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.notification_setting_privacy")),1),(0,l._)("ul",Ot,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"webPushNotifications",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.enable_web_push_notifications")),1)]})),_:1}),(0,l._)("ul",Lt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"webPushAlwaysShowNotifications",disabled:!e.mergedConfig.webPushNotifications},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.enable_web_push_always_show")),1)]})),_:1},8,["disabled"]),(0,l._)("div",{class:(0,h.C_)({faint:!e.mergedConfig.webPushNotifications})},[(0,l._)("small",null,(0,h.zw)(e.$t("settings.enable_web_push_always_show_tip")),1)],2)])])]),(0,l._)("li",null,[(0,l.Wm)(s,{source:"profile",path:"webPushHideContents",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.notification_setting_hide_notification_contents")),1)]})),_:1})])])])):(0,l.kq)("",!0),(0,l._)("div",Wt,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.notification_mutes")),1),(0,l._)("p",null,(0,h.zw)(e.$t("settings.notification_blocks")),1)])],8,ct)}]]);var At=["label"],Bt={class:"setting-item"},Et={class:"setting-list"},Ft={class:"setting-list suboptions"},qt={key:0,class:"setting-item"},Zt={class:"setting-list"},Mt=n(23279),Rt=n.n(Mt),Nt=n(92742),Ht=n.n(Nt),Yt=n(63105),Kt=n.n(Yt),Gt=n(77218),Qt={key:0,class:"UnitSetting"},Jt=["for"],Xt=["id","step","disabled","min","value"],en=["value"],tn=n(32826),nn=n(93257);function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var an=["cm","mm","in","px","pt","pc","em","ex","ch","rem","vw","vh","vmin","vmax","%"],sn=["px","rem","vw"];const rn=on(on({},nn.Z),{},{components:on(on({},nn.Z.components),{},{Select:tn.Z}),props:on(on({},nn.Z.props),{},{min:Number,units:{type:Array,default:function(){return an}},unitSet:{type:String,default:"none"},step:{type:Number,default:1},resetDefault:{type:Object,default:null}}),computed:on(on({},nn.Z.computed),{},{stateUnit:function(){return"string"==typeof this.state?this.state.replace(/[0-9,.]+/,""):""},stateValue:function(){return"string"==typeof this.state?this.state.replace(/[^0-9,.]+/,""):""}}),methods:on(on({},nn.Z.methods),{},{getUnitString:function(e){return"none"===this.unitSet?e:this.$t(["settings","units",this.unitSet,e].join("."))},updateValue:function(e){this.configSink(this.path,parseFloat(e.target.value)+this.stateUnit)},updateUnit:function(e){var t=this.stateValue,n=e.target.value;if(this.resetDefault){var l=this.resetDefault[n];null!=l&&(t=l)}this.configSink(this.path,t+n)}})}),un=(0,F.Z)(rn,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("Select"),r=(0,l.up)("ModifiedIndicator");return e.matchesExpertLevel?((0,l.wg)(),(0,l.iD)("span",Qt,[(0,l._)("label",{for:e.path,class:"size-label"},[(0,l.WI)(e.$slots,"default")],8,Jt),(0,l.Uk)(" "+(0,h.zw)(" ")+" "),(0,l._)("input",{id:e.path,class:"input number-input",type:"number",step:e.step,disabled:e.disabled,min:e.min||0,value:e.stateValue,onChange:t[0]||(t[0]=function(){return e.updateValue&&e.updateValue.apply(e,arguments)})},null,40,Xt),(0,l.Wm)(s,{id:e.path,"model-value":e.stateUnit,disabled:e.disabled,class:"unit-input unstyled",onChange:e.updateUnit},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.units,(function(t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:t},(0,h.zw)(e.getUnitString(t)),9,en)})),128))]})),_:1},8,["id","model-value","disabled","onChange"]),(0,l.Uk)(" "+(0,h.zw)(" ")+" "),(0,l.Wm)(r,{changed:e.isChanged,onclick:e.reset},null,8,["changed","onclick"])])):(0,l.kq)("",!0)}]]);var cn=n(87449);function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const mn={data:function(){var e=this;return{muteWordsStringLocal:this.$store.getters.mergedConfig.muteWords.join("\n"),replyVisibilityOptions:["all","following","self"].map((function(t){return{key:t,value:t,label:e.$t("settings.reply_visibility_".concat(t))}}))}},components:{BooleanSetting:Pt.Z,ChoiceSetting:Gt.Z,UnitSetting:un,IntegerSetting:cn.Z},computed:pn(pn({},(0,St.Z)()),{},{muteWordsString:{get:function(){return this.muteWordsStringLocal},set:function(e){this.muteWordsStringLocal=e,this.debouncedSetMuteWords(e)}},debouncedSetMuteWords:function(){var e=this;return Rt()((function(t){e.$store.dispatch("setOption",{name:"muteWords",value:Kt()(t.split("\n"),(function(e){return Ht()(e).length>0}))})}),1e3)}}),watch:{replyVisibility:function(){this.$store.dispatch("queueFlushAll")}}},fn=(0,F.Z)(mn,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("BooleanSetting"),r=(0,l.up)("ChoiceSetting"),u=(0,l.up)("IntegerSetting"),c=(0,l.up)("UnitSetting");return(0,l.wg)(),(0,l.iD)("div",{label:e.$t("settings.filtering")},[(0,l._)("div",Bt,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.posts")),1),(0,l._)("ul",Et,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"hideFilteredStatuses"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_filtered_statuses")),1)]})),_:1}),(0,l._)("ul",Ft,[(0,l._)("li",null,[(0,l.Wm)(s,{"parent-path":"hideFilteredStatuses","parent-invert":!0,path:"hideWordFilteredPosts"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_wordfiltered_statuses")),1)]})),_:1})]),(0,l._)("li",null,[e.user?((0,l.wg)(),(0,l.j4)(s,{key:0,"parent-path":"hideFilteredStatuses","parent-invert":!0,path:"hideMutedThreads"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_muted_threads")),1)]})),_:1})):(0,l.kq)("",!0)]),(0,l._)("li",null,[e.user?((0,l.wg)(),(0,l.j4)(s,{key:0,"parent-path":"hideFilteredStatuses","parent-invert":!0,path:"hideMutedPosts"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_muted_posts")),1)]})),_:1})):(0,l.kq)("",!0)])])]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"muteBotStatuses"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.mute_bot_posts")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"muteSensitiveStatuses"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.mute_sensitive_posts")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"hidePostStats"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_post_stats")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"hideBotIndication"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_actor_type_indication")),1)]})),_:1})]),e.user?((0,l.wg)(),(0,l.j4)(r,{key:0,id:"replyVisibility",path:"replyVisibility",options:e.replyVisibilityOptions},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.replies_in_timeline")),1)]})),_:1},8,["options"])):(0,l.kq)("",!0),(0,l._)("li",null,[(0,l._)("h3",null,(0,h.zw)(e.$t("settings.wordfilter")),1),(0,l.wy)((0,l._)("textarea",{id:"muteWords","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.muteWordsString=t}),class:"input resize-height"},null,512),[[fe.nr,e.muteWordsString]]),(0,l._)("div",null,(0,h.zw)(e.$t("settings.filtering_explanation")),1)]),(0,l._)("h3",null,(0,h.zw)(e.$t("settings.attachments")),1),(0,l._)("li",null,[(0,l.Wm)(u,{path:"maxThumbnails",expert:"1",min:0},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.max_thumbnails")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"hideAttachments"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_attachments_in_tl")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"hideAttachmentsInConv"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_attachments_in_convo")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{path:"hideScrobbles"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_scrobbles")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(c,{key:"hideScrobblesAfter",path:"hideScrobblesAfter",units:["m","h","d"],unitSet:"time",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_scrobbles_after")),1)]})),_:1})])])]),e.expertLevel>0?((0,l.wg)(),(0,l.iD)("div",qt,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.user_profiles")),1),(0,l._)("ul",Zt,[(0,l._)("li",null,[(0,l.Wm)(s,{path:"hideUserStats"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_user_stats")),1)]})),_:1})])])])):(0,l.kq)("",!0)],8,At)}]]);var hn=["label"],gn={class:"setting-item"},bn={key:0},wn={class:"setting-item"},_n={key:0},vn={key:1},kn={key:2},yn={class:"setting-item"},$n={class:"oauth-tokens"},Cn=(0,l._)("th",null,null,-1),Vn={class:"actions"},Un=["onClick"],Tn={class:"setting-item"},xn=(0,l._)("th",null,null,-1),zn={class:"actions"},On=["onClick"],Ln={key:0,class:"alert error"},Wn=(0,l._)("code",{place:"example"}," foo@example.org ",-1),Pn={key:1},Sn={key:2},Dn={class:"setting-item"},jn=(0,l._)("code",null," foo@example.org ",-1),In={key:0},An={key:1},Bn={class:"setting-item"},En={key:0},Fn={key:1},qn={key:2},Zn={key:3},Mn={key:0,class:"setting-item mfa-settings"},Rn={class:"mfa-heading"},Nn={key:0,class:"setting-item"},Hn=(0,l._)("br",null,null,-1),Yn={key:0},Kn={key:2},Gn={class:"warning"},Qn={key:1},Jn={key:0},Xn={key:1},el={class:"setup-otp"},tl={class:"qr-code"},nl={class:"verify"},ll={class:"confirm-otp-actions"},ol={key:0,class:"alert error"},al=n(15861),il=n(64687),sl=n.n(il),rl={class:"mfa-backup-codes"},ul={key:0},cl={key:1},dl={class:"alert warning"},pl={class:"backup-codes"};const ml={props:{backupCodes:{type:Object,default:function(){return{inProgress:!1,codes:[]}}}},data:function(){return{}},computed:{inProgress:function(){return this.backupCodes.inProgress},ready:function(){return this.backupCodes.codes.length>0},displayTitle:function(){return this.inProgress||this.ready}}},fl=(0,F.Z)(ml,[["render",function(e,t,n,o,a,i){return(0,l.wg)(),(0,l.iD)("div",rl,[e.displayTitle?((0,l.wg)(),(0,l.iD)("h4",ul,(0,h.zw)(e.$t("settings.mfa.recovery_codes")),1)):(0,l.kq)("",!0),e.inProgress?((0,l.wg)(),(0,l.iD)("i",cl,(0,h.zw)(e.$t("settings.mfa.waiting_a_recovery_codes")),1)):(0,l.kq)("",!0),e.ready?((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l._)("p",dl,(0,h.zw)(e.$t("settings.mfa.recovery_codes_warning")),1),(0,l._)("ul",pl,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.backupCodes.codes,(function(e){return(0,l.wg)(),(0,l.iD)("li",{key:e},(0,h.zw)(e),1)})),128))])],64)):(0,l.kq)("",!0)])}]]);var hl={class:"method-item"},gl=["disabled"],bl={key:1,class:"alert error"},wl=["disabled"],_l=["disabled"];const vl={props:["disabled"],data:function(){return{}},methods:{confirm:function(){this.$emit("confirm")},cancel:function(){this.$emit("cancel")}}},kl=(0,F.Z)(vl,[["render",function(e,t,n,o,a,i){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.WI)(e.$slots,"default"),(0,l._)("button",{class:"btn button-default",disabled:e.disabled,onClick:t[0]||(t[0]=function(){return e.confirm&&e.confirm.apply(e,arguments)})},(0,h.zw)(e.$t("general.confirm")),9,wl),(0,l._)("button",{class:"btn button-default",disabled:e.disabled,onClick:t[1]||(t[1]=function(){return e.cancel&&e.cancel.apply(e,arguments)})},(0,h.zw)(e.$t("general.cancel")),9,_l)])}]]);function yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}const $l={props:["settings"],data:function(){return{error:!1,currentPassword:"",deactivate:!1,inProgress:!1}},components:{confirm:kl},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isActivated:function(){return this.settings.totp}},(0,Y.rn)({backendInteractor:function(e){return e.api.backendInteractor}})),methods:{doActivate:function(){this.$emit("activate")},cancelDeactivate:function(){this.deactivate=!1},doDeactivate:function(){this.error=null,this.deactivate=!0},confirmDeactivate:function(){var e=this;this.error=null,this.inProgress=!0,this.backendInteractor.mfaDisableOTP({password:this.currentPassword}).then((function(t){e.inProgress=!1,t.error?e.error=t.error:(e.deactivate=!1,e.$emit("deactivate"))}))}}};function Cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}const Vl={data:function(){return{settings:{available:!1,enabled:!1,totp:!1},setupState:{state:"",setupOTPState:""},backupCodes:{getNewCodes:!1,inProgress:!1,codes:[]},otpSettings:{provisioning_uri:"",key:""},currentPassword:null,otpConfirmToken:null,error:null,readyInit:!1}},components:{"recovery-codes":fl,"totp-item":(0,F.Z)($l,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("confirm");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",hl,[(0,l._)("strong",null,(0,h.zw)(e.$t("settings.mfa.otp")),1),e.isActivated?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn button-default",onClick:t[0]||(t[0]=function(){return e.doActivate&&e.doActivate.apply(e,arguments)})},(0,h.zw)(e.$t("general.enable")),1)),e.isActivated?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn button-default",disabled:e.deactivate,onClick:t[1]||(t[1]=function(){return e.doDeactivate&&e.doDeactivate.apply(e,arguments)})},(0,h.zw)(e.$t("general.disable")),9,gl)):(0,l.kq)("",!0)]),e.deactivate?((0,l.wg)(),(0,l.j4)(s,{key:0,disabled:e.inProgress,onConfirm:e.confirmDeactivate,onCancel:e.cancelDeactivate},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.enter_current_password_to_confirm"))+": ",1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.currentPassword=t}),type:"password",class:"input"},null,512),[[fe.nr,e.currentPassword]])]})),_:1},8,["disabled","onConfirm","onCancel"])):(0,l.kq)("",!0),e.error?((0,l.wg)(),(0,l.iD)("div",bl,(0,h.zw)(e.error),1)):(0,l.kq)("",!0)])}]]),qrcode:n(99990).Z,confirm:kl},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({canSetupOTP:function(){return(this.setupInProgress&&this.backupCodesPrepared||this.settings.enabled)&&!this.settings.totp&&!this.setupOTPInProgress},setupInProgress:function(){return""!==this.setupState.state&&"complete"!==this.setupState.state},setupOTPInProgress:function(){return"setupOTP"===this.setupState.state&&!this.completedOTP},prepareOTP:function(){return"prepare"===this.setupState.setupOTPState},confirmOTP:function(){return"confirm"===this.setupState.setupOTPState},completedOTP:function(){return"completed"===this.setupState.setupOTPState},backupCodesPrepared:function(){return!this.backupCodes.inProgress&&this.backupCodes.codes.length>0},confirmNewBackupCodes:function(){return this.backupCodes.getNewCodes}},(0,Y.rn)({backendInteractor:function(e){return e.api.backendInteractor}})),methods:{activateOTP:function(){this.settings.enabled||(this.setupState.state="getBackupcodes",this.fetchBackupCodes())},fetchBackupCodes:function(){var e=this;return this.backupCodes.inProgress=!0,this.backupCodes.codes=[],this.backendInteractor.generateMfaBackupCodes().then((function(t){e.backupCodes.codes=t.codes,e.backupCodes.inProgress=!1}))},getBackupCodes:function(){this.backupCodes.getNewCodes=!0},confirmBackupCodes:function(){var e=this;this.fetchBackupCodes().then((function(t){e.backupCodes.getNewCodes=!1}))},cancelBackupCodes:function(){this.backupCodes.getNewCodes=!1},setupOTP:function(){var e=this;this.setupState.state="setupOTP",this.setupState.setupOTPState="prepare",this.backendInteractor.mfaSetupOTP().then((function(t){e.otpSettings=t,e.setupState.setupOTPState="confirm"}))},doConfirmOTP:function(){var e=this;this.error=null,this.backendInteractor.mfaConfirmOTP({token:this.otpConfirmToken,password:this.currentPassword}).then((function(t){t.error?e.error=t.error:e.completeSetup()}))},completeSetup:function(){this.setupState.setupOTPState="complete",this.setupState.state="complete",this.currentPassword=null,this.error=null,this.fetchSettings()},cancelSetup:function(){this.setupState.setupOTPState="",this.setupState.state="",this.currentPassword=null,this.error=null},fetchSettings:function(){var e=this;return(0,al.Z)(sl().mark((function t(){var n;return sl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.backendInteractor.settingsMFA();case 2:if(!(n=t.sent).error){t.next=5;break}return t.abrupt("return");case 5:return e.settings=n.settings,e.settings.available=!0,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;this.fetchSettings().then((function(){e.readyInit=!0}))}},Ul=(0,F.Z)(Vl,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("totp-item"),r=(0,l.up)("recovery-codes"),u=(0,l.up)("confirm"),c=(0,l.up)("qrcode");return e.readyInit&&e.settings.available?((0,l.wg)(),(0,l.iD)("div",Mn,[(0,l._)("div",Rn,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.mfa.title")),1)]),(0,l._)("div",null,[e.setupInProgress?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Nn,[(0,l._)("h3",null,(0,h.zw)(e.$t("settings.mfa.authentication_methods")),1),(0,l.Wm)(s,{settings:e.settings,onDeactivate:e.fetchSettings,onActivate:e.activateOTP},null,8,["settings","onDeactivate","onActivate"]),Hn,e.settings.enabled?((0,l.wg)(),(0,l.iD)("div",Yn,[e.confirmNewBackupCodes?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(r,{key:0,"backup-codes":e.backupCodes},null,8,["backup-codes"])),e.confirmNewBackupCodes?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn button-default",onClick:t[0]||(t[0]=function(){return e.getBackupCodes&&e.getBackupCodes.apply(e,arguments)})},(0,h.zw)(e.$t("settings.mfa.generate_new_recovery_codes")),1)),e.confirmNewBackupCodes?((0,l.wg)(),(0,l.iD)("div",Kn,[(0,l.Wm)(u,{disabled:e.backupCodes.inProgress,onConfirm:e.confirmBackupCodes,onCancel:e.cancelBackupCodes},{default:(0,l.w5)((function(){return[(0,l._)("p",Gn,(0,h.zw)(e.$t("settings.mfa.warning_of_generate_new_codes")),1)]})),_:1},8,["disabled","onConfirm","onCancel"])])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])),e.setupInProgress?((0,l.wg)(),(0,l.iD)("div",Qn,[(0,l._)("h3",null,(0,h.zw)(e.$t("settings.mfa.setup_otp")),1),e.setupOTPInProgress?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(r,{key:0,"backup-codes":e.backupCodes},null,8,["backup-codes"])),e.canSetupOTP?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn button-default",onClick:t[1]||(t[1]=function(){return e.cancelSetup&&e.cancelSetup.apply(e,arguments)})},(0,h.zw)(e.$t("general.cancel")),1)):(0,l.kq)("",!0),e.canSetupOTP?((0,l.wg)(),(0,l.iD)("button",{key:2,class:"btn button-default",onClick:t[2]||(t[2]=function(){return e.setupOTP&&e.setupOTP.apply(e,arguments)})},(0,h.zw)(e.$t("settings.mfa.setup_otp")),1)):(0,l.kq)("",!0),e.setupOTPInProgress?((0,l.wg)(),(0,l.iD)(l.HY,{key:3},[e.prepareOTP?((0,l.wg)(),(0,l.iD)("i",Jn,(0,h.zw)(e.$t("settings.mfa.wait_pre_setup_otp")),1)):(0,l.kq)("",!0),e.confirmOTP?((0,l.wg)(),(0,l.iD)("div",Xn,[(0,l._)("div",el,[(0,l._)("div",tl,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.mfa.scan.title")),1),(0,l._)("p",null,(0,h.zw)(e.$t("settings.mfa.scan.desc")),1),(0,l.Wm)(c,{value:e.otpSettings.provisioning_uri,options:{width:200}},null,8,["value"]),(0,l._)("p",null,(0,h.zw)(e.$t("settings.mfa.scan.secret_code"))+": "+(0,h.zw)(e.otpSettings.key),1)]),(0,l._)("div",nl,[(0,l._)("h4",null,(0,h.zw)(e.$t("general.verify")),1),(0,l._)("p",null,(0,h.zw)(e.$t("settings.mfa.verify.desc")),1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.otpConfirmToken=t}),type:"text",class:"input"},null,512),[[fe.nr,e.otpConfirmToken]]),(0,l._)("p",null,(0,h.zw)(e.$t("settings.enter_current_password_to_confirm"))+":",1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.currentPassword=t}),type:"password",class:"input"},null,512),[[fe.nr,e.currentPassword]]),(0,l._)("div",ll,[(0,l._)("button",{class:"btn button-default",onClick:t[5]||(t[5]=function(){return e.doConfirmOTP&&e.doConfirmOTP.apply(e,arguments)})},(0,h.zw)(e.$t("settings.mfa.confirm_and_enable")),1),(0,l._)("button",{class:"btn button-default",onClick:t[6]||(t[6]=function(){return e.cancelSetup&&e.cancelSetup.apply(e,arguments)})},(0,h.zw)(e.$t("general.cancel")),1)]),e.error?((0,l.wg)(),(0,l.iD)("div",ol,(0,h.zw)(e.error),1)):(0,l.kq)("",!0)])])])):(0,l.kq)("",!0)],64)):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])])):(0,l.kq)("",!0)}]]);var Tl=n(39776);const xl={data:function(){return{newEmail:"",changeEmailError:!1,changeEmailPassword:"",changedEmail:!1,deletingAccount:!1,deleteAccountConfirmPasswordInput:"",deleteAccountError:!1,changePasswordInputs:["","",""],changedPassword:!1,changePasswordError:!1,moveAccountTarget:"",moveAccountPassword:"",movedAccount:!1,moveAccountError:!1,aliases:[],listAliasesError:!1,addAliasTarget:"",addedAlias:!1,addAliasError:!1}},created:function(){this.$store.dispatch("fetchTokens"),this.fetchAliases()},components:{ProgressButton:Pe.Z,Mfa:Ul,Checkbox:H.Z},computed:{user:function(){return this.$store.state.users.currentUser},pleromaBackend:function(){return this.$store.state.instance.pleromaBackend},oauthTokens:function(){var e=this;return this.$store.state.oauthTokens.tokens.map((function(t){return{id:t.id,appName:t.app_name,validUntil:new Date(t.valid_until).toLocaleDateString(Tl.Z.internalToBrowserLocale(e.$i18n.locale))}}))}},methods:{confirmDelete:function(){this.deletingAccount=!0},deleteAccount:function(){var e=this;this.$store.state.api.backendInteractor.deleteAccount({password:this.deleteAccountConfirmPasswordInput}).then((function(t){"success"===t.status?(e.$store.dispatch("logout"),e.$router.push({name:"root"})):e.deleteAccountError=t.error}))},changePassword:function(){var e=this,t={password:this.changePasswordInputs[0],newPassword:this.changePasswordInputs[1],newPasswordConfirmation:this.changePasswordInputs[2]};this.$store.state.api.backendInteractor.changePassword(t).then((function(t){"success"===t.status?(e.changedPassword=!0,e.changePasswordError=!1,e.logout()):(e.changedPassword=!1,e.changePasswordError=t.error)}))},changeEmail:function(){var e=this,t={email:this.newEmail,password:this.changeEmailPassword};this.$store.state.api.backendInteractor.changeEmail(t).then((function(t){"success"===t.status?(e.changedEmail=!0,e.changeEmailError=!1):(e.changedEmail=!1,e.changeEmailError=t.error)}))},moveAccount:function(){var e=this,t={targetAccount:this.moveAccountTarget,password:this.moveAccountPassword};this.$store.state.api.backendInteractor.moveAccount(t).then((function(t){"success"===t.status?(e.movedAccount=!0,e.moveAccountError=!1):(e.movedAccount=!1,e.moveAccountError=t.error)}))},removeAlias:function(e){var t=this;this.$store.state.api.backendInteractor.deleteAlias({alias:e}).then((function(){return t.fetchAliases()}))},addAlias:function(){var e=this;this.$store.state.api.backendInteractor.addAlias({alias:this.addAliasTarget}).then((function(t){e.addedAlias=!0,e.addAliasError=!1,e.addAliasTarget=""})).catch((function(t){e.addedAlias=!1,e.addAliasError=t})).then((function(){return e.fetchAliases()}))},fetchAliases:function(){var e=this;this.$store.state.api.backendInteractor.listAliases().then((function(t){e.aliases=t.aliases,e.listAliasesError=!1})).catch((function(t){e.listAliasesError=t.error}))},logout:function(){this.$store.dispatch("logout"),this.$router.replace("/")},revokeToken:function(e){window.confirm("".concat(this.$i18n.t("settings.revoke_token"),"?"))&&this.$store.dispatch("revokeToken",e)}}},zl=(0,F.Z)(xl,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("mfa"),r=(0,l.up)("FAIcon"),u=(0,l.up)("i18n-t");return(0,l.wg)(),(0,l.iD)("div",{label:e.$t("settings.security_tab")},[(0,l._)("div",gn,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.change_email")),1),(0,l._)("div",null,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.new_email")),1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.newEmail=t}),type:"email",autocomplete:"email",class:"input"},null,512),[[fe.nr,e.newEmail]])]),(0,l._)("div",null,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.current_password")),1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.changeEmailPassword=t}),type:"password",autocomplete:"current-password",class:"input"},null,512),[[fe.nr,e.changeEmailPassword]])]),(0,l._)("button",{class:"btn button-default",onClick:t[2]||(t[2]=function(){return e.changeEmail&&e.changeEmail.apply(e,arguments)})},(0,h.zw)(e.$t("settings.save")),1),e.changedEmail?((0,l.wg)(),(0,l.iD)("p",bn,(0,h.zw)(e.$t("settings.changed_email")),1)):(0,l.kq)("",!0),!1!==e.changeEmailError?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l._)("p",null,(0,h.zw)(e.$t("settings.change_email_error")),1),(0,l._)("p",null,(0,h.zw)(e.changeEmailError),1)],64)):(0,l.kq)("",!0)]),(0,l._)("div",wn,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.change_password")),1),(0,l._)("div",null,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.current_password")),1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.changePasswordInputs[0]=t}),type:"password",class:"input"},null,512),[[fe.nr,e.changePasswordInputs[0]]])]),(0,l._)("div",null,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.new_password")),1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.changePasswordInputs[1]=t}),type:"password",class:"input"},null,512),[[fe.nr,e.changePasswordInputs[1]]])]),(0,l._)("div",null,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.confirm_new_password")),1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.changePasswordInputs[2]=t}),type:"password",class:"input"},null,512),[[fe.nr,e.changePasswordInputs[2]]])]),(0,l._)("button",{class:"btn button-default",onClick:t[6]||(t[6]=function(){return e.changePassword&&e.changePassword.apply(e,arguments)})},(0,h.zw)(e.$t("settings.save")),1),e.changedPassword?((0,l.wg)(),(0,l.iD)("p",_n,(0,h.zw)(e.$t("settings.changed_password")),1)):!1!==e.changePasswordError?((0,l.wg)(),(0,l.iD)("p",vn,(0,h.zw)(e.$t("settings.change_password_error")),1)):(0,l.kq)("",!0),e.changePasswordError?((0,l.wg)(),(0,l.iD)("p",kn,(0,h.zw)(e.changePasswordError),1)):(0,l.kq)("",!0)]),(0,l._)("div",yn,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.oauth_tokens")),1),(0,l._)("table",$n,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,(0,h.zw)(e.$t("settings.app_name")),1),(0,l._)("th",null,(0,h.zw)(e.$t("settings.valid_until")),1),Cn])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.oauthTokens,(function(t){return(0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,(0,h.zw)(t.appName),1),(0,l._)("td",null,(0,h.zw)(t.validUntil),1),(0,l._)("td",Vn,[(0,l._)("button",{class:"btn button-default",onClick:function(n){return e.revokeToken(t.id)}},(0,h.zw)(e.$t("settings.revoke_token")),9,Un)])])})),128))])])]),(0,l.Wm)(s),(0,l._)("div",Tn,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.account_alias")),1),(0,l._)("table",null,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,(0,h.zw)(e.$t("settings.account_alias_table_head")),1),xn])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.aliases,(function(t){return(0,l.wg)(),(0,l.iD)("tr",{key:t},[(0,l._)("td",null,(0,h.zw)(t),1),(0,l._)("td",zn,[(0,l._)("button",{class:"btn button-default",onClick:function(n){return e.removeAlias(t)}},(0,h.zw)(e.$t("settings.remove_alias")),9,On)])])})),128))])]),e.listAliasesError?((0,l.wg)(),(0,l.iD)("div",Ln,[(0,l.Uk)((0,h.zw)(e.$t("settings.list_aliases_error",{error:e.error}))+" ",1),(0,l.Wm)(r,{class:"fa-scale-110 fa-old-padding",icon:"times",title:e.$t("settings.hide_list_aliases_error_action"),onClick:t[7]||(t[7]=function(t){return e.listAliasesError=!1})},null,8,["title"])])):(0,l.kq)("",!0),(0,l._)("div",null,[(0,l.Wm)(u,{keypath:"settings.new_alias_target",tag:"p"},{default:(0,l.w5)((function(){return[Wn]})),_:1}),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.addAliasTarget=t}),class:"input"},null,512),[[fe.nr,e.addAliasTarget]])]),(0,l._)("button",{class:"btn button-default",onClick:t[9]||(t[9]=function(){return e.addAlias&&e.addAlias.apply(e,arguments)})},(0,h.zw)(e.$t("settings.save")),1),e.addedAlias?((0,l.wg)(),(0,l.iD)("p",Pn,(0,h.zw)(e.$t("settings.added_alias")),1)):(0,l.kq)("",!0),!1!==e.addAliasError?((0,l.wg)(),(0,l.iD)("p",Sn,(0,h.zw)(e.$t("settings.add_alias_error",{error:e.addAliasError})),1)):(0,l.kq)("",!0)]),(0,l._)("div",Dn,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.move_account")),1),(0,l._)("p",null,(0,h.zw)(e.$t("settings.move_account_notes")),1),(0,l._)("div",null,[(0,l.Wm)(u,{keypath:"settings.move_account_target",tag:"p"},{example:(0,l.w5)((function(){return[jn]})),_:1}),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.moveAccountTarget=t}),class:"input"},null,512),[[fe.nr,e.moveAccountTarget]])]),(0,l._)("div",null,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.current_password")),1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.moveAccountPassword=t}),type:"password",autocomplete:"current-password",class:"input"},null,512),[[fe.nr,e.moveAccountPassword]])]),(0,l._)("button",{class:"btn button-default",onClick:t[12]||(t[12]=function(){return e.moveAccount&&e.moveAccount.apply(e,arguments)})},(0,h.zw)(e.$t("settings.save")),1),e.movedAccount?((0,l.wg)(),(0,l.iD)("p",In,(0,h.zw)(e.$t("settings.moved_account")),1)):(0,l.kq)("",!0),!1!==e.moveAccountError?((0,l.wg)(),(0,l.iD)("p",An,(0,h.zw)(e.$t("settings.move_account_error",{error:e.moveAccountError})),1)):(0,l.kq)("",!0)]),(0,l._)("div",Bn,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.delete_account")),1),e.deletingAccount?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("p",En,(0,h.zw)(e.$t("settings.delete_account_description")),1)),e.deletingAccount?((0,l.wg)(),(0,l.iD)("div",Fn,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.delete_account_instructions")),1),(0,l._)("p",null,(0,h.zw)(e.$t("login.password")),1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.deleteAccountConfirmPasswordInput=t}),type:"password",class:"input"},null,512),[[fe.nr,e.deleteAccountConfirmPasswordInput]]),(0,l._)("button",{class:"btn button-default",onClick:t[14]||(t[14]=function(){return e.deleteAccount&&e.deleteAccount.apply(e,arguments)})},(0,h.zw)(e.$t("settings.delete_account")),1)])):(0,l.kq)("",!0),!1!==e.deleteAccountError?((0,l.wg)(),(0,l.iD)("p",qn,(0,h.zw)(e.$t("settings.delete_account_error")),1)):(0,l.kq)("",!0),e.deleteAccountError?((0,l.wg)(),(0,l.iD)("p",Zn,(0,h.zw)(e.deleteAccountError),1)):(0,l.kq)("",!0),e.deletingAccount?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:4,class:"btn button-default",onClick:t[15]||(t[15]=function(){return e.confirmDelete&&e.confirmDelete.apply(e,arguments)})},(0,h.zw)(e.$t("settings.delete_account")),1))])],8,hn)}]]);var Ol={class:"profile-tab"},Ll={class:"setting-item"},Wl={key:0},Pl={key:1},Sl=["onUpdate:modelValue","placeholder"],Dl=["onUpdate:modelValue","placeholder"],jl=["onClick"],Il=["value"],Al={key:2},Bl=["disabled"],El={class:"setting-item"},Fl={class:"visibility-notice"},ql={class:"current-avatar-container"},Zl=["src"],Ml=["title"],Rl={class:"setting-item"},Nl={class:"banner-background-preview"},Hl=["src"],Yl=["title"],Kl=["src"],Gl={class:"setting-item"},Ql={class:"banner-background-preview"},Jl=["src"],Xl=["title"],eo=["src"],to={class:"setting-item"},no={class:"setting-list"},lo={class:"setting-list suboptions"},oo={class:"setting-list suboptions"},ao=n(27955),io=n.n(ao),so=n(82492),ro=n.n(so),uo={class:"image-cropper"},co={key:0},po={class:"image-cropper-image-container"},mo=["src"],fo={class:"image-cropper-buttons-wrapper"},ho=["disabled","textContent"],go=["disabled","textContent"],bo=["disabled","textContent"],wo=["accept"],_o=n(71002),vo=n(33129),ko=n.n(vo);A.vI.add(B.IJ7);const yo={props:{trigger:{type:[String,window.Element],required:!0},submitHandler:{type:Function,required:!0},cropperOptions:{type:Object,default:function(){return{aspectRatio:1,autoCropArea:1,viewMode:1,movable:!1,zoomable:!1,guides:!1}}},mimes:{type:String,default:"image/png, image/gif, image/jpeg, image/bmp, image/x-icon"},saveButtonLabel:{type:String},saveWithoutCroppingButtonlabel:{type:String},cancelButtonLabel:{type:String}},data:function(){return{cropper:void 0,dataUrl:void 0,filename:void 0,submitting:!1}},computed:{saveText:function(){return this.saveButtonLabel||this.$t("image_cropper.save")},saveWithoutCroppingText:function(){return this.saveWithoutCroppingButtonlabel||this.$t("image_cropper.save_without_cropping")},cancelText:function(){return this.cancelButtonLabel||this.$t("image_cropper.cancel")}},methods:{destroy:function(){this.cropper&&this.cropper.destroy(),this.$refs.input.value="",this.dataUrl=void 0,this.$emit("close")},submit:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.submitting=!0,this.submitHandler(t&&this.cropper,this.file).then((function(){return e.destroy()})).finally((function(){e.submitting=!1}))},pickImage:function(){this.$refs.input.click()},createCropper:function(){this.cropper=new(ko())(this.$refs.img,this.cropperOptions)},getTriggerDOM:function(){return"object"===(0,_o.Z)(this.trigger)?this.trigger:document.querySelector(this.trigger)},readFile:function(){var e=this,t=this.$refs.input;if(null!=t.files&&null!=t.files[0]){this.file=t.files[0];var n=new window.FileReader;n.onload=function(t){e.dataUrl=t.target.result,e.$emit("open")},n.readAsDataURL(this.file),this.$emit("changed",this.file,n)}}},mounted:function(){var e=this.getTriggerDOM();e?e.addEventListener("click",this.pickImage):this.$emit("error","No image make trigger found.","user"),this.$refs.input.addEventListener("change",this.readFile)},beforeUnmount:function(){var e=this.getTriggerDOM();e&&e.removeEventListener("click",this.pickImage),this.$refs.input.removeEventListener("change",this.readFile)}},$o=(0,F.Z)(yo,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("FAIcon");return(0,l.wg)(),(0,l.iD)("div",uo,[e.dataUrl?((0,l.wg)(),(0,l.iD)("div",co,[(0,l._)("div",po,[(0,l._)("img",{ref:"img",src:e.dataUrl,alt:"",onLoad:t[0]||(t[0]=(0,fe.iM)((function(){return e.createCropper&&e.createCropper.apply(e,arguments)}),["stop"]))},null,40,mo)]),(0,l._)("div",fo,[(0,l._)("button",{class:"button-default btn",type:"button",disabled:e.submitting,onClick:t[1]||(t[1]=function(t){return e.submit()}),textContent:(0,h.zw)(e.saveText)},null,8,ho),(0,l._)("button",{class:"button-default btn",type:"button",disabled:e.submitting,onClick:t[2]||(t[2]=function(){return e.destroy&&e.destroy.apply(e,arguments)}),textContent:(0,h.zw)(e.cancelText)},null,8,go),(0,l._)("button",{class:"button-default btn",type:"button",disabled:e.submitting,onClick:t[3]||(t[3]=function(t){return e.submit(!1)}),textContent:(0,h.zw)(e.saveWithoutCroppingText)},null,8,bo),e.submitting?((0,l.wg)(),(0,l.j4)(s,{key:0,spin:"",icon:"circle-notch"})):(0,l.kq)("",!0)])])):(0,l.kq)("",!0),(0,l._)("input",{ref:"input",type:"file",class:"input image-cropper-img-input",accept:e.mimes},null,8,wo)])}]]);var Co=n(9616),Vo=n(65079),Uo=n(85295),To=n(19003),xo=n(95479),zo=n(37230);function Oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oo(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}A.vI.add(B.NBC,B.r8p,B.IJ7);var Wo={data:function(){return{newName:this.$store.state.users.currentUser.name_unescaped,newBio:io()(this.$store.state.users.currentUser.description),newLocked:this.$store.state.users.currentUser.locked,newBirthday:this.$store.state.users.currentUser.birthday,showBirthday:this.$store.state.users.currentUser.show_birthday,newFields:this.$store.state.users.currentUser.fields.map((function(e){return{name:e.name,value:e.value}})),showRole:this.$store.state.users.currentUser.show_role,role:this.$store.state.users.currentUser.role,bot:this.$store.state.users.currentUser.bot,actorType:this.$store.state.users.currentUser.actor_type,pickAvatarBtnVisible:!0,bannerUploading:!1,backgroundUploading:!1,banner:null,bannerPreview:null,background:null,backgroundPreview:null,emailLanguage:this.$store.state.users.currentUser.language||[""]}},components:{ScopeSelector:Co.Z,ImageCropper:$o,EmojiInput:Uo.Z,Autosuggest:_e,ProgressButton:Pe.Z,Checkbox:H.Z,BooleanSetting:Pt.Z,InterfaceLanguageSwitcher:xo.Z,Select:tn.Z},computed:Lo(Lo({user:function(){return this.$store.state.users.currentUser}},(0,St.Z)()),{},{emojiUserSuggestor:function(){return(0,To.ZP)({emoji:[].concat((0,Me.Z)(this.$store.getters.standardEmojiList),(0,Me.Z)(this.$store.state.instance.customEmoji)),store:this.$store})},emojiSuggestor:function(){return(0,To.ZP)({emoji:[].concat((0,Me.Z)(this.$store.getters.standardEmojiList),(0,Me.Z)(this.$store.state.instance.customEmoji))})},userSuggestor:function(){return(0,To.ZP)({store:this.$store})},fieldsLimits:function(){return this.$store.state.instance.fieldsLimits},maxFields:function(){return this.fieldsLimits?this.fieldsLimits.maxFields:0},defaultAvatar:function(){return this.$store.state.instance.server+this.$store.state.instance.defaultAvatar},defaultBanner:function(){return this.$store.state.instance.server+this.$store.state.instance.defaultBanner},isDefaultAvatar:function(){var e=this.$store.state.instance.defaultAvatar;return!this.$store.state.users.currentUser.profile_image_url||this.$store.state.users.currentUser.profile_image_url.includes(e)},isDefaultBanner:function(){var e=this.$store.state.instance.defaultBanner;return!this.$store.state.users.currentUser.cover_photo||this.$store.state.users.currentUser.cover_photo.includes(e)},isDefaultBackground:function(){return!this.$store.state.users.currentUser.background_image},avatarImgSrc:function(){return this.$store.state.users.currentUser.profile_image_url_original||this.defaultAvatar},bannerImgSrc:function(){return this.$store.state.users.currentUser.cover_photo||this.defaultBanner},groupActorAvailable:function(){return this.$store.state.instance.groupActorAvailable},availableActorTypes:function(){return this.groupActorAvailable?["Person","Service","Group"]:["Person","Service"]}}),methods:{updateProfile:function(){var e=this,t={note:this.newBio,locked:this.newLocked,display_name:this.newName,fields_attributes:this.newFields.filter((function(e){return null!=e})),actor_type:this.actorType,show_role:this.showRole,birthday:this.newBirthday||"",show_birthday:this.showBirthday};this.emailLanguage&&(t.language=Tl.Z.internalToBackendLocaleMulti(this.emailLanguage)),this.$store.state.api.backendInteractor.updateProfile({params:t}).then((function(t){e.newFields.splice(t.fields.length),ro()(e.newFields,t.fields),e.$store.commit("addNewUsers",[t]),e.$store.commit("setCurrentUser",t)}))},changeVis:function(e){this.newDefaultScope=e},addField:function(){return this.newFields.length<this.maxFields&&(this.newFields.push({name:"",value:""}),!0)},deleteField:function(e,t){this.newFields.splice(e,1)},uploadFile:function(e,t){var n=this,l=t.target.files[0];if(l)if(l.size>this.$store.state.instance[e+"limit"]){var o=Vo.Z.fileSizeFormat(l.size),a=Vo.Z.fileSizeFormat(this.$store.state.instance[e+"limit"]);this.$store.dispatch("pushGlobalNotice",{messageKey:"upload.error.message",messageArgs:[this.$t("upload.error.file_too_big",{filesize:o.num,filesizeunit:o.unit,allowedsize:a.num,allowedsizeunit:a.unit})],level:"error"})}else{var i=new FileReader;i.onload=function(t){var o=t.target.result;n[e+"Preview"]=o,n[e]=l},i.readAsDataURL(l)}},resetAvatar:function(){window.confirm(this.$t("settings.reset_avatar_confirm"))&&this.submitAvatar(void 0,"")},resetBanner:function(){window.confirm(this.$t("settings.reset_banner_confirm"))&&this.submitBanner("")},resetBackground:function(){window.confirm(this.$t("settings.reset_background_confirm"))&&this.submitBackground("")},submitAvatar:function(e,t){var n=this;return new Promise((function(l,o){function a(e,t){n.$store.state.api.backendInteractor.updateProfileImages({avatar:e,avatarName:t}).then((function(e){n.$store.commit("addNewUsers",[e]),n.$store.commit("setCurrentUser",e),l()})).catch((function(e){n.displayUploadError(e),o(e)}))}e?e.getCroppedCanvas().toBlob((function(e){return a(e,t.name)}),t.type):a(t,t.name)}))},submitBanner:function(e){var t=this;(this.bannerPreview||""===e)&&(this.bannerUploading=!0,this.$store.state.api.backendInteractor.updateProfileImages({banner:e}).then((function(e){t.$store.commit("addNewUsers",[e]),t.$store.commit("setCurrentUser",e),t.bannerPreview=null})).catch(this.displayUploadError).finally((function(){t.bannerUploading=!1})))},submitBackground:function(e){var t=this;(this.backgroundPreview||""===e)&&(this.backgroundUploading=!0,this.$store.state.api.backendInteractor.updateProfileImages({background:e}).then((function(e){t.$store.commit("addNewUsers",[e]),t.$store.commit("setCurrentUser",e),t.backgroundPreview=null})).catch(this.displayUploadError).finally((function(){t.backgroundUploading=!1})))},displayUploadError:function(e){this.$store.dispatch("pushGlobalNotice",{messageKey:"upload.error.message",messageArgs:[e.message],level:"error"})},propsToNative:function(e){return(0,zo.X)(e)}}};const Po=Wo,So=(0,F.Z)(Po,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("EmojiInput"),r=(0,l.up)("Checkbox"),u=(0,l.up)("FAIcon"),c=(0,l.up)("Select"),d=(0,l.up)("interface-language-switcher"),p=(0,l.up)("image-cropper"),m=(0,l.up)("BooleanSetting");return(0,l.wg)(),(0,l.iD)("div",Ol,[(0,l._)("div",Ll,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.name_bio")),1),(0,l._)("p",null,(0,h.zw)(e.$t("settings.name")),1),(0,l.Wm)(s,{modelValue:e.newName,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.newName=t}),"enable-emoji-picker":"",suggest:e.emojiSuggestor},{default:(0,l.w5)((function(n){return[(0,l.wy)((0,l._)("input",(0,l.dG)({id:"username","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.newName=t}),class:"input name-changer"},e.propsToNative(n)),null,16),[[fe.YZ,e.newName]])]})),_:1},8,["modelValue","suggest"]),(0,l._)("p",null,(0,h.zw)(e.$t("settings.bio")),1),(0,l.Wm)(s,{modelValue:e.newBio,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.newBio=t}),"enable-emoji-picker":"",suggest:e.emojiUserSuggestor},{default:(0,l.w5)((function(n){return[(0,l.wy)((0,l._)("textarea",(0,l.dG)({"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.newBio=t}),class:"input bio resize-height"},e.propsToNative(n)),null,16),[[fe.nr,e.newBio]])]})),_:1},8,["modelValue","suggest"]),"admin"===e.role||"moderator"===e.role?((0,l.wg)(),(0,l.iD)("p",Wl,[(0,l.Wm)(r,{modelValue:e.showRole,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.showRole=t})},{default:(0,l.w5)((function(){return["admin"===e.role?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,h.zw)(e.$t("settings.show_admin_badge")),1)],64)):(0,l.kq)("",!0),"moderator"===e.role?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,h.zw)(e.$t("settings.show_moderator_badge")),1)],64)):(0,l.kq)("",!0)]})),_:1},8,["modelValue"])])):(0,l.kq)("",!0),(0,l._)("div",null,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.birthday.label")),1),(0,l.wy)((0,l._)("input",{id:"birthday","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.newBirthday=t}),type:"date",class:"input birthday-input"},null,512),[[fe.nr,e.newBirthday]]),(0,l.Wm)(r,{modelValue:e.showBirthday,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.showBirthday=t})},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.birthday.show_birthday")),1)]})),_:1},8,["modelValue"])]),e.maxFields>0?((0,l.wg)(),(0,l.iD)("div",Pl,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.profile_fields.label")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.newFields,(function(t,n){return(0,l.wg)(),(0,l.iD)("div",{key:n,class:"profile-fields"},[(0,l.Wm)(s,{modelValue:e.newFields[n].name,"onUpdate:modelValue":function(t){return e.newFields[n].name=t},"enable-emoji-picker":"","hide-emoji-button":"",suggest:e.userSuggestor},{default:(0,l.w5)((function(t){return[(0,l.wy)((0,l._)("input",(0,l.dG)({"onUpdate:modelValue":function(t){return e.newFields[n].name=t},placeholder:e.$t("settings.profile_fields.name")},e.propsToNative(t),{class:"input"}),null,16,Sl),[[fe.YZ,e.newFields[n].name]])]})),_:2},1032,["modelValue","onUpdate:modelValue","suggest"]),(0,l.Wm)(s,{modelValue:e.newFields[n].value,"onUpdate:modelValue":function(t){return e.newFields[n].value=t},"enable-emoji-picker":"","hide-emoji-button":"",suggest:e.userSuggestor},{default:(0,l.w5)((function(t){return[(0,l.wy)((0,l._)("input",(0,l.dG)({"onUpdate:modelValue":function(t){return e.newFields[n].value=t},placeholder:e.$t("settings.profile_fields.value")},e.propsToNative(t),{class:"input"}),null,16,Dl),[[fe.YZ,e.newFields[n].value]])]})),_:2},1032,["modelValue","onUpdate:modelValue","suggest"]),(0,l._)("button",{class:"delete-field button-unstyled -hover-highlight",onClick:function(t){return e.deleteField(n)}},[e.newFields.length>1?((0,l.wg)(),(0,l.j4)(u,{key:0,icon:"times"})):(0,l.kq)("",!0)],8,jl)])})),128)),e.newFields.length<e.maxFields?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"add-field faint button-unstyled -hover-highlight",onClick:t[7]||(t[7]=function(){return e.addField&&e.addField.apply(e,arguments)})},[(0,l.Wm)(u,{icon:"plus"}),(0,l.Uk)(" "+(0,h.zw)(e.$t("settings.profile_fields.add_field")),1)])):(0,l.kq)("",!0)])):(0,l.kq)("",!0),(0,l._)("p",null,[(0,l._)("label",null,[(0,l.Uk)((0,h.zw)(e.$t("settings.actor_type"))+" ",1),(0,l.Wm)(c,{modelValue:e.actorType,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.actorType=t})},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.availableActorTypes,(function(t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:t},(0,h.zw)(e.$t("settings.actor_type_"+t)),9,Il)})),128))]})),_:1},8,["modelValue"])])]),e.groupActorAvailable?((0,l.wg)(),(0,l.iD)("div",Al,[(0,l._)("small",null,(0,h.zw)(e.$t("settings.actor_type_description")),1)])):(0,l.kq)("",!0),(0,l._)("p",null,[(0,l.Wm)(d,{"prompt-text":e.$t("settings.email_language"),language:e.emailLanguage,"set-language":function(t){return e.emailLanguage=t}},null,8,["prompt-text","language","set-language"])]),(0,l._)("button",{disabled:e.newName&&0===e.newName.length,class:"btn button-default",onClick:t[9]||(t[9]=function(){return e.updateProfile&&e.updateProfile.apply(e,arguments)})},(0,h.zw)(e.$t("settings.save")),9,Bl)]),(0,l._)("div",El,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.avatar")),1),(0,l._)("p",Fl,(0,h.zw)(e.$t("settings.avatar_size_instruction")),1),(0,l._)("div",ql,[(0,l._)("img",{src:e.user.profile_image_url_original,class:"current-avatar"},null,8,Zl),!e.isDefaultAvatar&&e.pickAvatarBtnVisible?((0,l.wg)(),(0,l.iD)("button",{key:0,title:e.$t("settings.reset_avatar"),class:"button-unstyled reset-button",onClick:t[10]||(t[10]=function(){return e.resetAvatar&&e.resetAvatar.apply(e,arguments)})},[(0,l.Wm)(u,{icon:"times",type:"button"})],8,Ml)):(0,l.kq)("",!0)]),(0,l._)("p",null,(0,h.zw)(e.$t("settings.set_new_avatar")),1),(0,l.wy)((0,l._)("button",{id:"pick-avatar",class:"button-default btn",type:"button"},(0,h.zw)(e.$t("settings.upload_a_photo")),513),[[fe.F8,e.pickAvatarBtnVisible]]),(0,l.Wm)(p,{trigger:"#pick-avatar","submit-handler":e.submitAvatar,onOpen:t[11]||(t[11]=function(t){return e.pickAvatarBtnVisible=!1}),onClose:t[12]||(t[12]=function(t){return e.pickAvatarBtnVisible=!0})},null,8,["submit-handler"])]),(0,l._)("div",Rl,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.profile_banner")),1),(0,l._)("div",Nl,[(0,l._)("img",{src:e.user.cover_photo},null,8,Hl),e.isDefaultBanner?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:0,class:"button-unstyled reset-button",title:e.$t("settings.reset_profile_banner"),onClick:t[13]||(t[13]=function(){return e.resetBanner&&e.resetBanner.apply(e,arguments)})},[(0,l.Wm)(u,{icon:"times",type:"button"})],8,Yl))]),(0,l._)("p",null,(0,h.zw)(e.$t("settings.set_new_profile_banner")),1),e.bannerPreview?((0,l.wg)(),(0,l.iD)("img",{key:0,class:"banner-background-preview",src:e.bannerPreview},null,8,Kl)):(0,l.kq)("",!0),(0,l._)("div",null,[(0,l._)("input",{type:"file",class:"input",onChange:t[14]||(t[14]=function(t){return e.uploadFile("banner",t)})},null,32)]),e.bannerUploading?((0,l.wg)(),(0,l.j4)(u,{key:1,class:"uploading",spin:"",icon:"circle-notch"})):e.bannerPreview?((0,l.wg)(),(0,l.iD)("button",{key:2,class:"btn button-default",onClick:t[15]||(t[15]=function(t){return e.submitBanner(e.banner)})},(0,h.zw)(e.$t("settings.save")),1)):(0,l.kq)("",!0)]),(0,l._)("div",Gl,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.profile_background")),1),(0,l._)("div",Ql,[(0,l._)("img",{src:e.user.background_image},null,8,Jl),e.isDefaultBackground?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:0,class:"button-unstyled reset-button",title:e.$t("settings.reset_profile_background"),onClick:t[16]||(t[16]=function(){return e.resetBackground&&e.resetBackground.apply(e,arguments)})},[(0,l.Wm)(u,{icon:"times",type:"button"})],8,Xl))]),(0,l._)("p",null,(0,h.zw)(e.$t("settings.set_new_profile_background")),1),e.backgroundPreview?((0,l.wg)(),(0,l.iD)("img",{key:0,class:"banner-background-preview",src:e.backgroundPreview},null,8,eo)):(0,l.kq)("",!0),(0,l._)("div",null,[(0,l._)("input",{type:"file",class:"input",onChange:t[17]||(t[17]=function(t){return e.uploadFile("background",t)})},null,32)]),e.backgroundUploading?((0,l.wg)(),(0,l.j4)(u,{key:1,class:"uploading",spin:"",icon:"circle-notch"})):e.backgroundPreview?((0,l.wg)(),(0,l.iD)("button",{key:2,class:"btn button-default",onClick:t[18]||(t[18]=function(t){return e.submitBackground(e.background)})},(0,h.zw)(e.$t("settings.save")),1)):(0,l.kq)("",!0)]),(0,l._)("div",to,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.account_privacy")),1),(0,l._)("ul",no,[(0,l._)("li",null,[(0,l.Wm)(m,{source:"profile",path:"locked"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.lock_account_description")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(m,{source:"profile",path:"discoverable"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.discoverable")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(m,{source:"profile",path:"allowFollowingMove"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.allow_following_move")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(m,{source:"profile",path:"hideFavorites"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_favorites_description")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(m,{source:"profile",path:"hideFollowers"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_followers_description")),1)]})),_:1}),(0,l._)("ul",lo,[(0,l._)("li",null,[(0,l.Wm)(m,{source:"profile",path:"hideFollowersCount","parent-path":"hideFollowers"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_followers_count_description")),1)]})),_:1})])])]),(0,l._)("li",null,[(0,l.Wm)(m,{source:"profile",path:"hideFollows"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_follows_description")),1)]})),_:1}),(0,l._)("ul",oo,[(0,l._)("li",null,[(0,l.Wm)(m,{source:"profile",path:"hideFollowsCount","parent-path":"hideFollows"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_follows_count_description")),1)]})),_:1})])])])])])])}]]);var Do=["label"],jo={class:"setting-item"},Io={class:"setting-list"},Ao={key:0},Bo={class:"setting-list suboptions"},Eo={key:1},Fo={class:"select-multiple"},qo={class:"label"},Zo={class:"option-list"},Mo={class:"setting-item"},Ro={class:"setting-list"},No={key:0,class:"setting-list suboptions"},Ho={class:"setting-list suboptions"},Yo={class:"setting-list suboptions"},Ko={key:0,class:"unavailable"},Go={key:1},Qo={key:2},Jo={key:3},Xo={key:0,class:"setting-item"},ea={class:"setting-list"},ta={for:"default-vis"},na={key:0};const la={components:{NumberSetting:n(84710).Z}},oa=(0,F.Z)(la,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("NumberSetting");return(0,l.wg)(),(0,l.j4)(s,(0,h.vs)((0,l.F4)(e.$attrs)),{default:(0,l.w5)((function(){return[(0,l.WI)(e.$slots,"default")]})),_:3},16)}]]);var aa=n(29376);function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}A.vI.add(B.g4A);const sa={data:function(){var e=this;return{subjectLineOptions:["email","noop","masto"].map((function(t){return{key:t,value:t,label:e.$t("settings.subject_line_".concat("masto"===t?"mastodon":t))}})),conversationDisplayOptions:["tree","linear"].map((function(t){return{key:t,value:t,label:e.$t("settings.conversation_display_".concat(t))}})),conversationOtherRepliesButtonOptions:["below","inside"].map((function(t){return{key:t,value:t,label:e.$t("settings.conversation_other_replies_button_".concat(t))}})),mentionLinkDisplayOptions:["short","full_for_remote","full"].map((function(t){return{key:t,value:t,label:e.$t("settings.mention_link_display_".concat(t))}})),userPopoverAvatarActionOptions:["close","zoom","open"].map((function(t){return{key:t,value:t,label:e.$t("settings.user_popover_avatar_action_".concat(t))}})),loopSilentAvailable:Object.getOwnPropertyDescriptor(HTMLVideoElement.prototype,"mozHasAudio")||Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"webkitAudioDecodedByteCount")||Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"audioTracks")}},components:{BooleanSetting:Pt.Z,ChoiceSetting:Gt.Z,IntegerSetting:cn.Z,FloatSetting:oa,UnitSetting:un,InterfaceLanguageSwitcher:xo.Z,ScopeSelector:Co.Z,ProfileSettingIndicator:aa.Z},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({postFormats:function(){return this.$store.state.instance.postFormats||[]},postContentOptions:function(){var e=this;return this.postFormats.map((function(t){return{key:t,value:t,label:e.$t('post_status.content_type["'.concat(t,'"]'))}}))},language:{get:function(){return this.$store.getters.mergedConfig.interfaceLanguage},set:function(e){this.$store.dispatch("setOption",{name:"interfaceLanguage",value:e})}}},(0,St.Z)()),methods:{changeDefaultScope:function(e){this.$store.dispatch("setProfileOption",{name:"defaultScope",value:e})}}},ra=(0,F.Z)(sa,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("interface-language-switcher"),r=(0,l.up)("BooleanSetting"),u=(0,l.up)("ChoiceSetting"),c=(0,l.up)("IntegerSetting"),d=(0,l.up)("FAIcon"),p=(0,l.up)("ProfileSettingIndicator"),m=(0,l.up)("ScopeSelector");return(0,l.wg)(),(0,l.iD)("div",{label:e.$t("settings.general")},[(0,l._)("div",jo,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.interface")),1),(0,l._)("ul",Io,[(0,l._)("li",null,[(0,l.Wm)(s,{"prompt-text":e.$t("settings.interfaceLanguage"),language:e.language,"set-language":function(t){return e.language=t}},null,8,["prompt-text","language","set-language"])]),e.instanceSpecificPanelPresent?((0,l.wg)(),(0,l.iD)("li",Ao,[(0,l.Wm)(r,{path:"hideISP"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_isp")),1)]})),_:1})])):(0,l.kq)("",!0),(0,l._)("li",null,[(0,l.Wm)(r,{path:"stopGifs"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.stop_gifs")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"streaming"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.streaming")),1)]})),_:1}),(0,l._)("ul",Bo,[(0,l._)("li",null,[(0,l.Wm)(r,{path:"pauseOnUnfocused","parent-path":"streaming"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.pause_on_unfocused")),1)]})),_:1})])])]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"useStreamingApi",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.useStreamingApi")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"virtualScrolling",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.virtual_scrolling")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(u,{id:"userPopoverAvatarAction",path:"userPopoverAvatarAction",options:e.userPopoverAvatarActionOptions,expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.user_popover_avatar_action")),1)]})),_:1},8,["options"])]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"userPopoverOverlay",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.user_popover_avatar_overlay")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"alwaysShowNewPostButton",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.always_show_post_button")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"autohideFloatingPostButton",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.autohide_floating_post_button")),1)]})),_:1})]),e.instanceShoutboxPresent?((0,l.wg)(),(0,l.iD)("li",Eo,[(0,l.Wm)(r,{path:"hideShoutbox",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_shoutbox")),1)]})),_:1})])):(0,l.kq)("",!0),(0,l._)("li",Fo,[(0,l._)("span",qo,(0,h.zw)(e.$t("settings.confirm_dialogs")),1),(0,l._)("ul",Zo,[(0,l._)("li",null,[(0,l.Wm)(r,{path:"modalOnRepeat"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.confirm_dialogs_repeat")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"modalOnUnfollow"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.confirm_dialogs_unfollow")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"modalOnBlock"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.confirm_dialogs_block")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"modalOnMute"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.confirm_dialogs_mute")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"modalOnDelete"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.confirm_dialogs_delete")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"modalOnLogout"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.confirm_dialogs_logout")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"modalOnApproveFollow"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.confirm_dialogs_approve_follow")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"modalOnDenyFollow"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.confirm_dialogs_deny_follow")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"modalOnRemoveUserFromFollowers"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.confirm_dialogs_remove_follower")),1)]})),_:1})])])])])]),(0,l._)("div",Mo,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.post_look_feel")),1),(0,l._)("ul",Ro,[(0,l._)("li",null,[(0,l.Wm)(u,{id:"conversationDisplay",path:"conversationDisplay",options:e.conversationDisplayOptions},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.conversation_display")),1)]})),_:1},8,["options"])]),"linear"!==e.mergedConfig.conversationDisplay?((0,l.wg)(),(0,l.iD)("ul",No,[(0,l._)("li",null,[(0,l.Wm)(r,{path:"conversationTreeAdvanced"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.tree_advanced")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"conversationTreeFadeAncestors",expert:1},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.tree_fade_ancestors")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(c,{path:"maxDepthInThread",min:3,expert:1},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.max_depth_in_thread")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(u,{id:"conversationOtherRepliesButton",path:"conversationOtherRepliesButton",options:e.conversationOtherRepliesButtonOptions,expert:1},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.conversation_other_replies_button")),1)]})),_:1},8,["options"])])])):(0,l.kq)("",!0),(0,l._)("li",null,[(0,l.Wm)(r,{path:"collapseMessageWithSubject"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.collapse_subject")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"emojiReactionsOnTimeline",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.emoji_reactions_on_timeline")),1)]})),_:1})]),(0,l._)("li",null,[e.user?((0,l.wg)(),(0,l.j4)(r,{key:0,source:"profile",path:"stripRichContent",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.no_rich_text_description")),1)]})),_:1})):(0,l.kq)("",!0)]),(0,l._)("h3",null,(0,h.zw)(e.$t("settings.attachments")),1),(0,l._)("li",null,[(0,l.Wm)(r,{path:"useContainFit",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.use_contain_fit")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"hideNsfw"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.nsfw_clickthrough")),1)]})),_:1})]),(0,l._)("ul",Ho,[(0,l._)("li",null,[(0,l.Wm)(r,{path:"preloadImage",expert:"1","parent-path":"hideNsfw"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.preload_images")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"useOneClickNsfw",expert:"1","parent-path":"hideNsfw"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.use_one_click_nsfw")),1)]})),_:1})])]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"loopVideo",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.loop_video")),1)]})),_:1}),(0,l._)("ul",Yo,[(0,l._)("li",null,[(0,l.Wm)(r,{path:"loopVideoSilentOnly",expert:"1","parent-path":"loopVideo",disabled:!e.loopSilentAvailable},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.loop_video_silent_only")),1)]})),_:1},8,["disabled"]),e.loopSilentAvailable?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Ko,[(0,l.Wm)(d,{icon:"globe"}),(0,l.Uk)("! "+(0,h.zw)(e.$t("settings.limited_availability")),1)]))])])]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"playVideosInModal",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.play_videos_in_modal")),1)]})),_:1})]),(0,l._)("h3",null,(0,h.zw)(e.$t("settings.mention_links")),1),(0,l._)("li",null,[(0,l.Wm)(u,{id:"mentionLinkDisplay",path:"mentionLinkDisplay",options:e.mentionLinkDisplayOptions},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.mention_link_display")),1)]})),_:1},8,["options"])]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"mentionLinkShowTooltip",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.mention_link_use_tooltip")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"useAtIcon",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.use_at_icon")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"mentionLinkShowAvatar"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.mention_link_show_avatar")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"mentionLinkFadeDomain",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.mention_link_fade_domain")),1)]})),_:1})]),e.user?((0,l.wg)(),(0,l.iD)("li",Go,[(0,l.Wm)(r,{path:"mentionLinkBoldenYou",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.mention_link_bolden_you")),1)]})),_:1})])):(0,l.kq)("",!0),e.expertLevel>0?((0,l.wg)(),(0,l.iD)("h3",Qo,(0,h.zw)(e.$t("settings.fun")),1)):(0,l.kq)("",!0),(0,l._)("li",null,[(0,l.Wm)(r,{path:"greentext",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.greentext")),1)]})),_:1})]),e.user?((0,l.wg)(),(0,l.iD)("li",Jo,[(0,l.Wm)(r,{path:"mentionLinkShowYous",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.show_yous")),1)]})),_:1})])):(0,l.kq)("",!0)])]),e.user?((0,l.wg)(),(0,l.iD)("div",Xo,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.composing")),1),(0,l._)("ul",ea,[(0,l._)("li",null,[(0,l._)("label",ta,[(0,l.Uk)((0,h.zw)(e.$t("settings.default_vis"))+" ",1),(0,l.Wm)(p,{"is-profile":!0}),(0,l.Wm)(m,{class:"scope-selector","show-all":!0,"user-default":e.$store.state.profileConfig.defaultScope,"initial-scope":e.$store.state.profileConfig.defaultScope,"on-scope-change":e.changeDefaultScope},null,8,["user-default","initial-scope","on-scope-change"])])]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"sensitiveByDefault"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.sensitive_by_default")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"scopeCopy",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.scope_copy")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"alwaysShowSubjectInput",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.subject_input_always_show")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(u,{id:"subjectLineBehavior",path:"subjectLineBehavior",options:e.subjectLineOptions,expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.subject_line_behavior")),1)]})),_:1},8,["options"])]),e.postFormats.length>0?((0,l.wg)(),(0,l.iD)("li",na,[(0,l.Wm)(u,{id:"postContentType",path:"postContentType",options:e.postContentOptions},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.post_status_content_type")),1)]})),_:1},8,["options"])])):(0,l.kq)("",!0),(0,l._)("li",null,[(0,l.Wm)(r,{path:"minimalScopesMode",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.minimal_scopes_mode")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"alwaysShowNewPostButton",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.always_show_post_button")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"autohideFloatingPostButton",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.autohide_floating_post_button")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"padEmoji",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.pad_emoji")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"autocompleteSelect",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.autocomplete_select_first")),1)]})),_:1})])])])):(0,l.kq)("",!0)],8,Do)}]]);var ua=["label"],ca={class:"setting-item"},da={class:"theme-list",ref:"themeList"},pa={key:0,disabled:"",class:"button-default theme-preview"},ma={class:"theme-name"},fa=["data-theme-key","onClick"],ha={class:"theme-name"},ga={class:"alert neutral theme-notice"},ba={class:"setting-item"},wa={class:"setting-list"},_a=(0,l._)("code",null,"px",-1),va=(0,l._)("code",null,"rem",-1),ka=(0,l._)("br",null,null,-1),ya=(0,l._)("code",null,"14px",-1),$a={class:"setting-list"},Ca={class:"setting-list suboptions"},Va={key:0},Ua={class:"column-settings"},Ta={class:"setting-item"},xa={class:"setting-list"},za={key:0},Oa=n(29439);function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pa=["id","for"],Sa={key:1},Da=["id","for"],ja=(0,l._)("code",null,"font-family",-1),Ia=["id","for"],Aa={key:2,class:"btn-group"},Ba=["title"],Ea=["id","model-value"],Fa={key:3,class:"btn-group"},qa=["title"],Za=["label"],Ma=["value"],Ra=["label"],Na=["value"],Ha=["label"],Ya={disabled:""},Ka={disabled:""},Ga=n(67943);A.vI.add(B.eHv,B.UFh,B.yGG);const Qa={components:{Select:tn.Z,Checkbox:H.Z,Popover:Ga.default},props:["name","label","modelValue","fallback","options","no-inherit"],mounted:function(){this.$store.dispatch("queryLocalFonts")},emits:["update:modelValue"],data:function(){return{manualEntry:!1,availableOptions:[this.noInherit?"":"inherit","serif","sans-serif","monospace"].concat((0,Me.Z)(this.options||[])).filter((function(e){return e}))}},methods:{toggleManualEntry:function(){this.manualEntry=!this.manualEntry}},computed:{present:function(){return void 0!==this.modelValue},localFontsList:function(){return this.$store.state.interface.localFonts},localFontsSize:function(){var e;return null===(e=this.$store.state.interface.localFonts)||void 0===e?void 0:e.length}}},Ja=(0,F.Z)(Qa,[["render",function(e,t,n,o,a,i){var s,r,u=(0,l.up)("Checkbox"),c=(0,l.up)("i18n-t"),d=(0,l.up)("FAIcon"),p=(0,l.up)("Select");return(0,l.wg)(),(0,l.iD)("div",{class:(0,h.C_)(["font-control",{custom:e.isCustom}])},[(0,l._)("label",{id:e.name+"-label",for:"custom"===e.preset?e.name:e.name+"-font-switcher",class:"label"},(0,h.zw)(e.label),9,Pa),(0,l.Uk)(" "+(0,h.zw)(" ")+" "),void 0!==e.fallback?((0,l.wg)(),(0,l.j4)(u,{key:0,id:e.name+"-o",modelValue:e.present,onChange:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",void 0===e.modelValue?e.fallback:void 0)})},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.style.themes3.define")),1)]})),_:1},8,["id","modelValue"])):(0,l.kq)("",!0),null!==(s=e.modelValue)&&void 0!==s&&s.family?((0,l.wg)(),(0,l.iD)("p",Sa,[e.manualEntry?((0,l.wg)(),(0,l.iD)("label",{key:0,id:e.name+"-label",for:"custom"===e.preset?e.name:e.name+"-font-switcher",class:"label"},[(0,l.Wm)(c,{keypath:"settings.style.themes3.font.entry",tag:"span"},{fontFamily:(0,l.w5)((function(){return[ja]})),_:1})],8,Da)):((0,l.wg)(),(0,l.iD)("label",{key:1,id:e.name+"-label",for:"custom"===e.preset?e.name:e.name+"-font-switcher",class:"label"},(0,h.zw)(e.$t("settings.style.themes3.font.select")),9,Ia)),(0,l.Uk)(" "+(0,h.zw)(" ")+" "),e.manualEntry?((0,l.wg)(),(0,l.iD)("span",Aa,[(0,l._)("button",{class:"btn button-default",onClick:t[1]||(t[1]=function(){return e.toggleManualEntry&&e.toggleManualEntry.apply(e,arguments)}),title:e.$t("settings.style.themes3.font.lookup_local_fonts")},[(0,l.Wm)(d,{"fixed-width":"",icon:"font"})],8,Ba),(0,l._)("input",{id:e.name,"model-value":e.modelValue.family,class:"input custom-font",type:"text","on:update:modelValue":t[2]||(t[2]=function(t){return e.$emit("update:modelValue",Wa(Wa({},e.modelValue||{}),{},{family:t.target.value}))})},null,40,Ea)])):((0,l.wg)(),(0,l.iD)("span",Fa,[(0,l._)("button",{class:"btn button-default",onClick:t[3]||(t[3]=function(){return e.toggleManualEntry&&e.toggleManualEntry.apply(e,arguments)}),title:e.$t("settings.style.themes3.font.enter_manually")},[(0,l.Wm)(d,{"fixed-width":"",icon:"keyboard"})],8,qa),(0,l.Wm)(p,{id:e.name+"-local-font-switcher","model-value":null===(r=e.modelValue)||void 0===r?void 0:r.family,class:"custom-font","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.$emit("update:modelValue",Wa(Wa({},e.modelValue||{}),{},{family:t}))})},{default:(0,l.w5)((function(){return[(0,l._)("optgroup",{label:e.$t("settings.style.themes3.font.group-builtin")},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.availableOptions,(function(t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:t,style:(0,h.j5)({fontFamily:"inherit"===t?null:t})},(0,h.zw)(e.$t("settings.style.themes3.font.builtin."+t)),13,Ma)})),128))],8,Za),e.localFontsSize>0?((0,l.wg)(),(0,l.iD)("optgroup",{key:0,label:e.$t("settings.style.themes3.font.group-local")},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.localFontsList,(function(e){return(0,l.wg)(),(0,l.iD)("option",{key:e,value:e,style:(0,h.j5)({fontFamily:e})},(0,h.zw)(e),13,Na)})),128))],8,Ra)):((0,l.wg)(),(0,l.iD)("optgroup",{key:1,label:e.$t("settings.style.themes3.font.group-local")},[(0,l._)("option",Ya,(0,h.zw)(e.$t("settings.style.themes3.font.local-unavailable1")),1),(0,l._)("option",Ka,(0,h.zw)(e.$t("settings.style.themes3.font.local-unavailable2")),1)],8,Ha))]})),_:1},8,["id","model-value"])]))])):(0,l.kq)("",!0)],2)}]]);var Xa=n(45140),ei=n(77394),ti=n(2673),ni=n(41152),li=n(6529),oi={class:"theme-preview-container"},ai=(0,l._)("div",{class:"underlay underlay-preview"},null,-1),ii={class:"panel dummy"},si={class:"panel-heading"},ri={class:"title"},ui=(0,l._)("span",{class:"badge -notification"}," 99 ",-1),ci={class:"faint"},di={class:"alert error"},pi={class:"btn button-default"},mi={class:"panel-body theme-preview-content"},fi={class:"post"},hi=(0,l._)("div",{class:"avatar still-image"}," (   ) ",-1),gi={class:"content"},bi={style:{"font-family":"var(--postCodeFont)"}},wi={style:{color:"var(--link)"}},_i={class:"icons"},vi={class:"after-post"},ki=(0,l._)("div",{class:"avatar-alt"}," :^) ",-1),yi={class:"content"},$i={style:{color:"var(--linkFaint)"}},Ci=(0,l._)("div",{class:"separator"},null,-1),Vi={class:"alert error"},Ui=["value"],Ti={class:"actions"},xi={class:"btn button-default"};A.vI.add(B.NBC,B.Tab,B.x5v,B.Lh7);const zi={components:{Checkbox:H.Z}},Oi=(0,F.Z)(zi,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("i18n-t"),r=(0,l.up)("FAIcon"),u=(0,l.up)("Checkbox");return(0,l.wg)(),(0,l.iD)("div",oi,[ai,(0,l._)("div",ii,[(0,l._)("div",si,[(0,l._)("div",ri,[(0,l.Uk)((0,h.zw)(e.$t("settings.style.preview.header"))+" ",1),ui]),(0,l._)("span",ci,(0,h.zw)(e.$t("settings.style.preview.header_faint")),1),(0,l._)("span",di,(0,h.zw)(e.$t("settings.style.preview.error")),1),(0,l._)("button",pi,(0,h.zw)(e.$t("settings.style.preview.button")),1)]),(0,l._)("div",mi,[(0,l._)("div",fi,[hi,(0,l._)("div",gi,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.preview.content")),1),(0,l.Wm)(s,{scope:"global",keypath:"settings.style.preview.text"},{default:(0,l.w5)((function(){return[(0,l._)("code",bi,(0,h.zw)(e.$t("settings.style.preview.mono")),1),(0,l._)("a",wi,(0,h.zw)(e.$t("settings.style.preview.link")),1)]})),_:1}),(0,l._)("div",_i,[(0,l.Wm)(r,{"fixed-width":"",style:{color:"var(--cBlue)"},class:"fa-scale-110 fa-old-padding",icon:"reply"}),(0,l.Wm)(r,{"fixed-width":"",style:{color:"var(--cGreen)"},class:"fa-scale-110 fa-old-padding",icon:"retweet"}),(0,l.Wm)(r,{"fixed-width":"",style:{color:"var(--cOrange)"},class:"fa-scale-110 fa-old-padding",icon:"star"}),(0,l.Wm)(r,{"fixed-width":"",style:{color:"var(--cRed)"},class:"fa-scale-110 fa-old-padding",icon:"times"})])])]),(0,l._)("div",vi,[ki,(0,l._)("div",yi,[(0,l.Wm)(s,{keypath:"settings.style.preview.fine_print",tag:"span",class:"faint",scope:"global"},{default:(0,l.w5)((function(){return[(0,l._)("a",$i,(0,h.zw)(e.$t("settings.style.preview.faint_link")),1)]})),_:1})])]),Ci,(0,l._)("span",Vi,(0,h.zw)(e.$t("settings.style.preview.error")),1),(0,l._)("input",{value:e.$t("settings.style.preview.input"),type:"text",class:"input"},null,8,Ui),(0,l._)("div",Ti,[(0,l.Wm)(u,null,{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.style.preview.checkbox")),1)]})),_:1}),(0,l._)("button",xi,(0,h.zw)(e.$t("settings.style.preview.button")),1)])])])])}]]);function Li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}A.vI.add(B.g4A);const Pi={data:function(){var e=this;return{availableStyles:[],intersectionObserver:null,thirdColumnModeOptions:["none","notifications","postform"].map((function(t){return{key:t,value:t,label:e.$t("settings.third_column_mode_".concat(t))}})),forcedRoundnessOptions:["disabled","sharp","nonsharp","round"].map((function(t,n){return{key:t,value:n-1,label:e.$t("settings.style.themes3.hacks.forced_roundness_mode_".concat(t))}})),underlayOverrideModes:["none","opaque","transparent"].map((function(t,n){return{key:t,value:t,label:e.$t("settings.style.themes3.hacks.underlay_override_mode_".concat(t))}}))}},components:{BooleanSetting:Pt.Z,ChoiceSetting:Gt.Z,IntegerSetting:cn.Z,FloatSetting:oa,UnitSetting:un,ProfileSettingIndicator:aa.Z,FontControl:Ja,Preview:Oi},mounted:function(){var e=this;(0,ei.RC)().then((function(e){return Promise.all(Object.entries(e).map((function(e){var t=(0,Oa.Z)(e,2),n=t[0];return t[1].then((function(e){return[n,e]}))})))})).then((function(e){return e.reduce((function(e,t){var n=(0,Oa.Z)(t,2),l=n[0],o=n[1];return o?[].concat((0,Me.Z)(e),[{name:o.name||o[0],key:l,data:o}]):e}),[])})).then((function(t){e.availableStyles=t})),window.IntersectionObserver&&(this.intersectionObserver=new IntersectionObserver((function(t,n){t.forEach((function(t){var l=t.target;if(t.isIntersecting){var o=e.availableStyles.find((function(e){return e.key===l.dataset.themeKey}));e.$nextTick((function(){o&&(o.ready=!0)})),n.unobserve(l)}}))}),{root:this.$refs.themeList}))},updated:function(){var e=this;this.$nextTick((function(){e.$refs.themeList.querySelectorAll(".theme-preview").forEach((function(t){e.intersectionObserver.observe(t)}))}))},computed:Wi({noIntersectionObserver:function(){return!window.IntersectionObserver},horizontalUnits:function(){return sn},fontsOverride:function(){return this.$store.getters.mergedConfig.fontsOverride},columns:function(){var e=this.$store.getters.mergedConfig.thirdColumnMode,t="none"===e?[]:["notifs"];return this.$store.getters.mergedConfig.sidebarRight||"postform"===e?[].concat(t,["content","sidebar"]):["sidebar","content"].concat(t)},instanceSpecificPanelPresent:function(){return this.$store.state.instance.showInstanceSpecificPanel},instanceWallpaperUsed:function(){return this.$store.state.instance.background&&!this.$store.state.users.currentUser.background_image},instanceShoutboxPresent:function(){return this.$store.state.instance.shoutAvailable},language:{get:function(){return this.$store.getters.mergedConfig.interfaceLanguage},set:function(e){this.$store.dispatch("setOption",{name:"interfaceLanguage",value:e})}},isCustomThemeUsed:function(){var e=this.mergedConfig.theme;return"custom"===e||null===e}},(0,St.Z)()),methods:{updateFont:function(e,t){console.log(e,t),this.$store.dispatch("setOption",{name:"theme3hacks",value:Wi(Wi({},this.mergedConfig.theme3hacks),{},{fonts:Wi(Wi({},this.mergedConfig.theme3hacks.fonts),{},(0,S.Z)({},e,t))})})},isThemeActive:function(e){return e===this.mergedConfig.theme},setTheme:function(e){this.$store.dispatch("setTheme",{themeName:e,saveData:!0,recompile:!0})},previewTheme:function(e,t){var n=(0,Xa.b)(t),l=(0,ti.FE)(n),o=(0,ni.S)({inputRuleset:l,ultimateBackgroundColor:"#000000",liteMode:!0,debug:!0,onlyNormalState:!0});return(0,li.mo)((0,li.qQ)(o.eager),"#theme-preview-"+e).join("\n")}}},Si=(0,F.Z)(Pi,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("preview"),r=(0,l.up)("UnitSetting"),u=(0,l.up)("i18n-t"),c=(0,l.up)("FontControl"),d=(0,l.up)("FloatSetting"),p=(0,l.up)("BooleanSetting"),m=(0,l.up)("ChoiceSetting");return(0,l.wg)(),(0,l.iD)("div",{class:"appearance-tab",label:e.$t("settings.general")},[(0,l._)("div",ca,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.theme")),1),(0,l._)("ul",da,[e.isCustomThemeUsed?((0,l.wg)(),(0,l.iD)("button",pa,[(0,l.Wm)(s),(0,l._)("h4",ma,(0,h.zw)(e.$t("settings.style.custom_theme_used")),1)])):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.availableStyles,(function(t){return(0,l.wg)(),(0,l.iD)("button",{"data-theme-key":t.key,key:t.key,class:(0,h.C_)(["button-default theme-preview",{toggled:e.isThemeActive(t.key)}]),onClick:function(n){return e.setTheme(t.key)}},[t.ready||e.noIntersectionObserver?((0,l.wg)(),(0,l.j4)((0,l.LL)("style"),{key:0,innerHTML:e.previewTheme(t.key,t.data)},null,8,["innerHTML"])):(0,l.kq)("",!0),(0,l.Wm)(s,{class:(0,h.C_)({placeholder:e.ready}),id:"theme-preview-"+t.key},null,8,["class","id"]),(0,l._)("h4",ha,(0,h.zw)(t.name),1)],10,fa)})),128))],512)]),(0,l._)("div",ga,(0,h.zw)(e.$t("settings.style.appearance_tab_note")),1),(0,l._)("div",ba,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.scale_and_layout")),1),(0,l._)("ul",wa,[(0,l._)("li",null,[(0,l.Wm)(r,{path:"textSize",step:"0.1",units:["px","rem"],"reset-default":{px:14,rem:1},"timed-apply-mode":""},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.text_size")),1)]})),_:1}),(0,l._)("div",null,[(0,l._)("small",null,[(0,l.Wm)(u,{scope:"global",keypath:"settings.text_size_tip",tag:"span"},{default:(0,l.w5)((function(){return[_a,va]})),_:1}),ka,(0,l.Wm)(u,{scope:"global",keypath:"settings.text_size_tip2",tag:"span"},{default:(0,l.w5)((function(){return[ya]})),_:1})])])]),(0,l._)("li",null,[(0,l._)("h3",null,(0,h.zw)(e.$t("settings.style.interface_font_user_override")),1),(0,l._)("ul",$a,[(0,l._)("li",null,[(0,l.Wm)(c,{"model-value":e.mergedConfig.theme3hacks.fonts.interface,name:"ui",label:e.$t("settings.style.fonts.components.interface"),fallback:{family:"sans-serif"},"no-inherit":"1","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.updateFont("interface",t)})},null,8,["model-value","label"])]),(0,l._)("li",null,[e.expertLevel>0?((0,l.wg)(),(0,l.j4)(c,{key:0,"model-value":e.mergedConfig.theme3hacks.fonts.input,name:"input",fallback:{family:"inherit"},label:e.$t("settings.style.fonts.components.input"),"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.updateFont("input",t)})},null,8,["model-value","label"])):(0,l.kq)("",!0)]),(0,l._)("li",null,[e.expertLevel>0?((0,l.wg)(),(0,l.j4)(c,{key:0,"model-value":e.mergedConfig.theme3hacks.fonts.post,name:"post",fallback:{family:"inherit"},label:e.$t("settings.style.fonts.components.post"),"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.updateFont("post",t)})},null,8,["model-value","label"])):(0,l.kq)("",!0)]),(0,l._)("li",null,[e.expertLevel>0?((0,l.wg)(),(0,l.j4)(c,{key:0,"model-value":e.mergedConfig.theme3hacks.fonts.monospace,name:"postCode",fallback:{family:"monospace"},label:e.$t("settings.style.fonts.components.monospace"),"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.updateFont("monospace",t)})},null,8,["model-value","label"])):(0,l.kq)("",!0)])])]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"emojiSize",step:"0.1",units:["px","rem"],"reset-default":{px:32,rem:2.2}},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.emoji_size")),1)]})),_:1},8,["reset-default"]),(0,l._)("ul",Ca,[(0,l._)("li",null,[e.user?((0,l.wg)(),(0,l.j4)(d,{key:0,path:"emojiReactionsScale",expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.emoji_reactions_scale")),1)]})),_:1})):(0,l.kq)("",!0)])])]),(0,l._)("li",null,[(0,l.Wm)(r,{path:"navbarSize",step:"0.1",units:["px","rem"],"reset-default":{px:55,rem:3.5}},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.navbar_size")),1)]})),_:1},8,["reset-default"])]),(0,l._)("h3",null,(0,h.zw)(e.$t("settings.columns")),1),(0,l._)("li",null,[(0,l.Wm)(r,{path:"panelHeaderSize",step:"0.1",units:["px","rem"],"reset-default":{px:52,rem:3.2},"timed-apply-mode":""},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.panel_header_size")),1)]})),_:1},8,["reset-default"])]),(0,l._)("li",null,[(0,l.Wm)(p,{path:"sidebarRight"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.right_sidebar")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(p,{path:"navbarColumnStretch"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.navbar_column_stretch")),1)]})),_:1})]),(0,l._)("li",null,[e.user?((0,l.wg)(),(0,l.j4)(m,{key:0,id:"thirdColumnMode",path:"thirdColumnMode",options:e.thirdColumnModeOptions},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.third_column_mode")),1)]})),_:1},8,["options"])):(0,l.kq)("",!0)]),e.expertLevel>0?((0,l.wg)(),(0,l.iD)("li",Va,[(0,l.Uk)((0,h.zw)(e.$t("settings.column_sizes"))+" ",1),(0,l._)("div",Ua,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columns,(function(t){return(0,l.wg)(),(0,l.j4)(r,{key:t,path:t+"ColumnWidth",units:e.horizontalUnits,expert:"1"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.column_sizes_"+t)),1)]})),_:2},1032,["path","units"])})),128))])])):(0,l.kq)("",!0),(0,l._)("li",null,[(0,l.Wm)(p,{path:"disableStickyHeaders"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.disable_sticky_headers")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(p,{path:"showScrollbars"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.show_scrollbars")),1)]})),_:1})])])]),(0,l._)("div",Ta,[(0,l._)("h2",null,(0,h.zw)(e.$t("settings.visual_tweaks")),1),(0,l._)("ul",xa,[(0,l._)("li",null,[(0,l.Wm)(m,{id:"forcedRoundness",path:"forcedRoundness",options:e.forcedRoundnessOptions},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.style.themes3.hacks.force_interface_roundness")),1)]})),_:1},8,["options"])]),(0,l._)("li",null,[(0,l.Wm)(m,{id:"underlayOverride",path:"theme3hacks.underlay",options:e.underlayOverrideModes},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.style.themes3.hacks.underlay_overrides")),1)]})),_:1},8,["options"])]),e.instanceWallpaperUsed?((0,l.wg)(),(0,l.iD)("li",za,[(0,l.Wm)(p,{path:"hideInstanceWallpaper"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.hide_wallpaper")),1)]})),_:1})])):(0,l.kq)("",!0),(0,l._)("li",null,[(0,l.Wm)(p,{path:"forceThemeRecompilation",expert:1},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.force_theme_recompilation_debug")),1)]})),_:1})]),(0,l._)("li",null,[(0,l.Wm)(p,{path:"themeDebug",expert:1},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.theme_debug")),1)]})),_:1})])])])],8,ua)}]]);var Di=["label"],ji={class:"setting-item"},Ii={class:"setting-list"},Ai={class:"option-list"},Bi=["href"],Ei={class:"option-list"},Fi=["href"];const qi={data:function(){var e=this.$store.state.instance;return{backendVersion:e.backendVersion,frontendVersion:e.frontendVersion}},computed:{frontendVersionLink:function(){return"https://git.pleroma.social/pleroma/pleroma-fe/commit/"+this.frontendVersion},backendVersionLink:function(){return"https://git.pleroma.social/pleroma/pleroma/commit/"+((e=this.backendVersion.match(/-g(\w+)/i))?e[1]:"");var e}}},Zi=(0,F.Z)(qi,[["render",function(e,t,n,o,a,i){return(0,l.wg)(),(0,l.iD)("div",{label:e.$t("settings.version.title")},[(0,l._)("div",ji,[(0,l._)("ul",Ii,[(0,l._)("li",null,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.version.backend_version")),1),(0,l._)("ul",Ai,[(0,l._)("li",null,[(0,l._)("a",{href:e.backendVersionLink,target:"_blank"},(0,h.zw)(e.backendVersion),9,Bi)])])]),(0,l._)("li",null,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.version.frontend_version")),1),(0,l._)("ul",Ei,[(0,l._)("li",null,[(0,l._)("a",{href:e.frontendVersionLink,target:"_blank"},(0,h.zw)(e.frontendVersion),9,Fi)])])])])])],8,Di)}]]);var Mi={class:"theme-tab"},Ri={class:"alert warning deprecation-warning"},Ni={class:"presets-container"},Hi={class:"save-load"},Yi={key:0,class:"theme-warning"},Ki={class:"alert warning"},Gi={class:"buttons"},Qi={class:"top"},Ji={class:"presets"},Xi={for:"preset-switcher",class:"select"},es=["value"],ts={class:"export-import"},ns={class:"save-load-options"},ls={class:"keep-option"},os={class:"keep-option"},as={class:"keep-option"},is={class:"keep-option"},ss={class:"keep-option"},rs=["label"],us={class:"tab-header"},cs={class:"tab-header-buttons"},ds={class:"color-item"},ps={class:"color-item"},ms={class:"color-item"},fs={class:"color-item"},hs=["label"],gs={class:"tab-header"},bs={class:"color-item"},ws={class:"color-item"},_s={class:"color-item"},vs={class:"color-item"},ks={class:"color-item"},ys={class:"color-item"},$s={class:"color-item"},Cs={class:"color-item"},Vs={class:"color-item"},Us={class:"color-item"},Ts={class:"color-item"},xs={class:"color-item"},zs={class:"color-item"},Os={class:"color-item"},Ls={class:"color-item"},Ws={class:"color-item"},Ps={class:"color-item"},Ss={class:"color-item"},Ds=["label"],js={class:"tab-header"},Is=["label"],As={class:"tab-header shadow-selector"},Bs={class:"select-container"},Es=["value"],Fs={class:"override"},qs={for:"override",class:"label"},Zs=(0,l._)("label",{class:"checkbox-label",for:"override"},null,-1),Ms={key:0},Rs=(0,l._)("code",null,"filter: drop-shadow()",-1),Ns=(0,l._)("code",null,"drop-shadow",-1),Hs=(0,l._)("code",null,"spread-radius",-1),Ys=(0,l._)("code",null,"inset",-1),Ks=(0,l._)("code",null,"box-shadow",-1),Gs=["label"],Qs={class:"tab-header"},Js={class:"apply-container"},Xs=["disabled"],er=n(21865),tr=n(25771),nr=n(44551),lr=n(40454),or=["for"],ar={class:"input color-input-field"},ir=["id","value","disabled"],sr={key:1,class:"transparentIndicator"},rr={key:3,class:"invalidIndicator"},ur={class:"nativeColor"},cr=["id","value","disabled"];A.vI.add(B.KTG);const dr={components:{Checkbox:H.Z},props:{name:{required:!0,type:String},label:{required:!0,type:String},modelValue:{required:!1,type:String,default:void 0},fallback:{required:!1,type:String,default:void 0},disabled:{required:!1,type:Boolean,default:!1},showOptionalTickbox:{required:!1,type:Boolean,default:!0}},emits:["update:modelValue"],computed:{present:function(){return void 0!==this.modelValue},validColor:function(){return(0,er.wK)(this.modelValue||this.fallback)},transparentColor:function(){return"transparent"===this.modelValue},computedColor:function(){return this.modelValue&&this.modelValue.startsWith("--")}}},pr=(0,F.Z)(dr,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("Checkbox"),r=(0,l.up)("FAIcon");return(0,l.wg)(),(0,l.iD)("div",{class:(0,h.C_)(["color-input style-control",{disabled:!i.present||n.disabled}])},[(0,l._)("label",{for:n.name,class:"label"},(0,h.zw)(n.label),9,or),void 0!==n.fallback&&n.showOptionalTickbox?((0,l.wg)(),(0,l.j4)(s,{key:0,"model-value":i.present,disabled:n.disabled,class:"opt","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("update:modelValue",void 0===n.modelValue?n.fallback:void 0)})},null,8,["model-value","disabled"])):(0,l.kq)("",!0),(0,l._)("div",ar,[(0,l._)("input",{id:n.name+"-t",class:"textColor unstyled",type:"text",value:n.modelValue||n.fallback,disabled:!i.present||n.disabled,onInput:t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t.target.value)})},null,40,ir),i.validColor?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"validIndicator",style:(0,h.j5)({backgroundColor:n.modelValue||n.fallback})},null,4)):i.transparentColor?((0,l.wg)(),(0,l.iD)("div",sr)):i.computedColor?((0,l.wg)(),(0,l.iD)("div",{key:2,class:"computedIndicator",style:(0,h.j5)({backgroundColor:n.fallback})},null,4)):((0,l.wg)(),(0,l.iD)("div",rr)),(0,l._)("label",ur,[(0,l.Wm)(r,{icon:"eye-dropper"}),(0,l._)("input",{id:n.name,class:"unstyled",type:"color",value:n.modelValue||n.fallback,disabled:!i.present||n.disabled,onInput:t[2]||(t[2]=function(t){return e.$emit("update:modelValue",t.target.value)})},null,40,cr)])])],2)}]]);var mr=["id","for"],fr=["id","aria-labelledby","checked"],hr=["for"],gr=["id","value","disabled","max","min","step"],br=["id","aria-labelledby","value","disabled","max","min","step"];const wr={props:["name","modelValue","fallback","disabled","label","max","min","step","hardMin","hardMax"],emits:["update:modelValue"],computed:{present:function(){return void 0!==this.modelValue}}},_r=(0,F.Z)(wr,[["render",function(e,t,n,o,a,i){return(0,l.wg)(),(0,l.iD)("div",{class:(0,h.C_)(["range-control style-control",{disabled:!i.present||n.disabled}])},[(0,l._)("label",{id:n.name+"-label",for:n.name,class:"label"},(0,h.zw)(n.label),9,mr),void 0!==n.fallback?((0,l.wg)(),(0,l.iD)("input",{key:0,id:n.name+"-o","aria-labelledby":n.name+"-label",class:"input -checkbox opt visible-for-screenreader-only",type:"checkbox",checked:i.present,onChange:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",i.present?void 0:n.fallback)})},null,40,fr)):(0,l.kq)("",!0),void 0!==n.fallback?((0,l.wg)(),(0,l.iD)("label",{key:1,class:"opt-l",for:n.name+"-o","aria-hidden":!0},null,8,hr)):(0,l.kq)("",!0),(0,l._)("input",{id:n.name,class:"input input-number",type:"range",value:n.modelValue||n.fallback,disabled:!i.present||n.disabled,max:n.max||n.hardMax||100,min:n.min||n.hardMin||0,step:n.step||1,onInput:t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t.target.value)})},null,40,gr),(0,l._)("input",{id:n.name+"-numeric",class:"input input-number",type:"number","aria-labelledby":n.name+"-label",value:n.modelValue||n.fallback,disabled:!i.present||n.disabled,max:n.hardMax,min:n.hardMin,step:n.step||1,onInput:t[2]||(t[2]=function(t){return e.$emit("update:modelValue",t.target.value)})},null,40,br)],2)}]]);var vr=["for"],kr=["id","value","disabled"];const yr={components:{Checkbox:H.Z},props:["name","modelValue","fallback","disabled"],emits:["update:modelValue"],computed:{present:function(){return void 0!==this.modelValue}}},$r=(0,F.Z)(yr,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("Checkbox");return(0,l.wg)(),(0,l.iD)("div",{class:(0,h.C_)(["opacity-control style-control",{disabled:!i.present||n.disabled}])},[(0,l._)("label",{for:n.name,class:"label"},(0,h.zw)(e.$t("settings.style.common.opacity")),9,vr),void 0!==n.fallback?((0,l.wg)(),(0,l.j4)(s,{key:0,"model-value":i.present,disabled:n.disabled,class:"opt","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("update:modelValue",i.present?void 0:n.fallback)})},null,8,["model-value","disabled"])):(0,l.kq)("",!0),(0,l._)("input",{id:n.name,class:"input input-number",type:"number",value:n.modelValue||n.fallback,disabled:!i.present||n.disabled,max:"1",min:"0",step:".05",onInput:t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t.target.value)})},null,40,kr)],2)}]]);var Cr={class:"shadow-preview-container"},Vr=["disabled"],Ur=["disabled"],Tr={class:"wrap"},xr=["disabled"],zr={class:"preview-window"},Or=["disabled"],Lr=["disabled"],Wr={class:"wrap"},Pr=["disabled"],Sr={class:"shadow-tweak"},Dr=["disabled"],jr=["value"],Ir=["disabled"],Ar=["disabled"],Br=["disabled"],Er=["disabled"],Fr=["disabled"],qr={for:"inset",class:"label"},Zr=["disabled"],Mr=(0,l._)("label",{class:"checkbox-label",for:"inset","aria-hidden":!0},null,-1),Rr=["disabled"],Nr={for:"spread",class:"label"},Hr=["disabled"],Yr=["disabled"],Kr=["disabled"],Gr={for:"spread",class:"label"},Qr=["disabled"],Jr=["disabled"],Xr=(0,l._)("code",null,"--variable,mod",-1);function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}A.vI.add(B.ptq,B.mTx,B.NBC,B.r8p);var tu=function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:0,y:0,blur:0,spread:0,inset:!1,color:"#000000",alpha:1},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})};const nu={props:["modelValue","fallback","ready"],emits:["update:modelValue"],data:function(){return{selectedId:0,cValue:(this.modelValue||this.fallback||[]).map(tu)}},components:{ColorInput:pr,OpacityInput:$r,Select:tn.Z},methods:{add:function(){this.cValue.push(tu(this.selected)),this.selectedId=this.cValue.length-1},del:function(){this.cValue.splice(this.selectedId,1),this.selectedId=0===this.cValue.length?void 0:Math.max(this.selectedId-1,0)},moveUp:function(){var e=this.cValue.splice(this.selectedId,1)[0];this.cValue.splice(this.selectedId-1,0,e),this.selectedId-=1},moveDn:function(){var e=this.cValue.splice(this.selectedId,1)[0];this.cValue.splice(this.selectedId+1,0,e),this.selectedId+=1}},beforeUpdate:function(){this.cValue=this.modelValue||this.fallback},computed:{anyShadows:function(){return this.cValue.length>0},anyShadowsFallback:function(){return this.fallback.length>0},selected:function(){return this.ready&&this.anyShadows?this.cValue[this.selectedId]:tu({})},currentFallback:function(){return this.ready&&this.anyShadowsFallback?this.fallback[this.selectedId]:tu({})},moveUpValid:function(){return this.ready&&this.selectedId>0},moveDnValid:function(){return this.ready&&this.selectedId<this.cValue.length-1},present:function(){return this.ready&&void 0!==this.cValue[this.selectedId]&&!this.usingFallback},usingFallback:function(){return void 0===this.modelValue},rgb:function(){return(0,er.wK)(this.selected.color)},style:function(){return this.ready?{boxShadow:(0,lr.Ot)(this.fallback)}:{}}}},lu=(0,F.Z)(nu,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("Select"),r=(0,l.up)("FAIcon"),u=(0,l.up)("ColorInput"),c=(0,l.up)("OpacityInput"),d=(0,l.up)("i18n-t");return(0,l.wg)(),(0,l.iD)("div",{class:(0,h.C_)(["shadow-control",{disabled:!e.present}])},[(0,l._)("div",Cr,[(0,l._)("div",{disabled:!e.present,class:"y-shift-control"},[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selected.y=t}),disabled:!e.present,class:"input input-number",type:"number"},null,8,Ur),[[fe.nr,e.selected.y]]),(0,l._)("div",Tr,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selected.y=t}),disabled:!e.present,class:"input input-range",type:"range",max:"20",min:"-20"},null,8,xr),[[fe.nr,e.selected.y]])])],8,Vr),(0,l._)("div",zr,[(0,l._)("div",{class:"preview-block",style:(0,h.j5)(e.style)},null,4)]),(0,l._)("div",{disabled:!e.present,class:"x-shift-control"},[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selected.x=t}),disabled:!e.present,class:"input input-number",type:"number"},null,8,Lr),[[fe.nr,e.selected.x]]),(0,l._)("div",Wr,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selected.x=t}),disabled:!e.present,class:"input input-range",type:"range",max:"20",min:"-20"},null,8,Pr),[[fe.nr,e.selected.x]])])],8,Or)]),(0,l._)("div",Sr,[(0,l._)("div",{disabled:e.usingFallback,class:"id-control style-control"},[(0,l.Wm)(s,{id:"shadow-switcher",modelValue:e.selectedId,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.selectedId=t}),class:"shadow-switcher",disabled:!e.ready||e.usingFallback},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cValue,(function(t,n){return(0,l.wg)(),(0,l.iD)("option",{key:n,value:n},(0,h.zw)(e.$t("settings.style.shadows.shadow_id",{value:n})),9,jr)})),128))]})),_:1},8,["modelValue","disabled"]),(0,l._)("button",{class:"btn button-default",disabled:!e.ready||!e.present,onClick:t[5]||(t[5]=function(){return e.del&&e.del.apply(e,arguments)})},[(0,l.Wm)(r,{"fixed-width":"",icon:"times"})],8,Ir),(0,l._)("button",{class:"btn button-default",disabled:!e.moveUpValid,onClick:t[6]||(t[6]=function(){return e.moveUp&&e.moveUp.apply(e,arguments)})},[(0,l.Wm)(r,{"fixed-width":"",icon:"chevron-up"})],8,Ar),(0,l._)("button",{class:"btn button-default",disabled:!e.moveDnValid,onClick:t[7]||(t[7]=function(){return e.moveDn&&e.moveDn.apply(e,arguments)})},[(0,l.Wm)(r,{"fixed-width":"",icon:"chevron-down"})],8,Br),(0,l._)("button",{class:"btn button-default",disabled:e.usingFallback,onClick:t[8]||(t[8]=function(){return e.add&&e.add.apply(e,arguments)})},[(0,l.Wm)(r,{"fixed-width":"",icon:"plus"})],8,Er)],8,Dr),(0,l._)("div",{disabled:!e.present,class:"inset-control style-control"},[(0,l._)("label",qr,(0,h.zw)(e.$t("settings.style.shadows.inset")),1),(0,l.wy)((0,l._)("input",{id:"inset","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.selected.inset=t}),disabled:!e.present,name:"inset",class:"input -checkbox input-inset visible-for-screenreader-only",type:"checkbox"},null,8,Zr),[[fe.e8,e.selected.inset]]),Mr],8,Fr),(0,l._)("div",{disabled:!e.present,class:"blur-control style-control"},[(0,l._)("label",Nr,(0,h.zw)(e.$t("settings.style.shadows.blur")),1),(0,l.wy)((0,l._)("input",{id:"blur","onUpdate:modelValue":t[10]||(t[10]=function(t){return e.selected.blur=t}),disabled:!e.present,name:"blur",class:"input input-range",type:"range",max:"20",min:"0"},null,8,Hr),[[fe.nr,e.selected.blur]]),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.selected.blur=t}),disabled:!e.present,class:"input input-number",type:"number",min:"0"},null,8,Yr),[[fe.nr,e.selected.blur]])],8,Rr),(0,l._)("div",{disabled:!e.present,class:"spread-control style-control"},[(0,l._)("label",Gr,(0,h.zw)(e.$t("settings.style.shadows.spread")),1),(0,l.wy)((0,l._)("input",{id:"spread","onUpdate:modelValue":t[12]||(t[12]=function(t){return e.selected.spread=t}),disabled:!e.present,name:"spread",class:"input input-range",type:"range",max:"20",min:"-20"},null,8,Qr),[[fe.nr,e.selected.spread]]),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.selected.spread=t}),disabled:!e.present,class:"input input-number",type:"number"},null,8,Jr),[[fe.nr,e.selected.spread]])],8,Kr),(0,l.Wm)(u,{modelValue:e.selected.color,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.selected.color=t}),disabled:!e.present,label:e.$t("settings.style.common.color"),fallback:e.currentFallback.color,"show-optional-tickbox":!1,name:"shadow"},null,8,["modelValue","disabled","label","fallback"]),(0,l.Wm)(c,{modelValue:e.selected.alpha,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.selected.alpha=t}),disabled:!e.present},null,8,["modelValue","disabled"]),(0,l.Wm)(d,{scope:"global",keypath:"settings.style.shadows.hintV3",tag:"p"},{default:(0,l.w5)((function(){return[Xr]})),_:1})])],2)}]]);var ou={key:0,class:"contrast-ratio"},au=["title"],iu={key:0},su={key:1},ru={key:2},uu=["title"],cu={key:0},du={key:1},pu={key:2};A.vI.add(B.OwZ,B.eHv,B.u8Q);const mu={props:{large:{required:!1,type:Boolean,default:!1},contrast:{required:!1,type:Object,default:function(){return{}}}},computed:{hint:function(){var e=this.contrast.aaa?"aaa":this.contrast.aa?"aa":"bad",t=this.$t("settings.style.common.contrast.level.".concat(e)),n=this.$t("settings.style.common.contrast.context.text"),l=this.contrast.text;return this.$t("settings.style.common.contrast.hint",{level:t,context:n,ratio:l})},hint_18pt:function(){var e=this.contrast.laaa?"aaa":this.contrast.laa?"aa":"bad",t=this.$t("settings.style.common.contrast.level.".concat(e)),n=this.$t("settings.style.common.contrast.context.18pt"),l=this.contrast.text;return this.$t("settings.style.common.contrast.hint",{level:t,context:n,ratio:l})}}},fu=(0,F.Z)(mu,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("FAIcon");return n.contrast?((0,l.wg)(),(0,l.iD)("span",ou,[(0,l._)("span",{title:i.hint,class:"rating"},[n.contrast.aaa?((0,l.wg)(),(0,l.iD)("span",iu,[(0,l.Wm)(s,{icon:"thumbs-up"})])):(0,l.kq)("",!0),!n.contrast.aaa&&n.contrast.aa?((0,l.wg)(),(0,l.iD)("span",su,[(0,l.Wm)(s,{icon:"adjust"})])):(0,l.kq)("",!0),n.contrast.aaa||n.contrast.aa?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",ru,[(0,l.Wm)(s,{icon:"exclamation-triangle"})]))],8,au),n.contrast&&n.large?((0,l.wg)(),(0,l.iD)("span",{key:0,class:"rating",title:i.hint_18pt},[n.contrast.laaa?((0,l.wg)(),(0,l.iD)("span",cu,[(0,l.Wm)(s,{icon:"thumbs-up"})])):(0,l.kq)("",!0),!n.contrast.laaa&&n.contrast.laa?((0,l.wg)(),(0,l.iD)("span",du,[(0,l.Wm)(s,{icon:"adjust"})])):(0,l.kq)("",!0),n.contrast.laaa||n.contrast.laa?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",pu,[(0,l.Wm)(s,{icon:"exclamation-triangle"})]))],8,uu)):(0,l.kq)("",!0)])):(0,l.kq)("",!0)}]]);function hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bu=["bg","fg","text","link","cRed","cGreen","cBlue","cOrange"].map((function(e){return e+"ColorLocal"}));const wu={data:function(){var e=this;return gu(gu(gu({themeV3Preview:[],themeImporter:(0,tr.i)({validator:this.importValidator,onImport:this.onImport,onImportFailure:this.onImportFailure}),themeExporter:(0,tr.M)({filename:"pleroma_theme",getExportedObject:function(){return e.exportedTheme}}),availableStyles:[],selected:"",selectedTheme:this.$store.getters.mergedConfig.theme,themeWarning:void 0,tempImportFile:void 0,engineVersion:0,previewTheme:{},shadowsInvalid:!0,colorsInvalid:!0,radiiInvalid:!0,keepColor:!1,keepShadows:!1,keepOpacity:!1,keepRoundness:!1,keepFonts:!1},Object.keys(nr.em).map((function(e){return[e,""]})).reduce((function(e,t){var n=(0,Oa.Z)(t,2),l=n[0],o=n[1];return gu(gu({},e),{},(0,S.Z)({},l+"ColorLocal",o))}),{})),Object.keys(lr.AQ).map((function(e){return[e,""]})).reduce((function(e,t){var n=(0,Oa.Z)(t,2),l=n[0],o=n[1];return gu(gu({},e),{},(0,S.Z)({},l+"OpacityLocal",o))}),{})),{},{shadowSelected:void 0,shadowsLocal:{},fontsLocal:{},btnRadiusLocal:"",inputRadiusLocal:"",checkboxRadiusLocal:"",panelRadiusLocal:"",avatarRadiusLocal:"",avatarAltRadiusLocal:"",attachmentRadiusLocal:"",tooltipRadiusLocal:"",chatMessageRadiusLocal:""})},created:function(){var e=this;(0,ei.RC)().then((function(e){return Promise.all(Object.entries(e).map((function(e){var t=(0,Oa.Z)(e,2),n=t[0];return t[1].then((function(e){return[n,e]}))})))})).then((function(e){return e.reduce((function(e,t){var n=(0,Oa.Z)(t,2),l=n[0],o=n[1];return o?gu(gu({},e),{},(0,S.Z)({},l,o)):e}),{})})).then((function(t){e.availableStyles=t}))},mounted:function(){this.loadThemeFromLocalStorage(),void 0===this.shadowSelected&&(this.shadowSelected=this.shadowsAvailable[0])},computed:{themeWarningHelp:function(){if(this.themeWarning){var e=this.$t,t="settings.style.switcher.help.",n=this.themeWarning,l=n.origin,o=n.themeEngineVersion,a=n.type,i=n.noActionsPossible;if("file"===l){if(2===o&&"wrong_version"===a)return e(t+"v2_imported");if(o>lr.we)return e(t+"future_version_imported")+" "+e(i?t+"snapshot_missing":t+"snapshot_present");if(o<lr.we)return e(t+"future_version_imported")+" "+e(i?t+"snapshot_missing":t+"snapshot_present")}else if("localStorage"===l){if("snapshot_source_mismatch"===a)return e(t+"snapshot_source_mismatch");if(2===o)return e(t+"upgraded_from_v2");if(o>lr.we)return e(t+"fe_downgraded")+" "+e(i?t+"migration_snapshot_ok":t+"migration_snapshot_gone");if(o<lr.we)return e(t+"fe_upgraded")+" "+e(i?t+"migration_snapshot_ok":t+"migration_snapshot_gone")}}},selectedVersion:function(){return Array.isArray(this.selectedTheme)?1:2},currentColors:function(){var e=this;return Object.keys(nr.em).map((function(t){return[t,e[t+"ColorLocal"]]})).reduce((function(e,t){var n=(0,Oa.Z)(t,2),l=n[0],o=n[1];return gu(gu({},e),{},(0,S.Z)({},l,o))}),{})},currentOpacity:function(){var e=this;return Object.keys(lr.AQ).map((function(t){return[t,e[t+"OpacityLocal"]]})).reduce((function(e,t){var n=(0,Oa.Z)(t,2),l=n[0],o=n[1];return gu(gu({},e),{},(0,S.Z)({},l,o))}),{})},currentRadii:function(){return{btn:this.btnRadiusLocal,input:this.inputRadiusLocal,checkbox:this.checkboxRadiusLocal,panel:this.panelRadiusLocal,avatar:this.avatarRadiusLocal,avatarAlt:this.avatarAltRadiusLocal,tooltip:this.tooltipRadiusLocal,attachment:this.attachmentRadiusLocal,chatMessage:this.chatMessageRadiusLocal}},previewContrast:function(){try{if(!this.previewTheme.colors.bg)return{};var e=this.previewTheme.colors,t=this.previewTheme.opacity;if(!e.bg)return{};var n=Object.entries(e).reduce((function(e,t){var n,l=(0,Oa.Z)(t,2),o=l[0],a=l[1];return gu(gu({},e),{},(0,S.Z)({},o,(n=a).startsWith("--")||"transparent"===n?n:(0,er.wK)(n)))}),{}),l=Object.entries(nr.em).reduce((function(e,l){var o=(0,Oa.Z)(l,2),a=o[0],i=o[1],s="text"===a||"link"===a;if(!(s||"object"===(0,_o.Z)(i)&&null!==i&&i.textColor))return e;var r=s?{layer:"bg"}:i,u=r.layer,c=r.variant,d=c||u,p=(0,lr.AV)(d),m=[a].concat((0,Me.Z)("bg"===d?["cRed","cGreen","cBlue","cOrange"]:[])),f=(0,lr.xb)(u,c||u,p,n,t);return f.flat().some((function(e){return null==e}))?e:gu(gu({},e),m.reduce((function(e,t){var l=s?"bg"+t[0].toUpperCase()+t.slice(1):t;return gu(gu({},e),{},(0,S.Z)({},l,(0,er.aj)(n[t],f,n[t])))}),{}))}),{});return Object.entries(l).reduce((function(e,t){var n,l=(0,Oa.Z)(t,2),o=l[0],a=l[1];return e[o]={text:(n=a).toPrecision(3)+":1",aa:n>=4.5,aaa:n>=7,laa:n>=3,laaa:n>=4.5},e}),{})}catch(e){return console.warn("Failure computing contrasts",e),{}}},shadowsAvailable:function(){return Object.keys(lr.vp).sort()},currentShadowOverriden:{get:function(){return!!this.currentShadow},set:function(e){e?this.shadowsLocal[this.shadowSelected]=this.currentShadowFallback.map((function(e){return Object.assign({},e)})):delete this.shadowsLocal[this.shadowSelected]}},currentShadowFallback:function(){return(this.previewTheme.shadows||{})[this.shadowSelected]},currentShadow:{get:function(){return this.shadowsLocal[this.shadowSelected]},set:function(e){this.shadowsLocal[this.shadowSelected]=e}},themeValid:function(){return!this.shadowsInvalid&&!this.colorsInvalid&&!this.radiiInvalid},exportedTheme:function(){var e=!(this.keepFonts||this.keepShadows||this.keepOpacity||this.keepRoundness||this.keepColor),t={themeEngineVersion:lr.we};return(this.keepFonts||e)&&(t.fonts=this.fontsLocal),(this.keepShadows||e)&&(t.shadows=this.shadowsLocal),(this.keepOpacity||e)&&(t.opacity=this.currentOpacity),(this.keepColor||e)&&(t.colors=this.currentColors),(this.keepRoundness||e)&&(t.radii=this.currentRadii),{_pleroma_theme_version:2,theme:gu({themeEngineVersion:lr.we},this.previewTheme),source:t}},isActive:function(){var e=this.$parent;return!!e&&e.isActive("theme")}},components:{ColorInput:pr,OpacityInput:$r,RangeInput:_r,ContrastRatio:fu,ShadowControl:lu,FontControl:Ja,TabSwitcher:f.Z,Preview:Oi,Checkbox:H.Z,Select:tn.Z},methods:{loadTheme:function(e,t){var n=e.theme,l=e.source,o=e._pleroma_theme_version,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.dismissWarning(),!l&&!n)throw new Error("Can't load theme: empty");var i="localStorage"!==t||n.colors?o:"l1",s=(n||{}).themeEngineVersion,r=(l||{}).themeEngineVersion||2,u=r===lr.we,c=void 0!==n&&void 0!==l&&r!==s,d=l&&a||!n;u&&!c||d||"l1"===i||"defaults"===t||(c&&"localStorage"===t?this.themeWarning={origin:t,themeEngineVersion:r,type:"snapshot_source_mismatch"}:n?u||(this.themeWarning={origin:t,noActionsPossible:!l,themeEngineVersion:r,type:"wrong_version"}):this.themeWarning={origin:t,noActionsPossible:!0,themeEngineVersion:r,type:"no_snapshot_old_version"}),this.normalizeLocalState(n,i,l,d)},forceLoadLocalStorage:function(){this.loadThemeFromLocalStorage(!0)},dismissWarning:function(){this.themeWarning=void 0,this.tempImportFile=void 0},forceLoad:function(){switch(this.themeWarning.origin){case"localStorage":this.loadThemeFromLocalStorage(!0);break;case"file":this.onImport(this.tempImportFile,!0)}this.dismissWarning()},forceSnapshot:function(){switch(this.themeWarning.origin){case"localStorage":this.loadThemeFromLocalStorage(!1,!0);break;case"file":console.error("Forcing snapshot from file is not supported yet")}this.dismissWarning()},loadThemeFromLocalStorage:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.$store.getters.mergedConfig,l=n.customTheme,o=n.customThemeSource;l||o?this.loadTheme({theme:l,source:t?l:o},"localStorage",e):this.loadTheme(this.$store.state.instance.themeData,"defaults",e)},setCustomTheme:function(){this.$store.dispatch("setThemeV2",{customTheme:gu({ignore:!0,themeFileVersion:this.selectedVersion,themeEngineVersion:lr.we},this.previewTheme),customThemeSource:{themeFileVersion:this.selectedVersion,themeEngineVersion:lr.we,shadows:this.shadowsLocal,fonts:this.fontsLocal,opacity:this.currentOpacity,colors:this.currentColors,radii:this.currentRadii}})},updatePreviewColors:function(){var e=(0,lr.LP)({opacity:this.currentOpacity,colors:this.currentColors});this.previewTheme.colors=e.theme.colors,this.previewTheme.opacity=e.theme.opacity},updatePreviewShadows:function(){this.previewTheme.shadows=(0,lr.H2)({shadows:this.shadowsLocal,opacity:this.previewTheme.opacity,themeEngineVersion:this.engineVersion},this.previewTheme.colors,(0,er.ov)(this.previewTheme.colors.bg)<.5?1:-1).theme.shadows},importTheme:function(){this.themeImporter.importData()},exportTheme:function(){this.themeExporter.exportData()},onImport:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.tempImportFile=e,this.loadTheme(e,"file",t)},onImportFailure:function(e){this.$store.dispatch("pushGlobalNotice",{messageKey:"settings.invalid_theme_imported",level:"error"})},importValidator:function(e){var t=e._pleroma_theme_version;return t>=1||t<=2},clearAll:function(){this.loadThemeFromLocalStorage()},clearV1:function(){var e=this;Object.keys(this.$data).filter((function(e){return e.endsWith("ColorLocal")||e.endsWith("OpacityLocal")})).filter((function(e){return!bu.includes(e)})).forEach((function(t){e.$data[t]=void 0}))},clearRoundness:function(){var e=this;Object.keys(this.$data).filter((function(e){return e.endsWith("RadiusLocal")})).forEach((function(t){e.$data[t]=void 0}))},clearOpacity:function(){var e=this;Object.keys(this.$data).filter((function(e){return e.endsWith("OpacityLocal")})).forEach((function(t){e.$data[t]=void 0}))},clearShadows:function(){this.shadowsLocal={}},clearFonts:function(){this.fontsLocal={}},normalizeLocalState:function(e){var t,n=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;void 0!==o&&(arguments.length>3&&void 0!==arguments[3]&&arguments[3]||(null==o?void 0:o.themeEngineVersion)===lr.we)?(t=o,l=o.themeEngineVersion):t=e;var a=t.radii||t,i=t.opacity,s=t.shadows||{},r=t.fonts||{},u=t.themeEngineVersion?t.colors||t:(0,lr.dE)(t.colors||t);if(0===l&&(t.version&&(l=t.version),void 0===u.text&&void 0!==u.fg&&(l=1),void 0!==u.text&&void 0!==u.fg&&(l=2)),this.engineVersion=l,1===l&&(this.fgColorLocal=(0,er.CO)(u.btn),this.textColorLocal=(0,er.CO)(u.fg)),!this.keepColor){this.clearV1();var c=new Set(1!==l?Object.keys(nr.em):[]);1!==l&&"l1"!==l||c.add("bg").add("link").add("cRed").add("cBlue").add("cGreen").add("cOrange"),c.forEach((function(e){var t=u[e],l=(0,er.CO)(u[e]);n[e+"ColorLocal"]="#aN"===l?t:l}))}i&&!this.keepOpacity&&(this.clearOpacity(),Object.entries(i).forEach((function(e){var t=(0,Oa.Z)(e,2),l=t[0],o=t[1];null==o||Number.isNaN(o)||(n[l+"OpacityLocal"]=o)}))),this.keepRoundness||(this.clearRoundness(),Object.entries(a).forEach((function(e){var t=(0,Oa.Z)(e,2),l=t[0],o=t[1],a=l.endsWith("Radius")?l.split("Radius")[0]:l;n[a+"RadiusLocal"]=o}))),this.keepShadows||(this.clearShadows(),this.shadowsLocal=2===l?(0,lr.l9)(s,this.previewTheme.opacity):s,this.updatePreviewColors(),this.updatePreviewShadows(),this.shadowSelected=this.shadowsAvailable[0]),this.keepFonts||(this.clearFonts(),this.fontsLocal=r)},updateTheme3Preview:function(){var e=(0,ti.FE)(this.previewTheme),t=(0,ni.S)({inputRuleset:e,ultimateBackgroundColor:"#000000",liteMode:!0});this.themeV3Preview=(0,li.mo)((0,li.qQ)(t.eager),"#theme-preview").join("\n")}},watch:{currentRadii:function(){try{this.previewTheme.radii=(0,lr.lD)({radii:this.currentRadii}).theme.radii,this.radiiInvalid=!1}catch(e){this.radiiInvalid=!0,console.warn(e)}},shadowsLocal:{handler:function(){try{this.updatePreviewShadows(),this.shadowsInvalid=!1}catch(e){this.shadowsInvalid=!0,console.warn(e)}},deep:!0},fontsLocal:{handler:function(){try{this.previewTheme.fonts=(0,lr.m)({fonts:this.fontsLocal}).theme.fonts,this.fontsInvalid=!1}catch(e){this.fontsInvalid=!0,console.warn(e)}},deep:!0},currentColors:function(){try{this.updatePreviewColors(),this.colorsInvalid=!1}catch(e){this.colorsInvalid=!0,console.warn(e)}},currentOpacity:function(){try{this.updatePreviewColors()}catch(e){console.warn(e)}},selected:function(){var e=this;this.selectedTheme=Object.entries(this.availableStyles).find((function(t){var n=(0,Oa.Z)(t,2),l=(n[0],n[1]);return Array.isArray(l)?l[0]===e.selected:l.name===e.selected}))[1]},selectedTheme:function(){this.dismissWarning(),1===this.selectedVersion?(this.keepRoundness||this.clearRoundness(),this.keepShadows||this.clearShadows(),this.keepOpacity||this.clearOpacity(),this.keepColor||(this.clearV1(),this.bgColorLocal=this.selectedTheme[1],this.fgColorLocal=this.selectedTheme[2],this.textColorLocal=this.selectedTheme[3],this.linkColorLocal=this.selectedTheme[4],this.cRedColorLocal=this.selectedTheme[5],this.cGreenColorLocal=this.selectedTheme[6],this.cBlueColorLocal=this.selectedTheme[7],this.cOrangeColorLocal=this.selectedTheme[8])):this.selectedVersion>=2&&this.normalizeLocalState(this.selectedTheme.theme,2,this.selectedTheme.source)}}},_u=(0,F.Z)(wu,[["render",function(e,t,n,o,a,i){var s=(0,l.up)("Select"),r=(0,l.up)("Checkbox"),u=(0,l.up)("preview"),c=(0,l.up)("ColorInput"),d=(0,l.up)("OpacityInput"),p=(0,l.up)("ContrastRatio"),m=(0,l.up)("RangeInput"),f=(0,l.up)("ShadowControl"),g=(0,l.up)("i18n-t"),b=(0,l.up)("FontControl"),w=(0,l.up)("tab-switcher");return(0,l.wg)(),(0,l.iD)("div",Mi,[(0,l._)("div",Ri,(0,h.zw)(e.$t("settings.style.themes2_outdated")),1),(0,l._)("div",Ni,[(0,l._)("div",Hi,[e.themeWarning?((0,l.wg)(),(0,l.iD)("div",Yi,[(0,l._)("div",Ki,(0,h.zw)(e.themeWarningHelp),1),(0,l._)("div",Gi,["snapshot_source_mismatch"===e.themeWarning.type?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("button",{class:"btn button-default",onClick:t[0]||(t[0]=function(){return e.forceLoad&&e.forceLoad.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.use_source")),1),(0,l._)("button",{class:"btn button-default",onClick:t[1]||(t[1]=function(){return e.forceSnapshot&&e.forceSnapshot.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.use_snapshot")),1)],64)):e.themeWarning.noActionsPossible?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn button-default",onClick:t[2]||(t[2]=function(){return e.dismissWarning&&e.dismissWarning.apply(e,arguments)})},(0,h.zw)(e.$t("general.dismiss")),1)):((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l._)("button",{class:"btn button-default",onClick:t[3]||(t[3]=function(){return e.forceLoad&&e.forceLoad.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.load_theme")),1),(0,l._)("button",{class:"btn button-default",onClick:t[4]||(t[4]=function(){return e.dismissWarning&&e.dismissWarning.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.keep_as_is")),1)],64))])])):(0,l.kq)("",!0),(0,l._)("div",Qi,[(0,l._)("div",Ji,[(0,l.Uk)((0,h.zw)(e.$t("settings.presets"))+" ",1),(0,l._)("label",Xi,[(0,l.Wm)(s,{id:"preset-switcher",modelValue:e.selected,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.selected=t}),class:"preset-switcher"},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.availableStyles,(function(e){return(0,l.wg)(),(0,l.iD)("option",{key:e.name,value:e.name||e[0],style:(0,h.j5)({backgroundColor:e[1]||(e.theme||e.source).colors.bg,color:e[3]||(e.theme||e.source).colors.text})},(0,h.zw)(e[0]||e.name),13,es)})),128))]})),_:1},8,["modelValue"])])]),(0,l._)("div",ts,[(0,l._)("button",{class:"btn button-default",onClick:t[6]||(t[6]=function(){return e.importTheme&&e.importTheme.apply(e,arguments)})},(0,h.zw)(e.$t("settings.import_theme")),1),(0,l._)("button",{class:"btn button-default",onClick:t[7]||(t[7]=function(){return e.exportTheme&&e.exportTheme.apply(e,arguments)})},(0,h.zw)(e.$t("settings.export_theme")),1)])])]),(0,l._)("div",ns,[(0,l._)("span",ls,[(0,l.Wm)(r,{modelValue:e.keepColor,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.keepColor=t})},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.style.switcher.keep_color")),1)]})),_:1},8,["modelValue"])]),(0,l._)("span",os,[(0,l.Wm)(r,{modelValue:e.keepShadows,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.keepShadows=t})},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.style.switcher.keep_shadows")),1)]})),_:1},8,["modelValue"])]),(0,l._)("span",as,[(0,l.Wm)(r,{modelValue:e.keepOpacity,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.keepOpacity=t})},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.style.switcher.keep_opacity")),1)]})),_:1},8,["modelValue"])]),(0,l._)("span",is,[(0,l.Wm)(r,{modelValue:e.keepRoundness,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.keepRoundness=t})},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.style.switcher.keep_roundness")),1)]})),_:1},8,["modelValue"])]),(0,l._)("span",ss,[(0,l.Wm)(r,{modelValue:e.keepFonts,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.keepFonts=t})},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,h.zw)(e.$t("settings.style.switcher.keep_fonts")),1)]})),_:1},8,["modelValue"])]),(0,l._)("p",null,(0,h.zw)(e.$t("settings.style.switcher.save_load_hint")),1)])]),((0,l.wg)(),(0,l.j4)((0,l.LL)("style"),{innerHTML:e.themeV3Preview},null,8,["innerHTML"])),(0,l.Wm)(u,{id:"theme-preview"}),(0,l._)("div",null,[(0,l._)("button",{class:"btn button-default",onClick:t[13]||(t[13]=function(){return e.updateTheme3Preview&&e.updateTheme3Preview.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.update_preview")),1)]),((0,l.wg)(),(0,l.j4)(l.Ob,null,[(0,l.Wm)(w,{key:"style-tweak"},{default:(0,l.w5)((function(){var n,o,a,i,r,u,w,_,v,k,y,$,C,V,U,T,x,z,O,L,W,P,S,D,j,I,A,B,E,F,q,Z,M,R,N,H,Y,K,G,Q,J,X,ee,te,ne,le,oe,ae,ie,se,re,ue,ce,de,pe,me,he,ge,be,we,_e,ve,ke,ye,$e,Ce,Ve,Ue,Te,xe,ze,Oe,Le,We,Pe,Se,De,je,Ie,Ae,Be,Ee,Fe,qe,Ze,Me,Re,Ne,He,Ye,Ke,Ge,Qe;return[(0,l._)("div",{label:e.$t("settings.style.common_colors._tab_label"),class:"color-container"},[(0,l._)("div",us,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.theme_help")),1),(0,l._)("div",cs,[(0,l._)("button",{class:"btn button-default",onClick:t[14]||(t[14]=function(){return e.clearOpacity&&e.clearOpacity.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.clear_opacity")),1),(0,l._)("button",{class:"btn button-default",onClick:t[15]||(t[15]=function(){return e.clearV1&&e.clearV1.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.clear_all")),1)])]),(0,l._)("p",null,(0,h.zw)(e.$t("settings.theme_help_v2_1")),1),(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.common_colors.main")),1),(0,l._)("div",ds,[(0,l.Wm)(c,{modelValue:e.bgColorLocal,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.bgColorLocal=t}),name:"bgColor",label:e.$t("settings.background")},null,8,["modelValue","label"]),(0,l.Wm)(d,{modelValue:e.bgOpacityLocal,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.bgOpacityLocal=t}),name:"bgOpacity",fallback:null===(n=e.previewTheme.opacity)||void 0===n?void 0:n.bg},null,8,["modelValue","fallback"]),(0,l.Wm)(c,{modelValue:e.textColorLocal,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.textColorLocal=t}),name:"textColor",label:e.$t("settings.text")},null,8,["modelValue","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.bgText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.accentColorLocal,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.accentColorLocal=t}),name:"accentColor",fallback:null===(o=e.previewTheme.colors)||void 0===o?void 0:o.link,label:e.$t("settings.accent"),"show-optional-tickbox":void 0!==e.linkColorLocal},null,8,["modelValue","fallback","label","show-optional-tickbox"]),(0,l.Wm)(c,{modelValue:e.linkColorLocal,"onUpdate:modelValue":t[20]||(t[20]=function(t){return e.linkColorLocal=t}),name:"linkColor",fallback:null===(a=e.previewTheme.colors)||void 0===a?void 0:a.accent,label:e.$t("settings.links"),"show-optional-tickbox":void 0!==e.accentColorLocal},null,8,["modelValue","fallback","label","show-optional-tickbox"]),(0,l.Wm)(p,{contrast:e.previewContrast.bgLink},null,8,["contrast"])]),(0,l._)("div",ps,[(0,l.Wm)(c,{modelValue:e.fgColorLocal,"onUpdate:modelValue":t[21]||(t[21]=function(t){return e.fgColorLocal=t}),name:"fgColor",label:e.$t("settings.foreground")},null,8,["modelValue","label"]),(0,l.Wm)(c,{modelValue:e.fgTextColorLocal,"onUpdate:modelValue":t[22]||(t[22]=function(t){return e.fgTextColorLocal=t}),name:"fgTextColor",label:e.$t("settings.text"),fallback:null===(i=e.previewTheme.colors)||void 0===i?void 0:i.fgText},null,8,["modelValue","label","fallback"]),(0,l.Wm)(c,{modelValue:e.fgLinkColorLocal,"onUpdate:modelValue":t[23]||(t[23]=function(t){return e.fgLinkColorLocal=t}),name:"fgLinkColor",label:e.$t("settings.links"),fallback:null===(r=e.previewTheme.colors)||void 0===r?void 0:r.fgLink},null,8,["modelValue","label","fallback"]),(0,l._)("p",null,(0,h.zw)(e.$t("settings.style.common_colors.foreground_hint")),1)]),(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.common_colors.rgbo")),1),(0,l._)("div",ms,[(0,l.Wm)(c,{modelValue:e.cRedColorLocal,"onUpdate:modelValue":t[24]||(t[24]=function(t){return e.cRedColorLocal=t}),name:"cRedColor",label:e.$t("settings.cRed")},null,8,["modelValue","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.bgCRed},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.cBlueColorLocal,"onUpdate:modelValue":t[25]||(t[25]=function(t){return e.cBlueColorLocal=t}),name:"cBlueColor",label:e.$t("settings.cBlue")},null,8,["modelValue","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.bgCBlue},null,8,["contrast"])]),(0,l._)("div",fs,[(0,l.Wm)(c,{modelValue:e.cGreenColorLocal,"onUpdate:modelValue":t[26]||(t[26]=function(t){return e.cGreenColorLocal=t}),name:"cGreenColor",label:e.$t("settings.cGreen")},null,8,["modelValue","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.bgCGreen},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.cOrangeColorLocal,"onUpdate:modelValue":t[27]||(t[27]=function(t){return e.cOrangeColorLocal=t}),name:"cOrangeColor",label:e.$t("settings.cOrange")},null,8,["modelValue","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.bgCOrange},null,8,["contrast"])]),(0,l._)("p",null,(0,h.zw)(e.$t("settings.theme_help_v2_2")),1)],8,rs),(0,l._)("div",{label:e.$t("settings.style.advanced_colors._tab_label"),class:"color-container"},[(0,l._)("div",gs,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.theme_help")),1),(0,l._)("button",{class:"btn button-default",onClick:t[28]||(t[28]=function(){return e.clearOpacity&&e.clearOpacity.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.clear_opacity")),1),(0,l._)("button",{class:"btn button-default",onClick:t[29]||(t[29]=function(){return e.clearV1&&e.clearV1.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.clear_all")),1)]),(0,l._)("div",bs,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.post")),1),(0,l.Wm)(c,{modelValue:e.postLinkColorLocal,"onUpdate:modelValue":t[30]||(t[30]=function(t){return e.postLinkColorLocal=t}),name:"postLinkColor",fallback:null===(u=e.previewTheme.colors)||void 0===u?void 0:u.accent,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.postLink},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.postGreentextColorLocal,"onUpdate:modelValue":t[31]||(t[31]=function(t){return e.postGreentextColorLocal=t}),name:"postGreentextColor",fallback:null===(w=e.previewTheme.colors)||void 0===w?void 0:w.cGreen,label:e.$t("settings.greentext")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.postGreentext},null,8,["contrast"]),(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.alert")),1),(0,l.Wm)(c,{modelValue:e.alertErrorColorLocal,"onUpdate:modelValue":t[32]||(t[32]=function(t){return e.alertErrorColorLocal=t}),name:"alertError",label:e.$t("settings.style.advanced_colors.alert_error"),fallback:null===(_=e.previewTheme.colors)||void 0===_?void 0:_.alertError},null,8,["modelValue","label","fallback"]),(0,l.Wm)(c,{modelValue:e.alertErrorTextColorLocal,"onUpdate:modelValue":t[33]||(t[33]=function(t){return e.alertErrorTextColorLocal=t}),name:"alertErrorText",label:e.$t("settings.text"),fallback:null===(v=e.previewTheme.colors)||void 0===v?void 0:v.alertErrorText},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.alertErrorText,large:""},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.alertWarningColorLocal,"onUpdate:modelValue":t[34]||(t[34]=function(t){return e.alertWarningColorLocal=t}),name:"alertWarning",label:e.$t("settings.style.advanced_colors.alert_warning"),fallback:null===(k=e.previewTheme.colors)||void 0===k?void 0:k.alertWarning},null,8,["modelValue","label","fallback"]),(0,l.Wm)(c,{modelValue:e.alertWarningTextColorLocal,"onUpdate:modelValue":t[35]||(t[35]=function(t){return e.alertWarningTextColorLocal=t}),name:"alertWarningText",label:e.$t("settings.text"),fallback:null===(y=e.previewTheme.colors)||void 0===y?void 0:y.alertWarningText},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.alertWarningText,large:""},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.alertNeutralColorLocal,"onUpdate:modelValue":t[36]||(t[36]=function(t){return e.alertNeutralColorLocal=t}),name:"alertNeutral",label:e.$t("settings.style.advanced_colors.alert_neutral"),fallback:null===($=e.previewTheme.colors)||void 0===$?void 0:$.alertNeutral},null,8,["modelValue","label","fallback"]),(0,l.Wm)(c,{modelValue:e.alertNeutralTextColorLocal,"onUpdate:modelValue":t[37]||(t[37]=function(t){return e.alertNeutralTextColorLocal=t}),name:"alertNeutralText",label:e.$t("settings.text"),fallback:null===(C=e.previewTheme.colors)||void 0===C?void 0:C.alertNeutralText},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.alertNeutralText,large:""},null,8,["contrast"]),(0,l.Wm)(d,{modelValue:e.alertOpacityLocal,"onUpdate:modelValue":t[38]||(t[38]=function(t){return e.alertOpacityLocal=t}),name:"alertOpacity",fallback:null===(V=e.previewTheme.opacity)||void 0===V?void 0:V.alert},null,8,["modelValue","fallback"])]),(0,l._)("div",ws,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.badge")),1),(0,l.Wm)(c,{modelValue:e.badgeNotificationColorLocal,"onUpdate:modelValue":t[39]||(t[39]=function(t){return e.badgeNotificationColorLocal=t}),name:"badgeNotification",label:e.$t("settings.style.advanced_colors.badge_notification"),fallback:null===(U=e.previewTheme.colors)||void 0===U?void 0:U.badgeNotification},null,8,["modelValue","label","fallback"]),(0,l.Wm)(c,{modelValue:e.badgeNotificationTextColorLocal,"onUpdate:modelValue":t[40]||(t[40]=function(t){return e.badgeNotificationTextColorLocal=t}),name:"badgeNotificationText",label:e.$t("settings.text"),fallback:null===(T=e.previewTheme.colors)||void 0===T?void 0:T.badgeNotificationText},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.badgeNotificationText,large:""},null,8,["contrast"])]),(0,l._)("div",_s,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.panel_header")),1),(0,l.Wm)(c,{modelValue:e.panelColorLocal,"onUpdate:modelValue":t[41]||(t[41]=function(t){return e.panelColorLocal=t}),name:"panelColor",fallback:null===(x=e.previewTheme.colors)||void 0===x?void 0:x.panel,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(d,{modelValue:e.panelOpacityLocal,"onUpdate:modelValue":t[42]||(t[42]=function(t){return e.panelOpacityLocal=t}),name:"panelOpacity",fallback:null===(z=e.previewTheme.opacity)||void 0===z?void 0:z.panel,disabled:"transparent"===e.panelColorLocal},null,8,["modelValue","fallback","disabled"]),(0,l.Wm)(c,{modelValue:e.panelTextColorLocal,"onUpdate:modelValue":t[43]||(t[43]=function(t){return e.panelTextColorLocal=t}),name:"panelTextColor",fallback:null===(O=e.previewTheme.colors)||void 0===O?void 0:O.panelText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.panelText,large:""},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.panelLinkColorLocal,"onUpdate:modelValue":t[44]||(t[44]=function(t){return e.panelLinkColorLocal=t}),name:"panelLinkColor",fallback:null===(L=e.previewTheme.colors)||void 0===L?void 0:L.panelLink,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.panelLink,large:""},null,8,["contrast"])]),(0,l._)("div",vs,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.top_bar")),1),(0,l.Wm)(c,{modelValue:e.topBarColorLocal,"onUpdate:modelValue":t[45]||(t[45]=function(t){return e.topBarColorLocal=t}),name:"topBarColor",fallback:null===(W=e.previewTheme.colors)||void 0===W?void 0:W.topBar,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.topBarTextColorLocal,"onUpdate:modelValue":t[46]||(t[46]=function(t){return e.topBarTextColorLocal=t}),name:"topBarTextColor",fallback:null===(P=e.previewTheme.colors)||void 0===P?void 0:P.topBarText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.topBarText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.topBarLinkColorLocal,"onUpdate:modelValue":t[47]||(t[47]=function(t){return e.topBarLinkColorLocal=t}),name:"topBarLinkColor",fallback:null===(S=e.previewTheme.colors)||void 0===S?void 0:S.topBarLink,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.topBarLink},null,8,["contrast"])]),(0,l._)("div",ks,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.inputs")),1),(0,l.Wm)(c,{modelValue:e.inputColorLocal,"onUpdate:modelValue":t[48]||(t[48]=function(t){return e.inputColorLocal=t}),name:"inputColor",fallback:null===(D=e.previewTheme.colors)||void 0===D?void 0:D.input,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(d,{modelValue:e.inputOpacityLocal,"onUpdate:modelValue":t[49]||(t[49]=function(t){return e.inputOpacityLocal=t}),name:"inputOpacity",fallback:null===(j=e.previewTheme.opacity)||void 0===j?void 0:j.input,disabled:"transparent"===e.inputColorLocal},null,8,["modelValue","fallback","disabled"]),(0,l.Wm)(c,{modelValue:e.inputTextColorLocal,"onUpdate:modelValue":t[50]||(t[50]=function(t){return e.inputTextColorLocal=t}),name:"inputTextColor",fallback:null===(I=e.previewTheme.colors)||void 0===I?void 0:I.inputText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.inputText},null,8,["contrast"])]),(0,l._)("div",ys,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.buttons")),1),(0,l.Wm)(c,{modelValue:e.btnColorLocal,"onUpdate:modelValue":t[51]||(t[51]=function(t){return e.btnColorLocal=t}),name:"btnColor",fallback:null===(A=e.previewTheme.colors)||void 0===A?void 0:A.btn,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(d,{modelValue:e.btnOpacityLocal,"onUpdate:modelValue":t[52]||(t[52]=function(t){return e.btnOpacityLocal=t}),name:"btnOpacity",fallback:null===(B=e.previewTheme.opacity)||void 0===B?void 0:B.btn,disabled:"transparent"===e.btnColorLocal},null,8,["modelValue","fallback","disabled"]),(0,l.Wm)(c,{modelValue:e.btnTextColorLocal,"onUpdate:modelValue":t[53]||(t[53]=function(t){return e.btnTextColorLocal=t}),name:"btnTextColor",fallback:null===(E=e.previewTheme.colors)||void 0===E?void 0:E.btnText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.btnText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.btnPanelTextColorLocal,"onUpdate:modelValue":t[54]||(t[54]=function(t){return e.btnPanelTextColorLocal=t}),name:"btnPanelTextColor",fallback:null===(F=e.previewTheme.colors)||void 0===F?void 0:F.btnPanelText,label:e.$t("settings.style.advanced_colors.panel_header")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.btnPanelText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.btnTopBarTextColorLocal,"onUpdate:modelValue":t[55]||(t[55]=function(t){return e.btnTopBarTextColorLocal=t}),name:"btnTopBarTextColor",fallback:null===(q=e.previewTheme.colors)||void 0===q?void 0:q.btnTopBarText,label:e.$t("settings.style.advanced_colors.top_bar")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.btnTopBarText},null,8,["contrast"]),(0,l._)("h5",null,(0,h.zw)(e.$t("settings.style.advanced_colors.pressed")),1),(0,l.Wm)(c,{modelValue:e.btnPressedColorLocal,"onUpdate:modelValue":t[56]||(t[56]=function(t){return e.btnPressedColorLocal=t}),name:"btnPressedColor",fallback:null===(Z=e.previewTheme.colors)||void 0===Z?void 0:Z.btnPressed,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.btnPressedTextColorLocal,"onUpdate:modelValue":t[57]||(t[57]=function(t){return e.btnPressedTextColorLocal=t}),name:"btnPressedTextColor",fallback:null===(M=e.previewTheme.colors)||void 0===M?void 0:M.btnPressedText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.btnPressedText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.btnPressedPanelTextColorLocal,"onUpdate:modelValue":t[58]||(t[58]=function(t){return e.btnPressedPanelTextColorLocal=t}),name:"btnPressedPanelTextColor",fallback:null===(R=e.previewTheme.colors)||void 0===R?void 0:R.btnPressedPanelText,label:e.$t("settings.style.advanced_colors.panel_header")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.btnPressedPanelText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.btnPressedTopBarTextColorLocal,"onUpdate:modelValue":t[59]||(t[59]=function(t){return e.btnPressedTopBarTextColorLocal=t}),name:"btnPressedTopBarTextColor",fallback:null===(N=e.previewTheme.colors)||void 0===N?void 0:N.btnPressedTopBarText,label:e.$t("settings.style.advanced_colors.top_bar")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.btnPressedTopBarText},null,8,["contrast"]),(0,l._)("h5",null,(0,h.zw)(e.$t("settings.style.advanced_colors.disabled")),1),(0,l.Wm)(c,{modelValue:e.btnDisabledColorLocal,"onUpdate:modelValue":t[60]||(t[60]=function(t){return e.btnDisabledColorLocal=t}),name:"btnDisabledColor",fallback:null===(H=e.previewTheme.colors)||void 0===H?void 0:H.btnDisabled,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.btnDisabledTextColorLocal,"onUpdate:modelValue":t[61]||(t[61]=function(t){return e.btnDisabledTextColorLocal=t}),name:"btnDisabledTextColor",fallback:null===(Y=e.previewTheme.colors)||void 0===Y?void 0:Y.btnDisabledText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.btnDisabledPanelTextColorLocal,"onUpdate:modelValue":t[62]||(t[62]=function(t){return e.btnDisabledPanelTextColorLocal=t}),name:"btnDisabledPanelTextColor",fallback:null===(K=e.previewTheme.colors)||void 0===K?void 0:K.btnDisabledPanelText,label:e.$t("settings.style.advanced_colors.panel_header")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.btnDisabledTopBarTextColorLocal,"onUpdate:modelValue":t[63]||(t[63]=function(t){return e.btnDisabledTopBarTextColorLocal=t}),name:"btnDisabledTopBarTextColor",fallback:null===(G=e.previewTheme.colors)||void 0===G?void 0:G.btnDisabledTopBarText,label:e.$t("settings.style.advanced_colors.top_bar")},null,8,["modelValue","fallback","label"]),(0,l._)("h5",null,(0,h.zw)(e.$t("settings.style.advanced_colors.toggled")),1),(0,l.Wm)(c,{modelValue:e.btnToggledColorLocal,"onUpdate:modelValue":t[64]||(t[64]=function(t){return e.btnToggledColorLocal=t}),name:"btnToggledColor",fallback:null===(Q=e.previewTheme.colors)||void 0===Q?void 0:Q.btnToggled,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.btnToggledTextColorLocal,"onUpdate:modelValue":t[65]||(t[65]=function(t){return e.btnToggledTextColorLocal=t}),name:"btnToggledTextColor",fallback:null===(J=e.previewTheme.colors)||void 0===J?void 0:J.btnToggledText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.btnToggledText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.btnToggledPanelTextColorLocal,"onUpdate:modelValue":t[66]||(t[66]=function(t){return e.btnToggledPanelTextColorLocal=t}),name:"btnToggledPanelTextColor",fallback:null===(X=e.previewTheme.colors)||void 0===X?void 0:X.btnToggledPanelText,label:e.$t("settings.style.advanced_colors.panel_header")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.btnToggledPanelText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.btnToggledTopBarTextColorLocal,"onUpdate:modelValue":t[67]||(t[67]=function(t){return e.btnToggledTopBarTextColorLocal=t}),name:"btnToggledTopBarTextColor",fallback:null===(ee=e.previewTheme.colors)||void 0===ee?void 0:ee.btnToggledTopBarText,label:e.$t("settings.style.advanced_colors.top_bar")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.btnToggledTopBarText},null,8,["contrast"])]),(0,l._)("div",$s,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.tabs")),1),(0,l.Wm)(c,{modelValue:e.tabColorLocal,"onUpdate:modelValue":t[68]||(t[68]=function(t){return e.tabColorLocal=t}),name:"tabColor",fallback:null===(te=e.previewTheme.colors)||void 0===te?void 0:te.tab,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.tabTextColorLocal,"onUpdate:modelValue":t[69]||(t[69]=function(t){return e.tabTextColorLocal=t}),name:"tabTextColor",fallback:null===(ne=e.previewTheme.colors)||void 0===ne?void 0:ne.tabText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.tabText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.tabActiveTextColorLocal,"onUpdate:modelValue":t[70]||(t[70]=function(t){return e.tabActiveTextColorLocal=t}),name:"tabActiveTextColor",fallback:null===(le=e.previewTheme.colors)||void 0===le?void 0:le.tabActiveText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(p,{contrast:e.previewContrast.tabActiveText},null,8,["contrast"])]),(0,l._)("div",Cs,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.borders")),1),(0,l.Wm)(c,{modelValue:e.borderColorLocal,"onUpdate:modelValue":t[71]||(t[71]=function(t){return e.borderColorLocal=t}),name:"borderColor",fallback:null===(oe=e.previewTheme.colors)||void 0===oe?void 0:oe.border,label:e.$t("settings.style.common.color")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(d,{modelValue:e.borderOpacityLocal,"onUpdate:modelValue":t[72]||(t[72]=function(t){return e.borderOpacityLocal=t}),name:"borderOpacity",fallback:null===(ae=e.previewTheme.opacity)||void 0===ae?void 0:ae.border,disabled:"transparent"===e.borderColorLocal},null,8,["modelValue","fallback","disabled"])]),(0,l._)("div",Vs,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.faint_text")),1),(0,l.Wm)(c,{modelValue:e.faintColorLocal,"onUpdate:modelValue":t[73]||(t[73]=function(t){return e.faintColorLocal=t}),name:"faintColor",fallback:null===(ie=e.previewTheme.colors)||void 0===ie?void 0:ie.faint,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.faintLinkColorLocal,"onUpdate:modelValue":t[74]||(t[74]=function(t){return e.faintLinkColorLocal=t}),name:"faintLinkColor",fallback:null===(se=e.previewTheme.colors)||void 0===se?void 0:se.faintLink,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.panelFaintColorLocal,"onUpdate:modelValue":t[75]||(t[75]=function(t){return e.panelFaintColorLocal=t}),name:"panelFaintColor",fallback:null===(re=e.previewTheme.colors)||void 0===re?void 0:re.panelFaint,label:e.$t("settings.style.advanced_colors.panel_header")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(d,{modelValue:e.faintOpacityLocal,"onUpdate:modelValue":t[76]||(t[76]=function(t){return e.faintOpacityLocal=t}),name:"faintOpacity",fallback:null===(ue=e.previewTheme.opacity)||void 0===ue?void 0:ue.faint},null,8,["modelValue","fallback"])]),(0,l._)("div",Us,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.underlay")),1),(0,l.Wm)(c,{modelValue:e.underlayColorLocal,"onUpdate:modelValue":t[77]||(t[77]=function(t){return e.underlayColorLocal=t}),name:"underlay",label:e.$t("settings.style.advanced_colors.underlay"),fallback:null===(ce=e.previewTheme.colors)||void 0===ce?void 0:ce.underlay},null,8,["modelValue","label","fallback"]),(0,l.Wm)(d,{modelValue:e.underlayOpacityLocal,"onUpdate:modelValue":t[78]||(t[78]=function(t){return e.underlayOpacityLocal=t}),name:"underlayOpacity",fallback:null===(de=e.previewTheme.opacity)||void 0===de?void 0:de.underlay,disabled:"transparent"===e.underlayOpacityLocal},null,8,["modelValue","fallback","disabled"])]),(0,l._)("div",Ts,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.wallpaper")),1),(0,l.Wm)(c,{modelValue:e.wallpaperColorLocal,"onUpdate:modelValue":t[79]||(t[79]=function(t){return e.wallpaperColorLocal=t}),name:"wallpaper",label:e.$t("settings.style.advanced_colors.wallpaper"),fallback:null===(pe=e.previewTheme.colors)||void 0===pe?void 0:pe.wallpaper},null,8,["modelValue","label","fallback"])]),(0,l._)("div",xs,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.poll")),1),(0,l.Wm)(c,{modelValue:e.pollColorLocal,"onUpdate:modelValue":t[80]||(t[80]=function(t){return e.pollColorLocal=t}),name:"poll",label:e.$t("settings.background"),fallback:null===(me=e.previewTheme.colors)||void 0===me?void 0:me.poll},null,8,["modelValue","label","fallback"]),(0,l.Wm)(c,{modelValue:e.pollTextColorLocal,"onUpdate:modelValue":t[81]||(t[81]=function(t){return e.pollTextColorLocal=t}),name:"pollText",label:e.$t("settings.text"),fallback:null===(he=e.previewTheme.colors)||void 0===he?void 0:he.pollText},null,8,["modelValue","label","fallback"])]),(0,l._)("div",zs,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.icons")),1),(0,l.Wm)(c,{modelValue:e.iconColorLocal,"onUpdate:modelValue":t[82]||(t[82]=function(t){return e.iconColorLocal=t}),name:"icon",label:e.$t("settings.style.advanced_colors.icons"),fallback:null===(ge=e.previewTheme.colors)||void 0===ge?void 0:ge.icon},null,8,["modelValue","label","fallback"])]),(0,l._)("div",Os,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.highlight")),1),(0,l.Wm)(c,{modelValue:e.highlightColorLocal,"onUpdate:modelValue":t[83]||(t[83]=function(t){return e.highlightColorLocal=t}),name:"highlight",label:e.$t("settings.background"),fallback:null===(be=e.previewTheme.colors)||void 0===be?void 0:be.highlight},null,8,["modelValue","label","fallback"]),(0,l.Wm)(c,{modelValue:e.highlightTextColorLocal,"onUpdate:modelValue":t[84]||(t[84]=function(t){return e.highlightTextColorLocal=t}),name:"highlightText",label:e.$t("settings.text"),fallback:null===(we=e.previewTheme.colors)||void 0===we?void 0:we.highlightText},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.highlightText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.highlightLinkColorLocal,"onUpdate:modelValue":t[85]||(t[85]=function(t){return e.highlightLinkColorLocal=t}),name:"highlightLink",label:e.$t("settings.links"),fallback:null===(_e=e.previewTheme.colors)||void 0===_e?void 0:_e.highlightLink},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.highlightLink},null,8,["contrast"])]),(0,l._)("div",Ls,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.popover")),1),(0,l.Wm)(c,{modelValue:e.popoverColorLocal,"onUpdate:modelValue":t[86]||(t[86]=function(t){return e.popoverColorLocal=t}),name:"popover",label:e.$t("settings.background"),fallback:null===(ve=e.previewTheme.colors)||void 0===ve?void 0:ve.popover},null,8,["modelValue","label","fallback"]),(0,l.Wm)(d,{modelValue:e.popoverOpacityLocal,"onUpdate:modelValue":t[87]||(t[87]=function(t){return e.popoverOpacityLocal=t}),name:"popoverOpacity",fallback:null===(ke=e.previewTheme.opacity)||void 0===ke?void 0:ke.popover,disabled:"transparent"===e.popoverOpacityLocal},null,8,["modelValue","fallback","disabled"]),(0,l.Wm)(c,{modelValue:e.popoverTextColorLocal,"onUpdate:modelValue":t[88]||(t[88]=function(t){return e.popoverTextColorLocal=t}),name:"popoverText",label:e.$t("settings.text"),fallback:null===(ye=e.previewTheme.colors)||void 0===ye?void 0:ye.popoverText},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.popoverText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.popoverLinkColorLocal,"onUpdate:modelValue":t[89]||(t[89]=function(t){return e.popoverLinkColorLocal=t}),name:"popoverLink",label:e.$t("settings.links"),fallback:null===($e=e.previewTheme.colors)||void 0===$e?void 0:$e.popoverLink},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.popoverLink},null,8,["contrast"])]),(0,l._)("div",Ws,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.selectedPost")),1),(0,l.Wm)(c,{modelValue:e.selectedPostColorLocal,"onUpdate:modelValue":t[90]||(t[90]=function(t){return e.selectedPostColorLocal=t}),name:"selectedPost",label:e.$t("settings.background"),fallback:null===(Ce=e.previewTheme.colors)||void 0===Ce?void 0:Ce.selectedPost},null,8,["modelValue","label","fallback"]),(0,l.Wm)(c,{modelValue:e.selectedPostTextColorLocal,"onUpdate:modelValue":t[91]||(t[91]=function(t){return e.selectedPostTextColorLocal=t}),name:"selectedPostText",label:e.$t("settings.text"),fallback:null===(Ve=e.previewTheme.colors)||void 0===Ve?void 0:Ve.selectedPostText},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.selectedPostText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.selectedPostLinkColorLocal,"onUpdate:modelValue":t[92]||(t[92]=function(t){return e.selectedPostLinkColorLocal=t}),name:"selectedPostLink",label:e.$t("settings.links"),fallback:null===(Ue=e.previewTheme.colors)||void 0===Ue?void 0:Ue.selectedPostLink},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.selectedPostLink},null,8,["contrast"])]),(0,l._)("div",Ps,[(0,l._)("h4",null,(0,h.zw)(e.$t("settings.style.advanced_colors.selectedMenu")),1),(0,l.Wm)(c,{modelValue:e.selectedMenuColorLocal,"onUpdate:modelValue":t[93]||(t[93]=function(t){return e.selectedMenuColorLocal=t}),name:"selectedMenu",label:e.$t("settings.background"),fallback:null===(Te=e.previewTheme.colors)||void 0===Te?void 0:Te.selectedMenu},null,8,["modelValue","label","fallback"]),(0,l.Wm)(c,{modelValue:e.selectedMenuTextColorLocal,"onUpdate:modelValue":t[94]||(t[94]=function(t){return e.selectedMenuTextColorLocal=t}),name:"selectedMenuText",label:e.$t("settings.text"),fallback:null===(xe=e.previewTheme.colors)||void 0===xe?void 0:xe.selectedMenuText},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.selectedMenuText},null,8,["contrast"]),(0,l.Wm)(c,{modelValue:e.selectedMenuLinkColorLocal,"onUpdate:modelValue":t[95]||(t[95]=function(t){return e.selectedMenuLinkColorLocal=t}),name:"selectedMenuLink",label:e.$t("settings.links"),fallback:null===(ze=e.previewTheme.colors)||void 0===ze?void 0:ze.selectedMenuLink},null,8,["modelValue","label","fallback"]),(0,l.Wm)(p,{contrast:e.previewContrast.selectedMenuLink},null,8,["contrast"])]),(0,l._)("div",Ss,[(0,l._)("h4",null,(0,h.zw)(e.$t("chats.chats")),1),(0,l.Wm)(c,{modelValue:e.chatBgColorLocal,"onUpdate:modelValue":t[96]||(t[96]=function(t){return e.chatBgColorLocal=t}),name:"chatBgColor",fallback:null===(Oe=e.previewTheme.colors)||void 0===Oe?void 0:Oe.bg,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l._)("h5",null,(0,h.zw)(e.$t("settings.style.advanced_colors.chat.incoming")),1),(0,l.Wm)(c,{modelValue:e.chatMessageIncomingBgColorLocal,"onUpdate:modelValue":t[97]||(t[97]=function(t){return e.chatMessageIncomingBgColorLocal=t}),name:"chatMessageIncomingBgColor",fallback:null===(Le=e.previewTheme.colors)||void 0===Le?void 0:Le.bg,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.chatMessageIncomingTextColorLocal,"onUpdate:modelValue":t[98]||(t[98]=function(t){return e.chatMessageIncomingTextColorLocal=t}),name:"chatMessageIncomingTextColor",fallback:null===(We=e.previewTheme.colors)||void 0===We?void 0:We.text,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.chatMessageIncomingLinkColorLocal,"onUpdate:modelValue":t[99]||(t[99]=function(t){return e.chatMessageIncomingLinkColorLocal=t}),name:"chatMessageIncomingLinkColor",fallback:null===(Pe=e.previewTheme.colors)||void 0===Pe?void 0:Pe.link,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.chatMessageIncomingBorderColorLocal,"onUpdate:modelValue":t[100]||(t[100]=function(t){return e.chatMessageIncomingBorderColorLocal=t}),name:"chatMessageIncomingBorderLinkColor",fallback:null===(Se=e.previewTheme.colors)||void 0===Se?void 0:Se.fg,label:e.$t("settings.style.advanced_colors.chat.border")},null,8,["modelValue","fallback","label"]),(0,l._)("h5",null,(0,h.zw)(e.$t("settings.style.advanced_colors.chat.outgoing")),1),(0,l.Wm)(c,{modelValue:e.chatMessageOutgoingBgColorLocal,"onUpdate:modelValue":t[101]||(t[101]=function(t){return e.chatMessageOutgoingBgColorLocal=t}),name:"chatMessageOutgoingBgColor",fallback:null===(De=e.previewTheme.colors)||void 0===De?void 0:De.bg,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.chatMessageOutgoingTextColorLocal,"onUpdate:modelValue":t[102]||(t[102]=function(t){return e.chatMessageOutgoingTextColorLocal=t}),name:"chatMessageOutgoingTextColor",fallback:null===(je=e.previewTheme.colors)||void 0===je?void 0:je.text,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.chatMessageOutgoingLinkColorLocal,"onUpdate:modelValue":t[103]||(t[103]=function(t){return e.chatMessageOutgoingLinkColorLocal=t}),name:"chatMessageOutgoingLinkColor",fallback:null===(Ie=e.previewTheme.colors)||void 0===Ie?void 0:Ie.link,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),(0,l.Wm)(c,{modelValue:e.chatMessageOutgoingBorderColorLocal,"onUpdate:modelValue":t[104]||(t[104]=function(t){return e.chatMessageOutgoingBorderColorLocal=t}),name:"chatMessageOutgoingBorderLinkColor",fallback:null===(Ae=e.previewTheme.colors)||void 0===Ae?void 0:Ae.bg,label:e.$t("settings.style.advanced_colors.chat.border")},null,8,["modelValue","fallback","label"])])],8,hs),(0,l._)("div",{label:e.$t("settings.style.radii._tab_label"),class:"radius-container"},[(0,l._)("div",js,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.radii_help")),1),(0,l._)("button",{class:"btn button-default",onClick:t[105]||(t[105]=function(){return e.clearRoundness&&e.clearRoundness.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.clear_all")),1)]),(0,l.Wm)(m,{modelValue:e.btnRadiusLocal,"onUpdate:modelValue":t[106]||(t[106]=function(t){return e.btnRadiusLocal=t}),name:"btnRadius",label:e.$t("settings.btnRadius"),fallback:null===(Be=e.previewTheme.radii)||void 0===Be?void 0:Be.btn,max:"16","hard-min":"0"},null,8,["modelValue","label","fallback"]),(0,l.Wm)(m,{modelValue:e.inputRadiusLocal,"onUpdate:modelValue":t[107]||(t[107]=function(t){return e.inputRadiusLocal=t}),name:"inputRadius",label:e.$t("settings.inputRadius"),fallback:null===(Ee=e.previewTheme.radii)||void 0===Ee?void 0:Ee.input,max:"9","hard-min":"0"},null,8,["modelValue","label","fallback"]),(0,l.Wm)(m,{modelValue:e.checkboxRadiusLocal,"onUpdate:modelValue":t[108]||(t[108]=function(t){return e.checkboxRadiusLocal=t}),name:"checkboxRadius",label:e.$t("settings.checkboxRadius"),fallback:null===(Fe=e.previewTheme.radii)||void 0===Fe?void 0:Fe.checkbox,max:"16","hard-min":"0"},null,8,["modelValue","label","fallback"]),(0,l.Wm)(m,{modelValue:e.panelRadiusLocal,"onUpdate:modelValue":t[109]||(t[109]=function(t){return e.panelRadiusLocal=t}),name:"panelRadius",label:e.$t("settings.panelRadius"),fallback:null===(qe=e.previewTheme.radii)||void 0===qe?void 0:qe.panel,max:"50","hard-min":"0"},null,8,["modelValue","label","fallback"]),(0,l.Wm)(m,{modelValue:e.avatarRadiusLocal,"onUpdate:modelValue":t[110]||(t[110]=function(t){return e.avatarRadiusLocal=t}),name:"avatarRadius",label:e.$t("settings.avatarRadius"),fallback:null===(Ze=e.previewTheme.radii)||void 0===Ze?void 0:Ze.avatar,max:"28","hard-min":"0"},null,8,["modelValue","label","fallback"]),(0,l.Wm)(m,{modelValue:e.avatarAltRadiusLocal,"onUpdate:modelValue":t[111]||(t[111]=function(t){return e.avatarAltRadiusLocal=t}),name:"avatarAltRadius",label:e.$t("settings.avatarAltRadius"),fallback:null===(Me=e.previewTheme.radii)||void 0===Me?void 0:Me.avatarAlt,max:"28","hard-min":"0"},null,8,["modelValue","label","fallback"]),(0,l.Wm)(m,{modelValue:e.attachmentRadiusLocal,"onUpdate:modelValue":t[112]||(t[112]=function(t){return e.attachmentRadiusLocal=t}),name:"attachmentRadius",label:e.$t("settings.attachmentRadius"),fallback:null===(Re=e.previewTheme.radii)||void 0===Re?void 0:Re.attachment,max:"50","hard-min":"0"},null,8,["modelValue","label","fallback"]),(0,l.Wm)(m,{modelValue:e.tooltipRadiusLocal,"onUpdate:modelValue":t[113]||(t[113]=function(t){return e.tooltipRadiusLocal=t}),name:"tooltipRadius",label:e.$t("settings.tooltipRadius"),fallback:null===(Ne=e.previewTheme.radii)||void 0===Ne?void 0:Ne.tooltip,max:"50","hard-min":"0"},null,8,["modelValue","label","fallback"]),(0,l.Wm)(m,{modelValue:e.chatMessageRadiusLocal,"onUpdate:modelValue":t[114]||(t[114]=function(t){return e.chatMessageRadiusLocal=t}),name:"chatMessageRadius",label:e.$t("settings.chatMessageRadius"),fallback:(null===(He=e.previewTheme.radii)||void 0===He?void 0:He.chatMessage)||2,max:"50","hard-min":"0"},null,8,["modelValue","label","fallback"])],8,Ds),(0,l._)("div",{label:e.$t("settings.style.shadows._tab_label"),class:"shadow-container"},[(0,l._)("div",As,[(0,l._)("div",Bs,[(0,l.Uk)((0,h.zw)(e.$t("settings.style.shadows.component"))+" "+(0,h.zw)(" ")+" ",1),(0,l.Wm)(s,{id:"shadow-switcher",modelValue:e.shadowSelected,"onUpdate:modelValue":t[115]||(t[115]=function(t){return e.shadowSelected=t}),class:"shadow-switcher"},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.shadowsAvailable,(function(t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:t},(0,h.zw)(e.$t("settings.style.shadows.components."+t)),9,Es)})),128))]})),_:1},8,["modelValue"])]),(0,l._)("div",Fs,[(0,l._)("label",qs,(0,h.zw)(e.$t("settings.style.shadows.override")),1),(0,l.Uk)(" "+(0,h.zw)(" ")+" "),(0,l.wy)((0,l._)("input",{id:"override","onUpdate:modelValue":t[116]||(t[116]=function(t){return e.currentShadowOverriden=t}),name:"override",class:"input-override",type:"checkbox"},null,512),[[fe.e8,e.currentShadowOverriden]]),Zs]),(0,l._)("button",{class:"btn button-default",onClick:t[117]||(t[117]=function(){return e.clearShadows&&e.clearShadows.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.clear_all")),1)]),(0,l.Wm)(f,{modelValue:e.currentShadow,"onUpdate:modelValue":t[118]||(t[118]=function(t){return e.currentShadow=t}),ready:!!e.currentShadowFallback,fallback:e.currentShadowFallback},null,8,["modelValue","ready","fallback"]),"avatar"===e.shadowSelected||"avatarStatus"===e.shadowSelected?((0,l.wg)(),(0,l.iD)("div",Ms,[(0,l.Wm)(g,{scope:"global",keypath:"settings.style.shadows.filter_hint.always_drop_shadow",tag:"p"},{default:(0,l.w5)((function(){return[Rs]})),_:1}),(0,l._)("p",null,(0,h.zw)(e.$t("settings.style.shadows.filter_hint.avatar_inset")),1),(0,l.Wm)(g,{scope:"global",keypath:"settings.style.shadows.filter_hint.drop_shadow_syntax",tag:"p"},{default:(0,l.w5)((function(){return[Ns,Hs,Ys]})),_:1}),(0,l.Wm)(g,{scope:"global",keypath:"settings.style.shadows.filter_hint.inset_classic",tag:"p"},{default:(0,l.w5)((function(){return[Ks]})),_:1}),(0,l._)("p",null,(0,h.zw)(e.$t("settings.style.shadows.filter_hint.spread_zero")),1)])):(0,l.kq)("",!0)],8,Is),(0,l._)("div",{label:e.$t("settings.style.fonts._tab_label"),class:"fonts-container"},[(0,l._)("div",Qs,[(0,l._)("p",null,(0,h.zw)(e.$t("settings.style.fonts.help")),1),(0,l._)("button",{class:"btn button-default",onClick:t[119]||(t[119]=function(){return e.clearFonts&&e.clearFonts.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.clear_all")),1)]),(0,l.Wm)(b,{modelValue:e.fontsLocal.interface,"onUpdate:modelValue":t[120]||(t[120]=function(t){return e.fontsLocal.interface=t}),name:"ui",label:e.$t("settings.style.fonts.components.interface"),fallback:null===(Ye=e.previewTheme.fonts)||void 0===Ye?void 0:Ye.interface,"no-inherit":"1"},null,8,["modelValue","label","fallback"]),(0,l.Wm)(b,{modelValue:e.fontsLocal.input,"onUpdate:modelValue":t[121]||(t[121]=function(t){return e.fontsLocal.input=t}),name:"input",label:e.$t("settings.style.fonts.components.input"),fallback:null===(Ke=e.previewTheme.fonts)||void 0===Ke?void 0:Ke.input},null,8,["modelValue","label","fallback"]),(0,l.Wm)(b,{modelValue:e.fontsLocal.post,"onUpdate:modelValue":t[122]||(t[122]=function(t){return e.fontsLocal.post=t}),name:"post",label:e.$t("settings.style.fonts.components.post"),fallback:null===(Ge=e.previewTheme.fonts)||void 0===Ge?void 0:Ge.post},null,8,["modelValue","label","fallback"]),(0,l.Wm)(b,{modelValue:e.fontsLocal.postCode,"onUpdate:modelValue":t[123]||(t[123]=function(t){return e.fontsLocal.postCode=t}),name:"postCode",label:e.$t("settings.style.fonts.components.postCode"),fallback:null===(Qe=e.previewTheme.fonts)||void 0===Qe?void 0:Qe.postCode},null,8,["modelValue","label","fallback"])],8,Gs)]})),_:1})],1024)),e.isActive?((0,l.wg)(),(0,l.j4)(l.lR,{key:0,to:"#unscrolled-content"},[(0,l._)("div",Js,[(0,l._)("button",{class:"btn button-default submit",disabled:!e.themeValid,onClick:t[124]||(t[124]=function(){return e.setCustomTheme&&e.setCustomTheme.apply(e,arguments)})},(0,h.zw)(e.$t("general.apply")),9,Xs),(0,l._)("button",{class:"btn button-default",onClick:t[125]||(t[125]=function(){return e.clearAll&&e.clearAll.apply(e,arguments)})},(0,h.zw)(e.$t("settings.style.switcher.reset")),1)])])):(0,l.kq)("",!0)])}]]);A.vI.add(B.klh,B.ILF,B.G_j,B.XsY,B.qmU,B.q7m,B.Aq,B.YHc,B.wyP);const vu={components:{TabSwitcher:f.Z,DataImportExportTab:Q,MutesAndBlocksTab:ut,NotificationsTab:It,FilteringTab:fn,SecurityTab:zl,ProfileTab:So,GeneralTab:ra,AppearanceTab:Si,VersionTab:Zi,ThemeTab:_u},computed:{isLoggedIn:function(){return!!this.$store.state.users.currentUser},open:function(){return"hidden"!==this.$store.state.interface.settingsModalState},bodyLock:function(){return"visible"===this.$store.state.interface.settingsModalState}},methods:{onOpen:function(){var e=this.$store.state.interface.settingsModalTargetTab;if(e){var t=this.$refs.tabSwitcher.$slots.default().findIndex((function(t){return t.props&&t.props["data-tab-name"]===e}));t>=0&&this.$refs.tabSwitcher.setTab(t)}this.$store.dispatch("clearSettingsModalTargetTab")}},mounted:function(){this.onOpen()},watch:{open:function(e){e&&this.onOpen()}}},ku=(0,F.Z)(vu,[["render",function(e,t,n,f,h,g){var b=(0,l.up)("GeneralTab"),w=(0,l.up)("AppearanceTab"),_=(0,l.up)("ThemeTab"),v=(0,l.up)("ProfileTab"),k=(0,l.up)("NotificationsTab"),y=(0,l.up)("SecurityTab"),$=(0,l.up)("FilteringTab"),C=(0,l.up)("MutesAndBlocksTab"),V=(0,l.up)("DataImportExportTab"),U=(0,l.up)("VersionTab"),T=(0,l.up)("tab-switcher");return(0,l.wg)(),(0,l.j4)(T,{ref:"tabSwitcher",class:"settings_tab-switcher","side-tab-bar":!0,"scrollable-tabs":!0,"body-scroll-lock":e.bodyLock},{default:(0,l.w5)((function(){return[(0,l._)("div",{label:e.$t("settings.general"),icon:"wrench","data-tab-name":"general"},[(0,l.Wm)(b)],8,o),(0,l._)("div",{label:e.$t("settings.appearance"),icon:"window-restore","data-tab-name":"appearance"},[(0,l.Wm)(w)],8,a),(0,l._)("div",{label:e.$t("settings.theme"),icon:"paint-brush","data-tab-name":"theme"},[(0,l.Wm)(_)],8,i),e.isLoggedIn?((0,l.wg)(),(0,l.iD)("div",{key:0,label:e.$t("settings.profile_tab"),icon:"user","data-tab-name":"profile"},[(0,l.Wm)(v)],8,s)):(0,l.kq)("",!0),e.isLoggedIn?((0,l.wg)(),(0,l.iD)("div",{key:1,label:e.$t("settings.notifications"),icon:"bell","data-tab-name":"notifications"},[(0,l.Wm)(k)],8,r)):(0,l.kq)("",!0),e.isLoggedIn?((0,l.wg)(),(0,l.iD)("div",{key:2,label:e.$t("settings.security_tab"),icon:"lock","data-tab-name":"security"},[(0,l.Wm)(y)],8,u)):(0,l.kq)("",!0),(0,l._)("div",{label:e.$t("settings.filtering"),icon:"filter","data-tab-name":"filtering"},[(0,l.Wm)($)],8,c),e.isLoggedIn?((0,l.wg)(),(0,l.iD)("div",{key:3,label:e.$t("settings.mutes_and_blocks"),fullHeight:!0,icon:"eye-slash","data-tab-name":"mutesAndBlocks"},[(0,l.Wm)(C)],8,d)):(0,l.kq)("",!0),e.isLoggedIn?((0,l.wg)(),(0,l.iD)("div",{key:4,label:e.$t("settings.data_import_export_tab"),icon:"download","data-tab-name":"dataImportExport"},[(0,l.Wm)(V)],8,p)):(0,l.kq)("",!0),(0,l._)("div",{label:e.$t("settings.version.title"),icon:"info","data-tab-name":"version"},[(0,l.Wm)(U)],8,m)]})),_:1},8,["body-scroll-lock"])}]])}}]);
//# sourceMappingURL=5292.125b85a896c810481068.js.map