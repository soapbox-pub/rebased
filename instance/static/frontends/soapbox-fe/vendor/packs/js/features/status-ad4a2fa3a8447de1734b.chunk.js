(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{688:function(e,t,a){"use strict";a.r(t);var s,o,i,g=a(0),n=a(2),c=a(6),l=a(1),r=a(5),d=a(3),m=a.n(d),u=a(8),p=a(4),h=a.n(p),b=a(11),j=a.n(b),f=a(15),O=a.n(f),v=a(66),M=a(580),k=a(35),y=a(44),_=a(124),C=a(359),w=a(710),S=a(61),I=a(9),R=a(300),D=a(13),x=a(74),T=a(218),H=a(221),N=a(10),U=a(316),E=a(42),V=a(111),B=a(96),A=a(39),z=Object(u.connect)(function(e){return{allowedEmoji:Object(A.e)(e).get("allowedEmoji")}})((i=o=function(o){function e(){for(var t,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return t=o.call.apply(o,[this].concat(a))||this,Object(l.a)(Object(n.a)(t),"getNormalizedReacts",function(){var e=t.props.status;return Object(V.b)(e.getIn(["pleroma","emoji_reactions"]),e.get("favourites_count"),e.get("favourited"),t.props.allowedEmoji).reverse()}),Object(l.a)(Object(n.a)(t),"getRepost",function(){var e=t.props.status;return e.get("reblogs_count")?Object(g.a)(S.a,{to:"/@"+e.getIn(["account","acct"])+"/posts/"+e.get("id")+"/reblogs",className:"emoji-react emoji-react--reblogs"},void 0,Object(g.a)(N.a,{id:"retweet"}),Object(g.a)("span",{className:"emoji-reacts__count"},void 0,Object(g.a)(I.b,{value:e.get("reblogs_count")}))):""}),t}return Object(c.a)(e,o),e.prototype.render=function(){var e=this.getNormalizedReacts(),t=e.reduce(function(e,t){return e+t.get("count")},0),a=this.getRepost();return Object(g.a)("div",{className:"status-interaction-bar"},void 0,0<t&&Object(g.a)(function(){return Object(g.a)("div",{className:"emoji-reacts-container"},void 0,Object(g.a)("div",{className:"emoji-reacts"},void 0,e.map(function(e,t){return Object(g.a)("span",{className:"emoji-react"},t,Object(g.a)("span",{className:"emoji-react__emoji",dangerouslySetInnerHTML:{__html:Object(E.b)(e.get("name"))}}),Object(g.a)("span",{className:"emoji-react__count"},void 0,e.get("count")))})),Object(g.a)("div",{className:"emoji-reacts__count"},void 0,t))},{}),a)},e}(D.a),Object(l.a)(o,"propTypes",{status:O.a.map,me:B.a.me,allowedEmoji:O.a.list}),s=i))||s,F=a(30),L=a(128),P=function(o){function e(){for(var a,e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return a=o.call.apply(o,[this].concat(t))||this,Object(l.a)(Object(n.a)(a),"state",{height:null}),Object(l.a)(Object(n.a)(a),"handleOpenVideo",function(e,t){a.props.onOpenVideo(e,t)}),Object(l.a)(Object(n.a)(a),"handleExpandedToggle",function(){a.props.onToggleHidden(a.props.status)}),Object(l.a)(Object(n.a)(a),"setRef",function(e){a.node=e,a._measureHeight()}),Object(l.a)(Object(n.a)(a),"handleModalLink",function(e){var t;e.preventDefault(),t="A"!==e.target.nodeName?e.target.parentNode.href:e.target.href,window.open(t,"soapbox-intent","width=445,height=600,resizable=no,menubar=no,status=no,scrollbars=yes")}),a}Object(c.a)(e,o);var t=e.prototype;return t._measureHeight=function(e){var t=this;this.props.measureHeight&&this.node&&(Object(H.a)(function(){return t.node&&t.setState({height:Math.ceil(t.node.scrollHeight)+1})}),this.props.onHeightChange&&e&&this.props.onHeightChange())},t.componentDidUpdate=function(e,t){this._measureHeight(t.height!==this.state.height)},t.render=function(){var e=this.props.status&&this.props.status.get("reblog")?this.props.status.get("reblog"):this.props.status,t={boxSizing:"border-box"},a=this.props.compact,s=e.getIn(["account","pleroma","favicon"]),o=Object(F.b)(e.get("account"));if(!e)return null;var i,n,c="",r="",l="";return this.props.measureHeight&&(t.height=this.state.height+"px"),e.get("poll")&&(r=Object(g.a)(U.a,{pollId:e.get("poll")})),0<e.get("media_attachments").size?c="video"===e.getIn(["media_attachments",0,"type"])?(i=e.getIn(["media_attachments",0]),Object(g.a)(x.default,{preview:i.get("preview_url"),blurhash:i.get("blurhash"),src:i.get("url"),alt:i.get("description"),aspectRatio:i.getIn(["meta","original","aspect"]),width:300,height:150,inline:!0,onOpenVideo:this.handleOpenVideo,sensitive:e.get("sensitive"),visible:this.props.showMedia,onToggleVisibility:this.props.onToggleMediaVisibility})):"audio"===e.getIn(["media_attachments",0,"type"])&&1===e.get("media_attachments").size?(n=e.getIn(["media_attachments",0]),Object(g.a)(T.default,{src:n.get("url"),alt:n.get("description"),inline:!0,sensitive:e.get("sensitive"),visible:this.props.showMedia,onToggleVisibility:this.props.onToggleMediaVisibility})):Object(g.a)(C.default,{standalone:!0,sensitive:e.get("sensitive"),media:e.get("media_attachments"),height:300,onOpenMedia:this.props.onOpenMedia,visible:this.props.showMedia,onToggleVisibility:this.props.onToggleMediaVisibility}):0===e.get("spoiler_text").length&&(c=Object(g.a)(R.a,{onOpenMedia:this.props.onOpenMedia,card:e.get("card",null)})),"direct"===e.get("visibility")?l=Object(g.a)(N.a,{id:"envelope"}):"private"===e.get("visibility")&&(l=Object(g.a)(N.a,{id:"lock"})),Object(g.a)("div",{style:t},void 0,m.a.createElement("div",{ref:this.setRef,className:j()("detailed-status",{compact:a})},Object(g.a)("div",{className:"detailed-status__profile"},void 0,Object(g.a)("div",{className:"detailed-status__display-name"},void 0,Object(g.a)(w.a,{to:"/@"+e.getIn(["account","acct"])},void 0,Object(g.a)("div",{className:"detailed-status__display-avatar"},void 0,Object(g.a)(L.a,{accountId:e.getIn(["account","id"])},void 0,Object(g.a)(k.a,{account:e.get("account"),size:48})))),Object(g.a)(y.a,{account:e.get("account")},void 0,Object(g.a)(L.a,{accountId:e.getIn(["account","id"])},void 0,Object(g.a)(w.a,{className:"floating-link",to:"/@"+e.getIn(["account","acct"]),title:e.getIn(["account","acct"])}))))),e.get("group")&&Object(g.a)("div",{className:"status__meta"},void 0,"Posted in ",Object(g.a)(w.a,{to:"/groups/"+e.getIn(["group","id"])},void 0,e.getIn(["group","title"]))),Object(g.a)(_.a,{status:e,expanded:!e.get("hidden"),onExpandedToggle:this.handleExpandedToggle}),c,r,Object(g.a)("div",{className:"detailed-status__meta"},void 0,Object(g.a)(z,{status:e}),Object(g.a)("div",{},void 0,s&&Object(g.a)("div",{className:"status__favicon"},void 0,Object(g.a)(S.a,{to:"/timeline/"+o},void 0,Object(g.a)("img",{src:s,alt:"",title:o}))),l,Object(g.a)("a",{className:"detailed-status__datetime",href:e.get("url"),target:"_blank",rel:"noopener"},void 0,Object(g.a)(I.a,{value:new Date(e.get("created_at")),hour12:!1,year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}))))))},e}(D.a);Object(l.a)(P,"contextTypes",{router:h.a.object}),Object(l.a)(P,"propTypes",{status:O.a.map,onOpenMedia:h.a.func.isRequired,onOpenVideo:h.a.func.isRequired,onToggleHidden:h.a.func.isRequired,measureHeight:h.a.bool,onHeightChange:h.a.func,domain:h.a.string,compact:h.a.bool,showMedia:h.a.bool,onToggleMediaVisibility:h.a.func});var q=a(21),J=a(23),K=a(77),W=a(32),Y=a(59),Z=a(299),G=Object(I.c)({delete:{id:"status.delete",defaultMessage:"Delete"},redraft:{id:"status.redraft",defaultMessage:"Delete & re-draft"},direct:{id:"status.direct",defaultMessage:"Direct message @{name}"},mention:{id:"status.mention",defaultMessage:"Mention @{name}"},reply:{id:"status.reply",defaultMessage:"Reply"},reblog:{id:"status.reblog",defaultMessage:"Repost"},reblog_private:{id:"status.reblog_private",defaultMessage:"Repost to original audience"},cancel_reblog_private:{id:"status.cancel_reblog_private",defaultMessage:"Un-repost"},cannot_reblog:{id:"status.cannot_reblog",defaultMessage:"This post cannot be reposted"},favourite:{id:"status.favourite",defaultMessage:"Like"},mute:{id:"status.mute",defaultMessage:"Mute @{name}"},muteConversation:{id:"status.mute_conversation",defaultMessage:"Mute conversation"},unmuteConversation:{id:"status.unmute_conversation",defaultMessage:"Unmute conversation"},block:{id:"status.block",defaultMessage:"Block @{name}"},report:{id:"status.report",defaultMessage:"Report @{name}"},share:{id:"status.share",defaultMessage:"Share"},pin:{id:"status.pin",defaultMessage:"Pin on profile"},unpin:{id:"status.unpin",defaultMessage:"Unpin from profile"},embed:{id:"status.embed",defaultMessage:"Embed"},admin_account:{id:"status.admin_account",defaultMessage:"Open moderation interface for @{name}"},admin_status:{id:"status.admin_status",defaultMessage:"Open this post in the moderation interface"},copy:{id:"status.copy",defaultMessage:"Copy link to post"},bookmark:{id:"status.bookmark",defaultMessage:"Bookmark"},unbookmark:{id:"status.unbookmark",defaultMessage:"Remove bookmark"},deactivateUser:{id:"admin.users.actions.deactivate_user",defaultMessage:"Deactivate @{name}"},deleteUser:{id:"admin.users.actions.delete_user",defaultMessage:"Delete @{name}"},deleteStatus:{id:"admin.statuses.actions.delete_status",defaultMessage:"Delete post"},markStatusSensitive:{id:"admin.statuses.actions.mark_status_sensitive",defaultMessage:"Mark post sensitive"},markStatusNotSensitive:{id:"admin.statuses.actions.mark_status_not_sensitive",defaultMessage:"Mark post not sensitive"}}),Q=function(o){function e(){for(var a,e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return a=o.call.apply(o,[this].concat(t))||this,Object(l.a)(Object(n.a)(a),"state",{emojiSelectorVisible:!1}),Object(l.a)(Object(n.a)(a),"handleReplyClick",function(){a.props.me?a.props.onReply(a.props.status):a.props.onOpenUnauthorizedModal()}),Object(l.a)(Object(n.a)(a),"handleReblogClick",function(e){a.props.me?a.props.onReblog(a.props.status,e):a.props.onOpenUnauthorizedModal()}),Object(l.a)(Object(n.a)(a),"handleBookmarkClick",function(){a.props.onBookmark(a.props.status)}),Object(l.a)(Object(n.a)(a),"handleFavouriteClick",function(){a.props.me?a.props.onFavourite(a.props.status):a.props.onOpenUnauthorizedModal()}),Object(l.a)(Object(n.a)(a),"handleLikeButtonHover",function(e){Object(Y.c)()||a.setState({emojiSelectorVisible:!0})}),Object(l.a)(Object(n.a)(a),"handleLikeButtonLeave",function(e){Object(Y.c)()||a.setState({emojiSelectorVisible:!1})}),Object(l.a)(Object(n.a)(a),"handleLikeButtonClick",function(e){var t=Object(V.a)(a.props.status,a.props.allowedEmoji)||"ðŸ‘";!Object(Y.c)()||a.state.emojiSelectorVisible?a.handleReactClick(t)():a.setState({emojiSelectorVisible:!0})}),Object(l.a)(Object(n.a)(a),"handleReactClick",function(t){return function(e){a.props.me?a.props.onEmojiReact(a.props.status,t):a.props.onOpenUnauthorizedModal(),a.setState({emojiSelectorVisible:!1})}}),Object(l.a)(Object(n.a)(a),"handleDeleteClick",function(){a.props.onDelete(a.props.status,a.context.router.history)}),Object(l.a)(Object(n.a)(a),"handleRedraftClick",function(){a.props.onDelete(a.props.status,a.context.router.history,!0)}),Object(l.a)(Object(n.a)(a),"handleDirectClick",function(){a.props.onDirect(a.props.status.get("account"),a.context.router.history)}),Object(l.a)(Object(n.a)(a),"handleMentionClick",function(){a.props.onMention(a.props.status.get("account"),a.context.router.history)}),Object(l.a)(Object(n.a)(a),"handleMuteClick",function(){a.props.onMute(a.props.status.get("account"))}),Object(l.a)(Object(n.a)(a),"handleConversationMuteClick",function(){a.props.onMuteConversation(a.props.status)}),Object(l.a)(Object(n.a)(a),"handleBlockClick",function(){a.props.onBlock(a.props.status)}),Object(l.a)(Object(n.a)(a),"handleReport",function(){a.props.onReport(a.props.status)}),Object(l.a)(Object(n.a)(a),"handlePinClick",function(){a.props.onPin(a.props.status)}),Object(l.a)(Object(n.a)(a),"handleShare",function(){navigator.share({text:a.props.status.get("search_index"),url:a.props.status.get("url")})}),Object(l.a)(Object(n.a)(a),"handleEmbed",function(){a.props.onEmbed(a.props.status)}),Object(l.a)(Object(n.a)(a),"handleCopy",function(){var e=a.props.status.get("url"),t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t);try{t.select(),document.execCommand("copy")}catch(e){}finally{document.body.removeChild(t)}}),Object(l.a)(Object(n.a)(a),"handleDeactivateUser",function(){a.props.onDeactivateUser(a.props.status)}),Object(l.a)(Object(n.a)(a),"handleDeleteUser",function(){a.props.onDeleteUser(a.props.status)}),Object(l.a)(Object(n.a)(a),"handleToggleStatusSensitivity",function(){a.props.onToggleStatusSensitivity(a.props.status)}),Object(l.a)(Object(n.a)(a),"handleDeleteStatus",function(){a.props.onDeleteStatus(a.props.status)}),Object(l.a)(Object(n.a)(a),"setRef",function(e){a.node=e}),a}Object(c.a)(e,o);var t=e.prototype;return t.componentDidMount=function(){var t=this;document.addEventListener("click",function(e){t.node&&!t.node.contains(e.target)&&t.setState({emojiSelectorVisible:!1})})},t.render=function(){var e=this.props,t=e.status,a=e.intl,s=e.me,o=e.isStaff,i=e.allowedEmoji,n=this.state.emojiSelectorVisible,c=["public","unlisted"].includes(t.get("visibility")),r=t.get("muted"),l=Object(V.a)(t,i),d=[];c&&d.push({text:a.formatMessage(G.copy),action:this.handleCopy}),d.push({text:a.formatMessage(t.get("bookmarked")?G.unbookmark:G.bookmark),action:this.handleBookmarkClick}),d.push(null),s===t.getIn(["account","id"])?(c?d.push({text:a.formatMessage(t.get("pinned")?G.unpin:G.pin),action:this.handlePinClick}):"private"===t.get("visibility")&&d.push({text:a.formatMessage(t.get("reblogged")?G.cancel_reblog_private:G.reblog_private),action:this.handleReblogClick}),d.push(null),d.push({text:a.formatMessage(r?G.unmuteConversation:G.muteConversation),action:this.handleConversationMuteClick}),d.push(null),d.push({text:a.formatMessage(G.delete),action:this.handleDeleteClick}),d.push({text:a.formatMessage(G.redraft),action:this.handleRedraftClick})):(d.push({text:a.formatMessage(G.mention,{name:t.getIn(["account","username"])}),action:this.handleMentionClick}),d.push(null),d.push({text:a.formatMessage(G.mute,{name:t.getIn(["account","username"])}),action:this.handleMuteClick}),d.push({text:a.formatMessage(G.block,{name:t.getIn(["account","username"])}),action:this.handleBlockClick}),d.push({text:a.formatMessage(G.report,{name:t.getIn(["account","username"])}),action:this.handleReport}),o&&(d.push(null),d.push({text:a.formatMessage(G.admin_account,{name:t.getIn(["account","username"])}),href:"/pleroma/admin/#/users/"+t.getIn(["account","id"])+"/"}),d.push({text:a.formatMessage(G.deactivateUser,{name:t.getIn(["account","username"])}),action:this.handleDeactivateUser}),d.push({text:a.formatMessage(G.deleteUser,{name:t.getIn(["account","username"])}),action:this.handleDeleteUser}),d.push({text:a.formatMessage(!1===t.get("sensitive")?G.markStatusSensitive:G.markStatusNotSensitive),action:this.handleToggleStatusSensitivity}),d.push({text:a.formatMessage(G.deleteStatus),action:this.handleDeleteStatus})));var u="share"in navigator&&"public"===t.get("visibility")&&Object(g.a)("div",{className:"detailed-status__button"},void 0,Object(g.a)(J.a,{title:a.formatMessage(G.share),icon:"share-alt",onClick:this.handleShare})),p=null===t.get("in_reply_to_id",null)?"reply":"reply-all",h="retweet";"direct"===t.get("visibility")?h="envelope":"private"===t.get("visibility")&&(h="lock");var b="direct"===t.get("visibility")||"private"===t.get("visibility");return Object(g.a)("div",{className:"detailed-status__action-bar"},void 0,Object(g.a)("div",{className:"detailed-status__button"},void 0,Object(g.a)(J.a,{title:a.formatMessage(G.reply),icon:t.get("in_reply_to_account_id")===t.getIn(["account","id"])?"reply":p,onClick:this.handleReplyClick,text:a.formatMessage(G.reply)})),Object(g.a)("div",{className:"detailed-status__button"},void 0,Object(g.a)(J.a,{disabled:b,active:t.get("reblogged"),title:b?a.formatMessage(G.cannot_reblog):a.formatMessage(G.reblog),icon:h,onClick:this.handleReblogClick,text:a.formatMessage(G.reblog)})),m.a.createElement("div",{className:"detailed-status__button detailed-status__button--favourite",onMouseEnter:this.handleLikeButtonHover,onMouseLeave:this.handleLikeButtonLeave,ref:this.setRef},Object(g.a)(Z.a,{onReact:this.handleReactClick,visible:n}),Object(g.a)(J.a,{className:"star-icon",animate:!0,active:Boolean(l),title:a.formatMessage(G.favourite),icon:"thumbs-up",emoji:l,text:a.formatMessage(G.favourite),onClick:this.handleLikeButtonClick})),u,Object(g.a)("div",{className:"detailed-status__action-bar-dropdown"},void 0,Object(g.a)(K.a,{size:18,icon:"ellipsis-h",items:d,direction:"left",title:"More"})))},e}(m.a.PureComponent);Object(l.a)(Q,"contextTypes",{router:h.a.object}),Object(l.a)(Q,"defaultProps",{isStaff:!1});var X,$,ee,te,ae=Object(W.c)(Object(u.connect)(function(e){var t=e.get("me");return{me:t,isStaff:Object(F.g)(e.getIn(["accounts",t]))}},function(e){return{onOpenUnauthorizedModal:function(){e(Object(q.d)("UNAUTHORIZED"))}}})(Q)),se=a(227),oe=a(36),ie=a(146),ne=a(18),ce=a(19),re=a(78),le=a(56),de=a(34),ue=a(230),pe=a(189),he=a(29),be=a(143),ge=a(148),me=a(217),je=a(20),fe=a(100);a.d(t,"default",function(){return ve});var Oe=Object(I.c)({deleteConfirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"},deleteMessage:{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this post?"},redraftConfirm:{id:"confirmations.redraft.confirm",defaultMessage:"Delete & redraft"},redraftMessage:{id:"confirmations.redraft.message",defaultMessage:"Are you sure you want to delete this post and re-draft it? Favorites and reposts will be lost, and replies to the original post will be orphaned."},blockConfirm:{id:"confirmations.block.confirm",defaultMessage:"Block"},revealAll:{id:"status.show_more_all",defaultMessage:"Show more for all"},hideAll:{id:"status.show_less_all",defaultMessage:"Show less for all"},detailedStatus:{id:"status.detailed_status",defaultMessage:"Detailed conversation view"},replyConfirm:{id:"confirmations.reply.confirm",defaultMessage:"Reply"},replyMessage:{id:"confirmations.reply.message",defaultMessage:"Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?"},blockAndReport:{id:"confirmations.block.block_and_report",defaultMessage:"Block & Report"}}),ve=(X=Object(u.connect)(function(){var s=Object(de.h)();return function(o,e){var i=s(o,{id:e.params.statusId,username:e.params.username}),t=r.default.List(),a=r.default.List();return i&&(t=t.withMutations(function(e){for(var t=o.getIn(["contexts","inReplyTos",i.get("id")]);t;)e.unshift(t),t=o.getIn(["contexts","inReplyTos",t])}),a=a.withMutations(function(e){for(var t=[i.get("id")];0<t.length;){var a=t.shift(),s=o.getIn(["contexts","replies",a]);i.get("id")!==a&&e.push(a),s&&s.reverse().forEach(function(e){t.unshift(e)})}})),{status:i,ancestorsIds:t,descendantsIds:a,askReplyConfirmation:0!==o.getIn(["compose","text"]).trim().length,domain:o.getIn(["meta","domain"]),me:o.get("me"),displayMedia:Object(je.f)(o).get("displayMedia"),allowedEmoji:Object(A.e)(o).get("allowedEmoji")}}}),Object(W.c)($=X((te=ee=function(s){function e(){for(var r,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r=s.call.apply(s,[this].concat(t))||this,Object(l.a)(Object(n.a)(r),"state",{fullscreen:!1,showMedia:Object(me.b)(r.props.status,r.props.displayMedia),loadedStatusId:void 0}),Object(l.a)(Object(n.a)(r),"handleToggleMediaVisibility",function(){r.setState({showMedia:!r.state.showMedia})}),Object(l.a)(Object(n.a)(r),"handleEmojiReactClick",function(e,t){r.props.dispatch(Object(ie.c)(e,t))}),Object(l.a)(Object(n.a)(r),"handleFavouriteClick",function(e){e.get("favourited")?r.props.dispatch(Object(oe.u)(e)):r.props.dispatch(Object(oe.o)(e))}),Object(l.a)(Object(n.a)(r),"handlePin",function(e){e.get("pinned")?r.props.dispatch(Object(oe.v)(e)):r.props.dispatch(Object(oe.r)(e))}),Object(l.a)(Object(n.a)(r),"handleBookmark",function(e){e.get("bookmarked")?r.props.dispatch(Object(oe.t)(e)):r.props.dispatch(Object(oe.n)(e))}),Object(l.a)(Object(n.a)(r),"handleReplyClick",function(e){var t=r.props,a=t.askReplyConfirmation,s=t.dispatch,o=t.intl;s(a?Object(q.d)("CONFIRM",{message:o.formatMessage(Oe.replyMessage),confirm:o.formatMessage(Oe.replyConfirm),onConfirm:function(){return s(Object(ne.eb)(e,r.context.router.history))}}):Object(ne.eb)(e,r.context.router.history))}),Object(l.a)(Object(n.a)(r),"handleModalReblog",function(e){r.props.dispatch(Object(oe.s)(e))}),Object(l.a)(Object(n.a)(r),"handleReblogClick",function(s,o){r.props.dispatch(function(e,t){var a=Object(je.f)(t()).get("boostModal");s.get("reblogged")?r.props.dispatch(Object(oe.w)(s)):o&&o.shiftKey||!a?r.handleModalReblog(s):r.props.dispatch(Object(q.d)("BOOST",{status:s,onReblog:r.handleModalReblog}))})}),Object(l.a)(Object(n.a)(r),"handleDeleteClick",function(s,o,i){void 0===i&&(i=!1);var e=r.props,n=e.dispatch,c=e.intl;r.props.dispatch(function(e,t){var a=Object(je.f)(t()).get("deleteModal");n(a?Object(q.d)("CONFIRM",{message:c.formatMessage(i?Oe.redraftMessage:Oe.deleteMessage),confirm:c.formatMessage(i?Oe.redraftConfirm:Oe.deleteConfirm),onConfirm:function(){return n(Object(v.g)(s.get("id"),o,i))}}):Object(v.g)(s.get("id"),o,i))})}),Object(l.a)(Object(n.a)(r),"handleDirectClick",function(e,t){r.props.dispatch(Object(ne.Y)(e,t))}),Object(l.a)(Object(n.a)(r),"handleMentionClick",function(e,t){r.props.dispatch(Object(ne.bb)(e,t))}),Object(l.a)(Object(n.a)(r),"handleOpenMedia",function(e,t){r.props.dispatch(Object(q.d)("MEDIA",{media:e,index:t}))}),Object(l.a)(Object(n.a)(r),"handleOpenVideo",function(e,t){r.props.dispatch(Object(q.d)("VIDEO",{media:e,time:t}))}),Object(l.a)(Object(n.a)(r),"handleMuteClick",function(e){r.props.dispatch(Object(re.g)(e))}),Object(l.a)(Object(n.a)(r),"handleConversationMuteClick",function(e){e.get("muted")?r.props.dispatch(Object(v.l)(e.get("id"))):r.props.dispatch(Object(v.j)(e.get("id")))}),Object(l.a)(Object(n.a)(r),"handleToggleHidden",function(e){e.get("hidden")?r.props.dispatch(Object(v.k)(e.get("id"))):r.props.dispatch(Object(v.i)(e.get("id")))}),Object(l.a)(Object(n.a)(r),"handleToggleAll",function(){var e=r.props,t=e.status,a=e.ancestorsIds,s=e.descendantsIds,o=[t.get("id")].concat(a.toJS(),s.toJS());t.get("hidden")?r.props.dispatch(Object(v.k)(o)):r.props.dispatch(Object(v.i)(o))}),Object(l.a)(Object(n.a)(r),"handleBlockClick",function(e){var t=r.props,a=t.dispatch,s=t.intl,o=e.get("account");a(Object(q.d)("CONFIRM",{message:Object(g.a)(he.a,{id:"confirmations.block.message",defaultMessage:"Are you sure you want to block {name}?",values:{name:Object(g.a)("strong",{},void 0,"@",o.get("acct"))}}),confirm:s.formatMessage(Oe.blockConfirm),onConfirm:function(){return a(Object(ce.w)(o.get("id")))},secondary:s.formatMessage(Oe.blockAndReport),onSecondary:function(){a(Object(ce.w)(o.get("id"))),a(Object(le.m)(o,e))}}))}),Object(l.a)(Object(n.a)(r),"handleReport",function(e){r.props.dispatch(Object(le.m)(e.get("account"),e))}),Object(l.a)(Object(n.a)(r),"handleEmbed",function(e){r.props.dispatch(Object(q.d)("EMBED",{url:e.get("url")}))}),Object(l.a)(Object(n.a)(r),"handleDeactivateUser",function(e){var t=r.props,a=t.dispatch,s=t.intl;a(Object(fe.a)(s,e.getIn(["account","id"])))}),Object(l.a)(Object(n.a)(r),"handleDeleteUser",function(e){var t=r.props,a=t.dispatch,s=t.intl;a(Object(fe.c)(s,e.getIn(["account","id"])))}),Object(l.a)(Object(n.a)(r),"handleToggleStatusSensitivity",function(e){var t=r.props,a=t.dispatch,s=t.intl;a(Object(fe.d)(s,e.get("id"),e.get("sensitive")))}),Object(l.a)(Object(n.a)(r),"handleDeleteStatus",function(e){var t=r.props,a=t.dispatch,s=t.intl;a(Object(fe.b)(s,e.get("id")))}),Object(l.a)(Object(n.a)(r),"handleHotkeyMoveUp",function(){r.handleMoveUp(r.props.status.get("id"))}),Object(l.a)(Object(n.a)(r),"handleHotkeyMoveDown",function(){r.handleMoveDown(r.props.status.get("id"))}),Object(l.a)(Object(n.a)(r),"handleHotkeyReply",function(e){e.preventDefault(),r.handleReplyClick(r.props.status)}),Object(l.a)(Object(n.a)(r),"handleHotkeyFavourite",function(){r.handleFavouriteClick(r.props.status)}),Object(l.a)(Object(n.a)(r),"handleHotkeyBoost",function(){r.handleReblogClick(r.props.status)}),Object(l.a)(Object(n.a)(r),"handleHotkeyMention",function(e){e.preventDefault(),r.handleMentionClick(r.props.status.get("account"))}),Object(l.a)(Object(n.a)(r),"handleHotkeyOpenProfile",function(){r.context.router.history.push("/@"+r.props.status.getIn(["account","acct"]))}),Object(l.a)(Object(n.a)(r),"handleHotkeyToggleHidden",function(){r.handleToggleHidden(r.props.status)}),Object(l.a)(Object(n.a)(r),"handleHotkeyToggleSensitive",function(){r.handleToggleMediaVisibility()}),Object(l.a)(Object(n.a)(r),"handleMoveUp",function(e){var t,a=r.props,s=a.status,o=a.ancestorsIds,i=a.descendantsIds;e===s.get("id")?r._selectChild(o.size-1,!0):-1===(t=o.indexOf(e))?(t=i.indexOf(e),r._selectChild(o.size+t,!0)):r._selectChild(t-1,!0)}),Object(l.a)(Object(n.a)(r),"handleMoveDown",function(e){var t,a=r.props,s=a.status,o=a.ancestorsIds,i=a.descendantsIds;e===s.get("id")?r._selectChild(o.size+1,!1):-1===(t=o.indexOf(e))?(t=i.indexOf(e),r._selectChild(o.size+t+2,!1)):r._selectChild(t+1,!1)}),Object(l.a)(Object(n.a)(r),"setRef",function(e){r.node=e}),Object(l.a)(Object(n.a)(r),"onFullScreenChange",function(){r.setState({fullscreen:Object(ge.d)()})}),r}Object(c.a)(e,s);var t=e.prototype;return t.componentDidMount=function(){this.props.dispatch(Object(v.h)(this.props.params.statusId)),Object(ge.a)(this.onFullScreenChange)},t._selectChild=function(e,t){var a=this.node,s=a.querySelectorAll(".focusable")[e];s&&(t&&a.scrollTop>s.offsetTop?s.scrollIntoView(!0):!t&&a.scrollTop+a.clientHeight<s.offsetTop+s.offsetHeight&&s.scrollIntoView(!1),s.focus())},t.renderTombstone=function(e){return Object(g.a)("div",{className:"tombstone"},e,Object(g.a)("p",{},void 0,Object(g.a)(he.a,{id:"statuses.tombstone",defaultMessage:"One or more posts is unavailable."})))},t.renderStatus=function(e){return Object(g.a)(pe.a,{id:e,onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown,contextType:"thread"},e)},t.renderChildren=function(e){var t=this;return e.map(function(e){return e.endsWith("-tombstone")?t.renderTombstone(e):t.renderStatus(e)})},t.componentDidUpdate=function(e,t){var a,s=this.props,o=s.params,i=s.status,n=e.ancestorsIds;o.statusId!==e.params.statusId&&o.statusId&&(this._scrolledIntoView=!1,this.props.dispatch(Object(v.h)(o.statusId))),i&&i.get("id")!==t.loadedStatusId&&this.setState({showMedia:Object(me.b)(i),loadedStatusId:i.get("id")}),this._scrolledIntoView||e.status&&n&&0<n.size&&(a=this.node.querySelector(".detailed-status"),window.requestAnimationFrame(function(){a.scrollIntoView(!0)}),this._scrolledIntoView=!0)},t.componentWillUnmount=function(){Object(ge.b)(this.onFullScreenChange)},t.render=function(){var e,t,a=this.props,s=a.status,o=a.ancestorsIds,i=a.descendantsIds,n=a.intl,c=a.domain,r=a.me;if(null===s)return Object(g.a)(se.a,{},void 0,Object(g.a)(M.a,{}));o&&0<o.size&&(e=Object(g.a)("div",{},void 0,this.renderChildren(o))),i&&0<i.size&&(t=Object(g.a)("div",{},void 0,this.renderChildren(i)));var l={moveUp:this.handleHotkeyMoveUp,moveDown:this.handleHotkeyMoveDown,reply:this.handleHotkeyReply,favourite:this.handleHotkeyFavourite,boost:this.handleHotkeyBoost,mention:this.handleHotkeyMention,openProfile:this.handleHotkeyOpenProfile,toggleHidden:this.handleHotkeyToggleHidden,toggleSensitive:this.handleHotkeyToggleSensitive};return Object(g.a)(se.a,{label:n.formatMessage(Oe.detailedStatus)},void 0,r&&Object(g.a)(ue.a,{extraButton:Object(g.a)("button",{className:"column-header__button",title:n.formatMessage(s.get("hidden")?Oe.revealAll:Oe.hideAll),"aria-label":n.formatMessage(s.get("hidden")?Oe.revealAll:Oe.hideAll),onClick:this.handleToggleAll,"aria-pressed":s.get("hidden")?"false":"true"},void 0,Object(g.a)(N.a,{id:s.get("hidden")?"eye-slash":"eye"}))}),m.a.createElement("div",{ref:this.setRef},e,Object(g.a)(be.HotKeys,{handlers:l},void 0,Object(g.a)("div",{className:j()("focusable","detailed-status__wrapper"),tabIndex:"0","aria-label":Object(me.c)(n,s,!1)},void 0,Object(g.a)(P,{status:s,onOpenVideo:this.handleOpenVideo,onOpenMedia:this.handleOpenMedia,onToggleHidden:this.handleToggleHidden,domain:c,showMedia:this.state.showMedia,onToggleMediaVisibility:this.handleToggleMediaVisibility}),Object(g.a)(ae,{status:s,onReply:this.handleReplyClick,onFavourite:this.handleFavouriteClick,onEmojiReact:this.handleEmojiReactClick,onReblog:this.handleReblogClick,onDelete:this.handleDeleteClick,onDirect:this.handleDirectClick,onMention:this.handleMentionClick,onMute:this.handleMuteClick,onMuteConversation:this.handleConversationMuteClick,onBlock:this.handleBlockClick,onReport:this.handleReport,onPin:this.handlePin,onBookmark:this.handleBookmark,onEmbed:this.handleEmbed,onDeactivateUser:this.handleDeactivateUser,onDeleteUser:this.handleDeleteUser,onToggleStatusSensitivity:this.handleToggleStatusSensitivity,onDeleteStatus:this.handleDeleteStatus,allowedEmoji:this.props.allowedEmoji}))),t))},e}(D.a),Object(l.a)(ee,"contextTypes",{router:h.a.object}),Object(l.a)(ee,"propTypes",{params:h.a.object.isRequired,dispatch:h.a.func.isRequired,status:O.a.map,ancestorsIds:O.a.list,descendantsIds:O.a.list,intl:h.a.object.isRequired,askReplyConfirmation:h.a.bool,domain:h.a.string,displayMedia:h.a.string}),$=te))||$)||$)}}]);
//# sourceMappingURL=status-ad4a2fa3a8447de1734b.chunk.js.map